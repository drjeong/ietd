import{swalClasses}from"../utils/classes.js";import*as dom from"./dom/index.js";export const isSafariOrIOS=typeof window!=="undefined"&&!!window.GestureEvent;export const iOSfix=()=>{if(isSafariOrIOS&&!dom.hasClass(document.body,swalClasses.iosfix)){const offset=document.body.scrollTop;document.body.style.top=`${offset*-1}px`;dom.addClass(document.body,swalClasses.iosfix);lockBodyScroll()}};const lockBodyScroll=()=>{const container=dom.getContainer();if(!container){return}let preventTouchMove;container.ontouchstart=event=>{preventTouchMove=shouldPreventTouchMove(event)};container.ontouchmove=event=>{if(preventTouchMove){event.preventDefault();event.stopPropagation()}}};const shouldPreventTouchMove=event=>{const target=event.target;const container=dom.getContainer();const htmlContainer=dom.getHtmlContainer();if(!container||!htmlContainer){return false}if(isStylus(event)||isZoom(event)){return false}if(target===container){return true}if(!dom.isScrollable(container)&&target instanceof HTMLElement&&target.tagName!=="INPUT"&&target.tagName!=="TEXTAREA"&&!(dom.isScrollable(htmlContainer)&&htmlContainer.contains(target))){return true}return false};const isStylus=event=>{return event.touches&&event.touches.length&&event.touches[0].touchType==="stylus"};const isZoom=event=>{return event.touches&&event.touches.length>1};export const undoIOSfix=()=>{if(dom.hasClass(document.body,swalClasses.iosfix)){const offset=parseInt(document.body.style.top,10);dom.removeClass(document.body,swalClasses.iosfix);document.body.style.top="";document.body.scrollTop=offset*-1}};