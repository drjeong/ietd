(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(root["_Highcharts"],root["_Highcharts"]["SeriesRegistry"],root["_Highcharts"]["SVGElement"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/dependency-wheel",["highcharts/highcharts"],function(amd1){return factory(amd1,amd1["SeriesRegistry"],amd1["SVGElement"])});else if(typeof exports==="object")exports["highcharts/modules/dependency-wheel"]=factory(root["_Highcharts"],root["_Highcharts"]["SeriesRegistry"],root["_Highcharts"]["SVGElement"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["SeriesRegistry"],root["Highcharts"]["SVGElement"])})(typeof window==="undefined"?this:window,(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__512__,__WEBPACK_EXTERNAL_MODULE__28__)=>{return(()=>{"use strict";var __webpack_modules__={28:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__28__},512:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:()=>dependency_wheel_src});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);const{sankey:{prototype:{pointClass:SankeyPoint}}}=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes;const{pInt,wrap}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();class DependencyWheelPoint extends SankeyPoint{getDataLabelPath(label){const point=this,renderer=point.series.chart.renderer,shapeArgs=point.shapeArgs,upperHalf=point.angle<0||point.angle>Math.PI,start=shapeArgs.start||0,end=shapeArgs.end||0;if(!point.dataLabelPath){wrap(label,"destroy",function(proceed){if(point.dataLabelPath){point.dataLabelPath=point.dataLabelPath.destroy()}return proceed.call(this)})}else{point.dataLabelPath=point.dataLabelPath.destroy();delete point.dataLabelPath}point.dataLabelPath=renderer.arc({open:true,longArc:Math.abs(Math.abs(start)-Math.abs(end))<Math.PI?0:1}).attr({x:shapeArgs.x,y:shapeArgs.y,r:(shapeArgs.r||0)+pInt(label.options?.distance||0),start:upperHalf?start:end,end:upperHalf?end:start,clockwise:+upperHalf}).add(renderer.defs);return point.dataLabelPath}isValid(){return true}}const DependencyWheel_DependencyWheelPoint=DependencyWheelPoint;const DependencyWheelSeriesDefaults={center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:false,attributes:{dy:5}}}};"";const DependencyWheel_DependencyWheelSeriesDefaults=DependencyWheelSeriesDefaults;const{defined,getAlignFactor,relativeLength}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();var SankeyColumnComposition;(function(SankeyColumnComposition){function compose(points,series){const sankeyColumnArray=points;sankeyColumnArray.sankeyColumn=new SankeyColumnAdditions(sankeyColumnArray,series);return sankeyColumnArray}SankeyColumnComposition.compose=compose;class SankeyColumnAdditions{constructor(points,series){this.points=points;this.series=series}getTranslationFactor(series){const column=this.points,nodes=column.slice(),chart=series.chart,minLinkWidth=series.options.minLinkWidth||0;let skipPoint,factor=0,i,remainingHeight=(chart.plotSizeY||0)-(series.options.borderWidth||0)-(column.length-1)*series.nodePadding;while(column.length){factor=remainingHeight/column.sankeyColumn.sum();skipPoint=false;i=column.length;while(i--){if(column[i].getSum()*factor<minLinkWidth){column.splice(i,1);remainingHeight=Math.max(0,remainingHeight-minLinkWidth);skipPoint=true}}if(!skipPoint){break}}column.length=0;for(const node of nodes){column.push(node)}return factor}top(factor){const series=this.series,nodePadding=series.nodePadding,height=this.points.reduce((height,node)=>{if(height>0){height+=nodePadding}const nodeHeight=Math.max(node.getSum()*factor,series.options.minLinkWidth||0);height+=nodeHeight;return height},0);return getAlignFactor(series.options.nodeAlignment||"center")*((series.chart.plotSizeY||0)-height)}left(factor){const series=this.series,chart=series.chart,equalNodes=series.options.equalNodes,maxNodesLength=chart.inverted?chart.plotHeight:chart.plotWidth,nodePadding=series.nodePadding,width=this.points.reduce((width,node)=>{if(width>0){width+=nodePadding}const nodeWidth=equalNodes?maxNodesLength/node.series.nodes.length-nodePadding:Math.max(node.getSum()*factor,series.options.minLinkWidth||0);width+=nodeWidth;return width},0);return((chart.plotSizeX||0)-Math.round(width))/2}sum(){return this.points.reduce((sum,node)=>sum+node.getSum(),0)}offset(node,factor){const column=this.points,series=this.series,nodePadding=series.nodePadding;let offset=0,totalNodeOffset;if(series.is("organization")&&node.hangsFrom){return{absoluteTop:node.hangsFrom.nodeY}}for(let i=0;i<column.length;i++){const sum=column[i].getSum();const height=Math.max(sum*factor,series.options.minLinkWidth||0);const directionOffset=node.options[series.chart.inverted?"offsetHorizontal":"offsetVertical"],optionOffset=node.options.offset||0;if(sum){totalNodeOffset=height+nodePadding}else{totalNodeOffset=0}if(column[i]===node){return{relativeTop:offset+(defined(directionOffset)?relativeLength(directionOffset,height):relativeLength(optionOffset,totalNodeOffset))}}offset+=totalNodeOffset}}}SankeyColumnComposition.SankeyColumnAdditions=SankeyColumnAdditions})(SankeyColumnComposition||(SankeyColumnComposition={}));const Sankey_SankeyColumnComposition=SankeyColumnComposition;var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_=__webpack_require__(28);var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default=__webpack_require__.n(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_);const{deg2rad}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{addEvent,merge,uniqueKey,defined:TextPath_defined,extend}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();function setTextPath(path,textPathOptions){textPathOptions=merge(true,{enabled:true,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},textPathOptions);const url=this.renderer.url,textWrapper=this.text||this,textPath=textWrapper.textPath,{attributes,enabled}=textPathOptions;path=path||textPath&&textPath.path;if(textPath){textPath.undo()}if(path&&enabled){const undo=addEvent(textWrapper,"afterModifyTree",e=>{if(path&&enabled){let textPathId=path.attr("id");if(!textPathId){path.attr("id",textPathId=uniqueKey())}const textAttribs={x:0,y:0};if(TextPath_defined(attributes.dx)){textAttribs.dx=attributes.dx;delete attributes.dx}if(TextPath_defined(attributes.dy)){textAttribs.dy=attributes.dy;delete attributes.dy}textWrapper.attr(textAttribs);this.attr({transform:""});if(this.box){this.box=this.box.destroy()}const children=e.nodes.slice(0);e.nodes.length=0;e.nodes[0]={tagName:"textPath",attributes:extend(attributes,{"text-anchor":attributes.textAnchor,href:`${url}#${textPathId}`}),children:children}}});textWrapper.textPath={path:path,undo:undo}}else{textWrapper.attr({dx:0,dy:0});delete textWrapper.textPath}if(this.added){textWrapper.textCache="";this.renderer.buildText(textWrapper)}return this}function setPolygon(event){const bBox=event.bBox,tp=this.element?.querySelector("textPath");if(tp){const polygon=[],{b,h}=this.renderer.fontMetrics(this.element),descender=h-b,lineCleanerRegex=new RegExp("(<tspan>|"+'<tspan(?!\\sclass="highcharts-br")[^>]*>|'+"<\\/tspan>)","g"),lines=tp.innerHTML.replace(lineCleanerRegex,"").split(/<tspan class="highcharts-br"[^>]*>/),numOfLines=lines.length;const appendTopAndBottom=(charIndex,positionOfChar)=>{const{x,y}=positionOfChar,rotation=(tp.getRotationOfChar(charIndex)-90)*deg2rad,cosRot=Math.cos(rotation),sinRot=Math.sin(rotation);return[[x-descender*cosRot,y-descender*sinRot],[x+b*cosRot,y+b*sinRot]]};for(let i=0,lineIndex=0;lineIndex<numOfLines;lineIndex++){const line=lines[lineIndex],lineLen=line.length;for(let lineCharIndex=0;lineCharIndex<lineLen;lineCharIndex+=5){try{const srcCharIndex=i+lineCharIndex+lineIndex,[lower,upper]=appendTopAndBottom(srcCharIndex,tp.getStartPositionOfChar(srcCharIndex));if(lineCharIndex===0){polygon.push(upper);polygon.push(lower)}else{if(lineIndex===0){polygon.unshift(upper)}if(lineIndex===numOfLines-1){polygon.push(lower)}}}catch(e){break}}i+=lineLen-1;try{const srcCharIndex=i+lineIndex,charPos=tp.getEndPositionOfChar(srcCharIndex),[lower,upper]=appendTopAndBottom(srcCharIndex,charPos);polygon.unshift(upper);polygon.unshift(lower)}catch(e){break}}if(polygon.length){polygon.push(polygon[0].slice())}bBox.polygon=polygon}return bBox}function drawTextPath(event){const labelOptions=event.labelOptions,point=event.point,textPathOptions=labelOptions[point.formatPrefix+"TextPath"]||labelOptions.textPath;if(textPathOptions&&!labelOptions.useHTML){this.setTextPath(point.getDataLabelPath?.(this)||point.graphic,textPathOptions);if(point.dataLabelPath&&!textPathOptions.enabled){point.dataLabelPath=point.dataLabelPath.destroy()}}}function compose(SVGElementClass){addEvent(SVGElementClass,"afterGetBBox",setPolygon);addEvent(SVGElementClass,"beforeAddingDataLabel",drawTextPath);const svgElementProto=SVGElementClass.prototype;if(!svgElementProto.setTextPath){svgElementProto.setTextPath=setTextPath}}const TextPath={compose:compose};const Extensions_TextPath=TextPath;const{animObject}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{deg2rad:DependencyWheelSeries_deg2rad}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{pie:PieSeries,sankey:SankeySeries}=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes;const{extend:DependencyWheelSeries_extend,merge:DependencyWheelSeries_merge,relativeLength:DependencyWheelSeries_relativeLength}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();Extensions_TextPath.compose(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default());class DependencyWheelSeries extends SankeySeries{animate(init){const series=this;if(!init){const duration=animObject(series.options.animation).duration,step=duration/2/series.nodes.length;let i=0;for(const point of series.nodes){const graphic=point.graphic;if(graphic){graphic.attr({opacity:0});setTimeout(()=>{if(point.graphic){point.graphic.animate({opacity:1},{duration:step})}},step*i++)}}for(const point of series.points){const graphic=point.graphic;if(!point.isNode&&graphic){graphic.attr({opacity:0}).animate({opacity:1},series.options.animation)}}}}createNode(id){const node=super.createNode(id);node.getSum=()=>node.linksFrom.concat(node.linksTo).reduce((acc,link)=>acc+link.weight,0);node.offset=point=>{const otherNode=link=>link.fromNode===node?link.toNode:link.fromNode;let offset=0,links=node.linksFrom.concat(node.linksTo),sliced;links.sort((a,b)=>otherNode(a).index-otherNode(b).index);for(let i=0;i<links.length;i++){if(otherNode(links[i]).index>node.index){links=links.slice(0,i).reverse().concat(links.slice(i).reverse());sliced=true;break}}if(!sliced){links.reverse()}for(let i=0;i<links.length;i++){if(links[i]===point){return offset}offset+=links[i].weight}};return node}createNodeColumns(){const series=this,columns=[Sankey_SankeyColumnComposition.compose([],series)];for(const node of series.nodes){node.column=0;columns[0].push(node)}return columns}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const series=this,options=series.options,factor=2*Math.PI/(series.chart.plotHeight+series.getNodePadding()),center=series.getCenter(),startAngle=(options.startAngle-90)*DependencyWheelSeries_deg2rad,brOption=options.borderRadius,borderRadius=typeof brOption==="object"?brOption.radius:brOption;super.translate();for(const node of this.nodeColumns[0]){if(node.sum){const shapeArgs=node.shapeArgs,centerX=center[0],centerY=center[1],r=center[2]/2,nodeWidth=options.nodeWidth==="auto"?20:options.nodeWidth,innerR=r-DependencyWheelSeries_relativeLength(nodeWidth||0,r),start=startAngle+factor*(shapeArgs.y||0),end=startAngle+factor*((shapeArgs.y||0)+(shapeArgs.height||0));node.angle=start+(end-start)/2;node.shapeType="arc";node.shapeArgs={x:centerX,y:centerY,r:r,innerR:innerR,start:start,end:end,borderRadius:borderRadius};node.dlBox={x:centerX+Math.cos((start+end)/2)*(r+innerR)/2,y:centerY+Math.sin((start+end)/2)*(r+innerR)/2,width:1,height:1};for(const point of node.linksFrom){if(point.linkBase){let curveFactor,distance;const corners=point.linkBase.map((top,i)=>{const angle=factor*top,x=Math.cos(startAngle+angle)*(innerR+1),y=Math.sin(startAngle+angle)*(innerR+1);curveFactor=options.curveFactor||0;distance=Math.abs(point.linkBase[3-i]*factor-angle);if(distance>Math.PI){distance=2*Math.PI-distance}distance=distance*innerR;if(distance<innerR){curveFactor*=distance/innerR}return{x:centerX+x,y:centerY+y,cpX:centerX+(1-curveFactor)*x,cpY:centerY+(1-curveFactor)*y}});point.shapeArgs={d:[["M",corners[0].x,corners[0].y],["A",innerR,innerR,0,0,1,corners[1].x,corners[1].y],["C",corners[1].cpX,corners[1].cpY,corners[2].cpX,corners[2].cpY,corners[2].x,corners[2].y],["A",innerR,innerR,0,0,1,corners[3].x,corners[3].y],["C",corners[3].cpX,corners[3].cpY,corners[0].cpX,corners[0].cpY,corners[0].x,corners[0].y]]}}}}}}}DependencyWheelSeries.defaultOptions=DependencyWheelSeries_merge(SankeySeries.defaultOptions,DependencyWheel_DependencyWheelSeriesDefaults);DependencyWheelSeries_extend(DependencyWheelSeries.prototype,{orderNodes:false,getCenter:PieSeries.prototype.getCenter});DependencyWheelSeries.prototype.pointClass=DependencyWheel_DependencyWheelPoint;highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("dependencywheel",DependencyWheelSeries);const DependencyWheel_DependencyWheelSeries=null&&DependencyWheelSeries;const dependency_wheel_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});