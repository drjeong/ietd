(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(root["_Highcharts"],root["_Highcharts"]["Point"],root["_Highcharts"]["Series"],root["_Highcharts"]["SeriesRegistry"],root["_Highcharts"]["SVGRenderer"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/series-on-point",["highcharts/highcharts"],function(amd1){return factory(amd1,amd1["Point"],amd1["Series"],amd1["SeriesRegistry"],amd1["SVGRenderer"])});else if(typeof exports==="object")exports["highcharts/modules/series-on-point"]=factory(root["_Highcharts"],root["_Highcharts"]["Point"],root["_Highcharts"]["Series"],root["_Highcharts"]["SeriesRegistry"],root["_Highcharts"]["SVGRenderer"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["Point"],root["Highcharts"]["Series"],root["Highcharts"]["SeriesRegistry"],root["Highcharts"]["SVGRenderer"])})(typeof window==="undefined"?this:window,(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__260__,__WEBPACK_EXTERNAL_MODULE__820__,__WEBPACK_EXTERNAL_MODULE__512__,__WEBPACK_EXTERNAL_MODULE__540__)=>{return(()=>{"use strict";var __webpack_modules__={260:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__260__},540:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__540__},820:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__820__},512:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:()=>series_on_point_src});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);const{fireEvent,isArray,objectEach,uniqueKey}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();class DataTableCore{constructor(options={}){this.autoId=!options.id;this.columns={};this.id=options.id||uniqueKey();this.modified=this;this.rowCount=0;this.versionTag=uniqueKey();let rowCount=0;objectEach(options.columns||{},(column,columnName)=>{this.columns[columnName]=column.slice();rowCount=Math.max(rowCount,column.length)});this.applyRowCount(rowCount)}applyRowCount(rowCount){this.rowCount=rowCount;objectEach(this.columns,column=>{if(isArray(column)){column.length=rowCount}})}getColumn(columnName,asReference){return this.columns[columnName]}getColumns(columnNames,asReference){return(columnNames||Object.keys(this.columns)).reduce((columns,columnName)=>{columns[columnName]=this.columns[columnName];return columns},{})}getRow(rowIndex,columnNames){return(columnNames||Object.keys(this.columns)).map(key=>this.columns[key]?.[rowIndex])}setColumn(columnName,column=[],rowIndex=0,eventDetail){this.setColumns({[columnName]:column},rowIndex,eventDetail)}setColumns(columns,rowIndex,eventDetail){let rowCount=this.rowCount;objectEach(columns,(column,columnName)=>{this.columns[columnName]=column.slice();rowCount=column.length});this.applyRowCount(rowCount);if(!eventDetail?.silent){fireEvent(this,"afterSetColumns");this.versionTag=uniqueKey()}}setRow(row,rowIndex=this.rowCount,insert,eventDetail){const{columns}=this,indexRowCount=insert?this.rowCount+1:rowIndex+1;objectEach(row,(cellValue,columnName)=>{const column=columns[columnName]||eventDetail?.addColumns!==false&&new Array(indexRowCount);if(column){if(insert){column.splice(rowIndex,0,cellValue)}else{column[rowIndex]=cellValue}columns[columnName]=column}});if(indexRowCount>this.rowCount){this.applyRowCount(indexRowCount)}if(!eventDetail?.silent){fireEvent(this,"afterSetRows");this.versionTag=uniqueKey()}}}const Data_DataTableCore=DataTableCore;"";var highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_=__webpack_require__(260);var highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_default=__webpack_require__.n(highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_);var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_=__webpack_require__(820);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_=__webpack_require__(540);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default=__webpack_require__.n(highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_);const{composed}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{bubble}=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes;const{addEvent,defined,find,isNumber,pushUnique}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();var SeriesOnPointComposition;(function(SeriesOnPointComposition){function compose(SeriesClass,ChartClass){if(pushUnique(composed,"SeriesOnPoint")){const{chartGetZData,seriesAfterInit,seriesAfterRender,seriesGetCenter,seriesShowOrHide,seriesTranslate}=Additions.prototype;SeriesClass.types.pie.prototype.onPointSupported=true;addEvent(SeriesClass,"afterInit",seriesAfterInit);addEvent(SeriesClass,"afterRender",seriesAfterRender);addEvent(SeriesClass,"afterGetCenter",seriesGetCenter);addEvent(SeriesClass,"hide",seriesShowOrHide);addEvent(SeriesClass,"show",seriesShowOrHide);addEvent(SeriesClass,"translate",seriesTranslate);addEvent(ChartClass,"beforeRender",chartGetZData);addEvent(ChartClass,"beforeRedraw",chartGetZData)}return SeriesClass}SeriesOnPointComposition.compose=compose;class Additions{constructor(series){this.getColumn=bubble.prototype.getColumn;this.getRadii=bubble.prototype.getRadii;this.getRadius=bubble.prototype.getRadius;this.getPxExtremes=bubble.prototype.getPxExtremes;this.getZExtremes=bubble.prototype.getZExtremes;this.chart=series.chart;this.series=series;this.options=series.options.onPoint}drawConnector(){if(!this.connector){this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup)}const attribs=this.getConnectorAttributes();attribs&&this.connector.animate(attribs)}getConnectorAttributes(){const chart=this.series.chart,onPointOptions=this.options;if(!onPointOptions){return}const connectorOpts=onPointOptions.connectorOptions||{},position=onPointOptions.position,connectedPoint=chart.get(onPointOptions.id);if(!(connectedPoint instanceof highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_default())||!position||!defined(connectedPoint.plotX)||!defined(connectedPoint.plotY)){return}const xFrom=defined(position.x)?position.x:connectedPoint.plotX,yFrom=defined(position.y)?position.y:connectedPoint.plotY,xTo=xFrom+(position.offsetX||0),yTo=yFrom+(position.offsetY||0),width=connectorOpts.width||1,color=connectorOpts.stroke||this.series.color,dashStyle=connectorOpts.dashstyle,attribs={d:highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default().prototype.crispLine([["M",xFrom,yFrom],["L",xTo,yTo]],width),"stroke-width":width};if(!chart.styledMode){attribs.stroke=color;attribs.dashstyle=dashStyle}return attribs}seriesAfterInit(){if(this.onPointSupported&&this.options.onPoint){this.bubblePadding=true;this.useMapGeometry=true;this.onPoint=new Additions(this)}}seriesAfterRender(){delete this.chart.bubbleZExtremes;this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(e){const onPointOptions=this.options.onPoint,center=e.positions;if(onPointOptions){const connectedPoint=this.chart.get(onPointOptions.id);if(connectedPoint instanceof highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_default()&&defined(connectedPoint.plotX)&&defined(connectedPoint.plotY)){center[0]=connectedPoint.plotX;center[1]=connectedPoint.plotY}const position=onPointOptions.position;if(position){if(defined(position.x)){center[0]=position.x}if(defined(position.y)){center[1]=position.y}if(position.offsetX){center[0]+=position.offsetX}if(position.offsetY){center[1]+=position.offsetY}}}const radius=this.radii&&this.radii[this.index];if(isNumber(radius)){center[2]=radius*2}e.positions=center}seriesShowOrHide(){const allSeries=this.chart.series;this.points?.forEach(point=>{const series=find(allSeries,series=>{const id=((series.onPoint||{}).options||{}).id;if(!id){return false}return id===point.id});series&&series.setVisible(!series.visible,false)})}seriesTranslate(){if(this.onPoint){this.onPoint.getRadii();this.radii=this.onPoint.radii}}chartGetZData(){const zData=[];this.series.forEach(series=>{const onPointOpts=series.options.onPoint;zData.push(onPointOpts?.z??null)});const dataTable=new Data_DataTableCore({columns:{z:zData}});this.series.forEach(series=>{if(series.onPoint){series.onPoint.dataTable=series.dataTable=dataTable}})}}SeriesOnPointComposition.Additions=Additions})(SeriesOnPointComposition||(SeriesOnPointComposition={}));const Series_SeriesOnPointComposition=SeriesOnPointComposition;"";const G=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();Series_SeriesOnPointComposition.compose(G.Series,G.Chart);const series_on_point_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});