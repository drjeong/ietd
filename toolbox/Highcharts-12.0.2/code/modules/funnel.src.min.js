(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(root["_Highcharts"],root["_Highcharts"]["SeriesRegistry"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/funnel",["highcharts/highcharts"],function(amd1){return factory(amd1,amd1["SeriesRegistry"])});else if(typeof exports==="object")exports["highcharts/modules/funnel"]=factory(root["_Highcharts"],root["_Highcharts"]["SeriesRegistry"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["SeriesRegistry"])})(typeof window==="undefined"?this:window,(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__512__)=>{return(()=>{"use strict";var __webpack_modules__={512:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:()=>funnel_src});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);const FunnelSeriesDefaults={animation:false,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:false,size:true,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}};"";const Funnel_FunnelSeriesDefaults=FunnelSeriesDefaults;const{defaultOptions}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{noop}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{addEvent,extend,isObject,merge,relativeLength}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const defaultBorderRadiusOptions={radius:0,scope:"stack",where:void 0};let oldArc=noop;let oldRoundedRect=noop;function applyBorderRadius(path,i,r){const a=path[i];let b=path[i+1];if(b[0]==="Z"){b=path[0]}let line,arc,fromLineToArc;if((a[0]==="M"||a[0]==="L")&&b[0]==="A"){line=a;arc=b;fromLineToArc=true}else if(a[0]==="A"&&(b[0]==="M"||b[0]==="L")){line=b;arc=a}if(line&&arc&&arc.params){const bigR=arc[1],clockwise=arc[5],params=arc.params,{start,end,cx,cy}=params;const relativeR=clockwise?bigR-r:bigR+r,angleOfBorderRadius=relativeR?Math.asin(r/relativeR):0,angleOffset=clockwise?angleOfBorderRadius:-angleOfBorderRadius,distanceBigCenterToStartArc=Math.cos(angleOfBorderRadius)*relativeR;if(fromLineToArc){params.start=start+angleOffset;line[1]=cx+distanceBigCenterToStartArc*Math.cos(start);line[2]=cy+distanceBigCenterToStartArc*Math.sin(start);path.splice(i+1,0,["A",r,r,0,0,1,cx+bigR*Math.cos(params.start),cy+bigR*Math.sin(params.start)])}else{params.end=end-angleOffset;arc[6]=cx+bigR*Math.cos(params.end);arc[7]=cy+bigR*Math.sin(params.end);path.splice(i+1,0,["A",r,r,0,0,1,cx+distanceBigCenterToStartArc*Math.cos(end),cy+distanceBigCenterToStartArc*Math.sin(end)])}arc[4]=Math.abs(params.end-params.start)<Math.PI?0:1}}function arc(x,y,w,h,options={}){const path=oldArc(x,y,w,h,options),{innerR=0,r=w,start=0,end=0}=options;if(options.open||!options.borderRadius){return path}const alpha=end-start,sinHalfAlpha=Math.sin(alpha/2),borderRadius=Math.max(Math.min(relativeLength(options.borderRadius||0,r-innerR),(r-innerR)/2,r*sinHalfAlpha/(1+sinHalfAlpha)),0),innerBorderRadius=Math.min(borderRadius,2*(alpha/Math.PI)*innerR);let i=path.length-1;while(i--){applyBorderRadius(path,i,i>1?innerBorderRadius:borderRadius)}return path}function seriesOnAfterColumnTranslate(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){const{options,yAxis}=this,percent=options.stacking==="percent",seriesDefault=defaultOptions.plotOptions?.[this.type]?.borderRadius,borderRadius=optionsToObject(options.borderRadius,isObject(seriesDefault)?seriesDefault:{}),reversed=yAxis.options.reversed;for(const point of this.points){const{shapeArgs}=point;if(point.shapeType==="roundedRect"&&shapeArgs){const{width=0,height=0,y=0}=shapeArgs;let brBoxY=y,brBoxHeight=height;if(borderRadius.scope==="stack"&&point.stackTotal){const stackEnd=yAxis.translate(percent?100:point.stackTotal,false,true,false,true),stackThreshold=yAxis.translate(options.threshold||0,false,true,false,true),box=this.crispCol(0,Math.min(stackEnd,stackThreshold),0,Math.abs(stackEnd-stackThreshold));brBoxY=box.y;brBoxHeight=box.height}const flip=(point.negative?-1:1)*(reversed?-1:1)===-1;let where=borderRadius.where;if(!where&&this.is("waterfall")&&Math.abs((point.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth){where="all"}if(!where){where="end"}const r=Math.min(relativeLength(borderRadius.radius,width),width/2,where==="all"?height/2:Infinity)||0;if(where==="end"){if(flip){brBoxY-=r;brBoxHeight+=r}else{brBoxHeight+=r}}extend(shapeArgs,{brBoxHeight:brBoxHeight,brBoxY:brBoxY,r:r})}}}}function compose(SeriesClass,SVGElementClass,SVGRendererClass){const PieSeriesClass=SeriesClass.types.pie;if(!SVGElementClass.symbolCustomAttribs.includes("borderRadius")){const symbols=SVGRendererClass.prototype.symbols;addEvent(SeriesClass,"afterColumnTranslate",seriesOnAfterColumnTranslate,{order:9});addEvent(PieSeriesClass,"afterTranslate",pieSeriesOnAfterTranslate);SVGElementClass.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY");oldArc=symbols.arc;oldRoundedRect=symbols.roundedRect;symbols.arc=arc;symbols.roundedRect=roundedRect}}function optionsToObject(options,seriesBROptions){if(!isObject(options)){options={radius:options||0}}return merge(defaultBorderRadiusOptions,seriesBROptions,options)}function pieSeriesOnAfterTranslate(){const borderRadius=optionsToObject(this.options.borderRadius);for(const point of this.points){const shapeArgs=point.shapeArgs;if(shapeArgs){shapeArgs.borderRadius=relativeLength(borderRadius.radius,(shapeArgs.r||0)-(shapeArgs.innerR||0))}}}function roundedRect(x,y,width,height,options={}){const path=oldRoundedRect(x,y,width,height,options),{r=0,brBoxHeight=height,brBoxY=y}=options,brOffsetTop=y-brBoxY,brOffsetBtm=brBoxY+brBoxHeight-(y+height),rTop=brOffsetTop-r>-.1?0:r,rBtm=brOffsetBtm-r>-.1?0:r,cutTop=Math.max(rTop&&brOffsetTop,0),cutBtm=Math.max(rBtm&&brOffsetBtm,0);const a=[x+rTop,y],b=[x+width-rTop,y],c=[x+width,y+rTop],d=[x+width,y+height-rBtm],e=[x+width-rBtm,y+height],f=[x+rBtm,y+height],g=[x,y+height-rBtm],h=[x,y+rTop];const applyPythagoras=(r,altitude)=>Math.sqrt(Math.pow(r,2)-Math.pow(altitude,2));if(cutTop){const base=applyPythagoras(rTop,rTop-cutTop);a[0]-=base;b[0]+=base;c[1]=h[1]=y+rTop-cutTop}if(height<rTop-cutTop){const base=applyPythagoras(rTop,rTop-cutTop-height);c[0]=d[0]=x+width-rTop+base;e[0]=Math.min(c[0],e[0]);f[0]=Math.max(d[0],f[0]);g[0]=h[0]=x+rTop-base;c[1]=h[1]=y+height}if(cutBtm){const base=applyPythagoras(rBtm,rBtm-cutBtm);e[0]+=base;f[0]-=base;d[1]=g[1]=y+height-rBtm+cutBtm}if(height<rBtm-cutBtm){const base=applyPythagoras(rBtm,rBtm-cutBtm-height);c[0]=d[0]=x+width-rBtm+base;b[0]=Math.min(c[0],b[0]);a[0]=Math.max(d[0],a[0]);g[0]=h[0]=x+rBtm-base;d[1]=g[1]=y}path.length=0;path.push(["M",...a],["L",...b],["A",rTop,rTop,0,0,1,...c],["L",...d],["A",rBtm,rBtm,0,0,1,...e],["L",...f],["A",rBtm,rBtm,0,0,1,...g],["L",...h],["A",rTop,rTop,0,0,1,...a],["Z"]);return path}const BorderRadius={compose:compose,optionsToObject:optionsToObject};const Extensions_BorderRadius=BorderRadius;"";var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);const{composed,noop:FunnelSeries_noop}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{column:ColumnSeries,pie:PieSeries}=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes;const{addEvent:FunnelSeries_addEvent,correctFloat,extend:FunnelSeries_extend,fireEvent,isArray,merge:FunnelSeries_merge,pick,pushUnique,relativeLength:FunnelSeries_relativeLength,splat}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const baseAlignDataLabel=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().series.prototype.alignDataLabel;function getLength(length,relativeTo){return/%$/.test(length)?relativeTo*parseInt(length,10)/100:parseInt(length,10)}class FunnelSeries extends PieSeries{alignDataLabel(point,dataLabel,options,alignTo,isNew){const series=point.series,reversed=series.options.reversed,dlBox=point.dlBox||point.shapeArgs,{align,padding=0,verticalAlign}=options,inside=((series.options||{}).dataLabels||{}).inside,centerY=series.center[1],plotY=point.plotY||0,pointPlotY=reversed?2*centerY-plotY:plotY,dataLabelHeight=dataLabel.height??dataLabel.getBBox().height,widthAtLabel=series.getWidthAt(pointPlotY-dlBox.height/2+dataLabelHeight),offset=verticalAlign==="middle"?(dlBox.topWidth-dlBox.bottomWidth)/4:(widthAtLabel-dlBox.bottomWidth)/2;let y=dlBox.y,x=dlBox.x;if(verticalAlign==="middle"){y=dlBox.y-dlBox.height/2+dataLabelHeight/2}else if(verticalAlign==="top"){y=dlBox.y-dlBox.height+dataLabelHeight+padding}if(verticalAlign==="top"&&!reversed||verticalAlign==="bottom"&&reversed||verticalAlign==="middle"){if(align==="right"){x=dlBox.x-padding+offset}else if(align==="left"){x=dlBox.x+padding-offset}}alignTo={x:x,y:reversed?y-dlBox.height:y,width:dlBox.bottomWidth,height:dlBox.height};options.verticalAlign="bottom";if(inside){options.distance=void 0}if(inside&&point.visible){baseAlignDataLabel.call(series,point,dataLabel,options,alignTo,isNew)}if(inside){if(!point.visible&&point.dataLabel){point.dataLabel.placed=false}if(point.contrastColor){dataLabel.css({color:point.contrastColor})}}}drawDataLabels(){(splat(this.options.dataLabels||{})[0].inside?ColumnSeries:PieSeries).prototype.drawDataLabels.call(this)}getDataLabelPosition(point,distance){const y=point.plotY||0,sign=point.half?1:-1,x=this.getX(y,!!point.half,point);return{distance:distance,natural:{x:0,y:y},computed:{},alignment:point.half?"right":"left",connectorPosition:{breakAt:{x:x+(distance-5)*sign,y:y},touchingSliceAt:{x:x+distance*sign,y:y}}}}translate(){const series=this,chart=series.chart,options=series.options,reversed=options.reversed,ignoreHiddenPoint=options.ignoreHiddenPoint,borderRadiusObject=Extensions_BorderRadius.optionsToObject(options.borderRadius),plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,center=options.center,centerX=getLength(center[0],plotWidth),centerY=getLength(center[1],plotHeight),width=getLength(options.width,plotWidth),height=getLength(options.height,plotHeight),neckWidth=getLength(options.neckWidth,plotWidth),neckHeight=getLength(options.neckHeight,plotHeight),neckY=centerY-height/2+height-neckHeight,points=series.points,borderRadius=FunnelSeries_relativeLength(borderRadiusObject.radius,width),radiusScope=borderRadiusObject.scope,half=options.dataLabels.position==="left"?1:0,roundingFactors=angle=>{const tan=Math.tan(angle/2),cosA=Math.cos(alpha),sinA=Math.sin(alpha);let r=borderRadius,t=r/tan,k=Math.tan((Math.PI-angle)/3.2104);if(t>maxT){t=maxT;r=t*tan}k*=r;return{dx:[t*cosA,(t-k)*cosA,t-k,t],dy:[t*sinA,(t-k)*sinA,t-k,t].map(i=>reversed?-i:i)}};let sum=0,cumulative=0,tempWidth,path,fraction,alpha,maxT,x1,y1,x2,x3,y3,x4,y5;series.getWidthAt=function(y){const top=centerY-height/2;return y>neckY||height===neckHeight?neckWidth:neckWidth+(width-neckWidth)*(1-(y-top)/(height-neckHeight))};series.getX=function(y,half,point){return centerX+(half?-1:1)*(series.getWidthAt(reversed?2*centerY-y:y)/2+(point.dataLabel?.dataLabelPosition?.distance??FunnelSeries_relativeLength(this.options.dataLabels?.distance||0,width)))};series.center=[centerX,centerY,height];series.centerX=centerX;for(const point of points){if(point.y&&point.isValid()&&(!ignoreHiddenPoint||point.visible!==false)){sum+=point.y}}for(const point of points){y5=null;fraction=sum?point.y/sum:0;y1=centerY-height/2+cumulative*height;y3=y1+fraction*height;tempWidth=series.getWidthAt(y1);x1=centerX-tempWidth/2;x2=x1+tempWidth;tempWidth=series.getWidthAt(y3);x3=centerX-tempWidth/2;x4=x3+tempWidth;if(correctFloat(y1)>=neckY){x1=x3=centerX-neckWidth/2;x2=x4=centerX+neckWidth/2}else if(y3>neckY){y5=y3;tempWidth=series.getWidthAt(neckY);x3=centerX-tempWidth/2;x4=x3+tempWidth;y3=neckY}if(reversed){y1=2*centerY-y1;y3=2*centerY-y3;if(y5!==null){y5=2*centerY-y5}}if(borderRadius&&(radiusScope==="point"||point.index===0||point.index===points.length-1||y5!==null)){const h=Math.abs(y3-y1),xSide=x2-x4,lBase=x4-x3,lSide=Math.sqrt(xSide*xSide+h*h);alpha=Math.atan(xSide!==0?h/xSide:Infinity);maxT=lSide/2;if(y5!==null){maxT=Math.min(maxT,Math.abs(y5-y3)/2)}if(lBase>=1){maxT=Math.min(maxT,lBase/2)}let f=roundingFactors(alpha);if(radiusScope==="stack"&&point.index!==0){path=[["M",x1,y1],["L",x2,y1]]}else{path=[["M",x1+f.dx[0],y1+f.dy[0]],["C",x1+f.dx[1],y1+f.dy[1],x1+f.dx[2],y1,x1+f.dx[3],y1],["L",x2-f.dx[3],y1],["C",x2-f.dx[2],y1,x2-f.dx[1],y1+f.dy[1],x2-f.dx[0],y1+f.dy[0]]]}if(y5!==null){const fr=roundingFactors(Math.PI/2);f=roundingFactors(Math.PI/2+alpha);path.push(["L",x4+f.dx[0],y3-f.dy[0]],["C",x4+f.dx[1],y3-f.dy[1],x4,y3+f.dy[2],x4,y3+f.dy[3]]);if(radiusScope==="stack"&&point.index!==points.length-1){path.push(["L",x4,y5],["L",x3,y5])}else{path.push(["L",x4,y5-fr.dy[3]],["C",x4,y5-fr.dy[2],x4-fr.dx[2],y5,x4-fr.dx[3],y5],["L",x3+fr.dx[3],y5],["C",x3+fr.dx[2],y5,x3,y5-fr.dy[2],x3,y5-fr.dy[3]])}path.push(["L",x3,y3+f.dy[3]],["C",x3,y3+f.dy[2],x3-f.dx[1],y3-f.dy[1],x3-f.dx[0],y3-f.dy[0]])}else if(lBase>=1){f=roundingFactors(Math.PI-alpha);if(radiusScope==="stack"&&point.index===0){path.push(["L",x4,y3],["L",x3,y3])}else{path.push(["L",x4+f.dx[0],y3-f.dy[0]],["C",x4+f.dx[1],y3-f.dy[1],x4-f.dx[2],y3,x4-f.dx[3],y3],["L",x3+f.dx[3],y3],["C",x3+f.dx[2],y3,x3-f.dx[1],y3-f.dy[1],x3-f.dx[0],y3-f.dy[0]])}}else{f=roundingFactors(Math.PI-alpha*2);path.push(["L",x3+f.dx[0],y3-f.dy[0]],["C",x3+f.dx[1],y3-f.dy[1],x3-f.dx[1],y3-f.dy[1],x3-f.dx[0],y3-f.dy[0]])}}else{path=[["M",x1,y1],["L",x2,y1],["L",x4,y3]];if(y5!==null){path.push(["L",x4,y5],["L",x3,y5])}path.push(["L",x3,y3])}path.push(["Z"]);point.shapeType="path";point.shapeArgs={d:path};point.percentage=fraction*100;point.plotX=centerX;point.plotY=(y1+(y5||y3))/2;point.tooltipPos=[centerX,point.plotY];point.dlBox={x:x3,y:y1,topWidth:x2-x1,bottomWidth:x4-x3,height:Math.abs(pick(y5,y3)-y1),width:NaN};point.slice=FunnelSeries_noop;point.half=half;if(point.isValid()&&(!ignoreHiddenPoint||point.visible!==false)){cumulative+=fraction}}fireEvent(series,"afterTranslate")}sortByAngle(points){points.sort((a,b)=>a.plotY-b.plotY)}}FunnelSeries.defaultOptions=FunnelSeries_merge(PieSeries.defaultOptions,Funnel_FunnelSeriesDefaults);FunnelSeries_extend(FunnelSeries.prototype,{animate:FunnelSeries_noop});(function(FunnelSeries){function compose(ChartClass){if(pushUnique(composed,"FunnelSeries")){FunnelSeries_addEvent(ChartClass,"afterHideAllOverlappingLabels",onChartAfterHideAllOverlappingLabels)}}FunnelSeries.compose=compose;function onChartAfterHideAllOverlappingLabels(){for(const series of this.series){let dataLabelsOptions=series.options&&series.options.dataLabels;if(isArray(dataLabelsOptions)){dataLabelsOptions=dataLabelsOptions[0]}if(series.is("pie")&&series.placeDataLabels&&dataLabelsOptions&&!dataLabelsOptions.inside){series.placeDataLabels()}}}})(FunnelSeries||(FunnelSeries={}));highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("funnel",FunnelSeries);const Funnel_FunnelSeries=FunnelSeries;const PyramidSeriesDefaults={neckHeight:"0%",neckWidth:"0%",reversed:true};"";const Pyramid_PyramidSeriesDefaults=PyramidSeriesDefaults;const{merge:PyramidSeries_merge}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();class PyramidSeries extends Funnel_FunnelSeries{}PyramidSeries.defaultOptions=PyramidSeries_merge(Funnel_FunnelSeries.defaultOptions,Pyramid_PyramidSeriesDefaults);highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("pyramid",PyramidSeries);const Pyramid_PyramidSeries=null&&PyramidSeries;const G=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();Funnel_FunnelSeries.compose(G.Chart);const funnel_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});