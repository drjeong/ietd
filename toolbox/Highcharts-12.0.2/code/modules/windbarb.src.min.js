(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(root["_Highcharts"],root["_Highcharts"]["dataGrouping"]["approximations"],root["_Highcharts"]["Series"]["types"]["column"],root["_Highcharts"]["Series"],root["_Highcharts"]["SeriesRegistry"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/windbarb",["highcharts/highcharts"],function(amd1){return factory(amd1,amd1["dataGrouping"],["approximations"],amd1["Series"],["types"],["column"],amd1["Series"],amd1["SeriesRegistry"])});else if(typeof exports==="object")exports["highcharts/modules/windbarb"]=factory(root["_Highcharts"],root["_Highcharts"]["dataGrouping"]["approximations"],root["_Highcharts"]["Series"]["types"]["column"],root["_Highcharts"]["Series"],root["_Highcharts"]["SeriesRegistry"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["dataGrouping"]["approximations"],root["Highcharts"]["Series"]["types"]["column"],root["Highcharts"]["Series"],root["Highcharts"]["SeriesRegistry"])})(typeof window==="undefined"?this:window,(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__956__,__WEBPACK_EXTERNAL_MODULE__448__,__WEBPACK_EXTERNAL_MODULE__820__,__WEBPACK_EXTERNAL_MODULE__512__)=>{return(()=>{"use strict";var __webpack_modules__={448:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__448__},820:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__820__},512:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__512__},956:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__956__},944:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:()=>windbarb_src});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_dataGrouping_approximations_commonjs_highcharts_dataGrouping_approximations_commonjs2_highcharts_dataGrouping_approximations_root_Highcharts_dataGrouping_approximations_=__webpack_require__(956);var highcharts_dataGrouping_approximations_commonjs_highcharts_dataGrouping_approximations_commonjs2_highcharts_dataGrouping_approximations_root_Highcharts_dataGrouping_approximations_default=__webpack_require__.n(highcharts_dataGrouping_approximations_commonjs_highcharts_dataGrouping_approximations_commonjs2_highcharts_dataGrouping_approximations_root_Highcharts_dataGrouping_approximations_);var highcharts_Series_types_column_commonjs_highcharts_Series_types_column_commonjs2_highcharts_Series_types_column_root_Highcharts_Series_types_column_=__webpack_require__(448);var highcharts_Series_types_column_commonjs_highcharts_Series_types_column_commonjs2_highcharts_Series_types_column_root_Highcharts_Series_types_column_default=__webpack_require__.n(highcharts_Series_types_column_commonjs_highcharts_Series_types_column_commonjs2_highcharts_Series_types_column_root_Highcharts_Series_types_column_);var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_=__webpack_require__(820);var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default=__webpack_require__.n(highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_);const{composed}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{prototype:columnProto}=highcharts_Series_types_column_commonjs_highcharts_Series_types_column_commonjs2_highcharts_Series_types_column_root_Highcharts_Series_types_column_default();const{prototype:seriesProto}=highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default();const{defined,pushUnique,stableSort}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();var OnSeriesComposition;(function(OnSeriesComposition){function compose(SeriesClass){if(pushUnique(composed,"OnSeries")){const seriesProto=SeriesClass.prototype;seriesProto.getPlotBox=getPlotBox;seriesProto.translate=translate}return SeriesClass}OnSeriesComposition.compose=compose;function getPlotBox(name){return seriesProto.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,name)}OnSeriesComposition.getPlotBox=getPlotBox;function translate(){columnProto.translate.apply(this);const series=this,options=series.options,chart=series.chart,points=series.points,optionsOnSeries=options.onSeries,onSeries=optionsOnSeries&&chart.get(optionsOnSeries),step=onSeries&&onSeries.options.step,onData=onSeries&&onSeries.points,inverted=chart.inverted,xAxis=series.xAxis,yAxis=series.yAxis;let cursor=points.length-1,point,lastPoint,onKey=options.onKey||"y",i=onData&&onData.length,xOffset=0,leftPoint,lastX,rightPoint,currentDataGrouping,distanceRatio;if(onSeries&&onSeries.visible&&i){xOffset=(onSeries.pointXOffset||0)+(onSeries.barW||0)/2;currentDataGrouping=onSeries.currentDataGrouping;lastX=onData[i-1].x+(currentDataGrouping?currentDataGrouping.totalRange:0);stableSort(points,(a,b)=>a.x-b.x);onKey="plot"+onKey[0].toUpperCase()+onKey.substr(1);while(i--&&points[cursor]){leftPoint=onData[i];point=points[cursor];point.y=leftPoint.y;if(leftPoint.x<=point.x&&typeof leftPoint[onKey]!=="undefined"){if(point.x<=lastX){point.plotY=leftPoint[onKey];if(leftPoint.x<point.x&&!step){rightPoint=onData[i+1];if(rightPoint&&typeof rightPoint[onKey]!=="undefined"){if(defined(point.plotX)&&onSeries.is("spline")){leftPoint=leftPoint;rightPoint=rightPoint;const p0=[leftPoint.plotX||0,leftPoint.plotY||0],p3=[rightPoint.plotX||0,rightPoint.plotY||0],p1=leftPoint.controlPoints?.high||p0,p2=rightPoint.controlPoints?.low||p3,pixelThreshold=.25,maxIterations=100,calculateCoord=(t,key)=>Math.pow(1-t,3)*p0[key]+3*(1-t)*(1-t)*t*p1[key]+3*(1-t)*t*t*p2[key]+t*t*t*p3[key];let tMin=0,tMax=1,t;for(let i=0;i<maxIterations;i++){const tMid=(tMin+tMax)/2;const xMid=calculateCoord(tMid,0);if(xMid===null){break}if(Math.abs(xMid-point.plotX)<pixelThreshold){t=tMid;break}if(xMid<point.plotX){tMin=tMid}else{tMax=tMid}}if(defined(t)){point.plotY=calculateCoord(t,1);point.y=yAxis.toValue(point.plotY,true)}}else{distanceRatio=(point.x-leftPoint.x)/(rightPoint.x-leftPoint.x);point.plotY+=distanceRatio*(rightPoint[onKey]-leftPoint[onKey]);point.y+=distanceRatio*(rightPoint.y-leftPoint.y)}}}}cursor--;i++;if(cursor<0){break}}}}points.forEach((point,i)=>{let stackIndex;point.plotX+=xOffset;if(typeof point.plotY==="undefined"||inverted){if(point.plotX>=0&&point.plotX<=xAxis.len){if(inverted){point.plotY=xAxis.translate(point.x,0,1,0,1);point.plotX=defined(point.y)?yAxis.translate(point.y,0,0,0,1):0}else{point.plotY=(xAxis.opposite?0:series.yAxis.len)+xAxis.offset}}else{point.shapeArgs={}}}lastPoint=points[i-1];if(lastPoint&&lastPoint.plotX===point.plotX){if(typeof lastPoint.stackIndex==="undefined"){lastPoint.stackIndex=0}stackIndex=lastPoint.stackIndex+1}point.stackIndex=stackIndex});this.onSeries=onSeries}OnSeriesComposition.translate=translate})(OnSeriesComposition||(OnSeriesComposition={}));const Series_OnSeriesComposition=OnSeriesComposition;var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);const{isNumber}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();class WindbarbPoint extends highcharts_Series_types_column_commonjs_highcharts_Series_types_column_commonjs2_highcharts_Series_types_column_root_Highcharts_Series_types_column_default().prototype.pointClass{isValid(){return isNumber(this.value)&&this.value>=0}}const Windbarb_WindbarbPoint=WindbarbPoint;const WindbarbSeriesDefaults={dataGrouping:{enabled:true,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0};"";const Windbarb_WindbarbSeriesDefaults=WindbarbSeriesDefaults;const{animObject}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{column:ColumnSeries}=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes;const{extend,merge,pick}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();function registerApproximation(){if(!highcharts_dataGrouping_approximations_commonjs_highcharts_dataGrouping_approximations_commonjs2_highcharts_dataGrouping_approximations_root_Highcharts_dataGrouping_approximations_default().windbarb){highcharts_dataGrouping_approximations_commonjs_highcharts_dataGrouping_approximations_commonjs2_highcharts_dataGrouping_approximations_root_Highcharts_dataGrouping_approximations_default().windbarb=(values,directions)=>{let vectorX=0,vectorY=0;for(let i=0,iEnd=values.length;i<iEnd;i++){vectorX+=values[i]*Math.cos(directions[i]*highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad);vectorY+=values[i]*Math.sin(directions[i]*highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad)}return[values.reduce((sum,value)=>sum+value,0)/values.length,Math.atan2(vectorY,vectorX)/highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad]}}}class WindbarbSeries extends ColumnSeries{init(chart,options){super.init(chart,options)}pointAttribs(point,state){const options=this.options;let stroke=point.color||this.color,strokeWidth=this.options.lineWidth;if(state){stroke=options.states[state].color||stroke;strokeWidth=(options.states[state].lineWidth||strokeWidth)+(options.states[state].lineWidthPlus||0)}return{stroke:stroke,"stroke-width":strokeWidth}}windArrow(point){const level=point.beaufortLevel,u=this.options.vectorLength/20;let knots=point.value*1.943844,barbs,pos=-10;if(point.isNull){return[]}if(level===0){return this.chart.renderer.symbols.circle(-10*u,-10*u,20*u,20*u)}const path=[["M",0,7*u],["L",-1.5*u,7*u],["L",0,10*u],["L",1.5*u,7*u],["L",0,7*u],["L",0,-10*u]];barbs=(knots-knots%50)/50;if(barbs>0){while(barbs--){path.push(pos===-10?["L",0,pos*u]:["M",0,pos*u],["L",5*u,pos*u+2],["L",0,pos*u+4]);knots-=50;pos+=7}}barbs=(knots-knots%10)/10;if(barbs>0){while(barbs--){path.push(pos===-10?["L",0,pos*u]:["M",0,pos*u],["L",7*u,pos*u]);knots-=10;pos+=3}}barbs=(knots-knots%5)/5;if(barbs>0){while(barbs--){path.push(pos===-10?["L",0,pos*u]:["M",0,pos*u],["L",4*u,pos*u]);knots-=5;pos+=3}}return path}drawPoints(){const chart=this.chart,yAxis=this.yAxis,inverted=chart.inverted,shapeOffset=this.options.vectorLength/2;for(const point of this.points){const plotX=point.plotX,plotY=point.plotY;if(this.options.clip===false||chart.isInsidePlot(plotX,0)){if(!point.graphic){point.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point "+"highcharts-color-"+pick(point.colorIndex,point.series.colorIndex))}point.graphic.attr({d:this.windArrow(point),translateX:plotX+this.options.xOffset,translateY:plotY+this.options.yOffset,rotation:point.direction});if(!this.chart.styledMode){point.graphic.attr(this.pointAttribs(point))}}else if(point.graphic){point.graphic=point.graphic.destroy()}point.tooltipPos=[plotX+this.options.xOffset+(inverted&&!this.onSeries?shapeOffset:0),plotY+this.options.yOffset-(inverted?0:shapeOffset+yAxis.pos-chart.plotTop)]}}animate(init){if(init){this.markerGroup.attr({opacity:.01})}else{this.markerGroup.animate({opacity:1},animObject(this.options.animation))}}markerAttribs(){return{}}getExtremes(){return{}}shouldShowTooltip(plotX,plotY,options={}){options.ignoreX=this.chart.inverted;options.ignoreY=!options.ignoreX;return super.shouldShowTooltip(plotX,plotY,options)}}WindbarbSeries.defaultOptions=merge(ColumnSeries.defaultOptions,Windbarb_WindbarbSeriesDefaults);Series_OnSeriesComposition.compose(WindbarbSeries);extend(WindbarbSeries.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],invertible:false,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:Windbarb_WindbarbPoint,trackerGroups:["markerGroup"],translate:function(){const beaufortFloor=this.beaufortFloor,beaufortName=this.beaufortName;Series_OnSeriesComposition.translate.call(this);for(const point of this.points){let level=0;for(;level<beaufortFloor.length;level++){if(beaufortFloor[level]>point.value){break}}point.beaufortLevel=level-1;point.beaufort=beaufortName[level-1]}}});highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("windbarb",WindbarbSeries);registerApproximation();const Windbarb_WindbarbSeries=null&&WindbarbSeries;const windbarb_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});