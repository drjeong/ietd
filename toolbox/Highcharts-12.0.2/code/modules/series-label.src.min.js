(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(root["_Highcharts"],root["_Highcharts"]["Templating"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/series-label",["highcharts/highcharts"],function(amd1){return factory(amd1,amd1["Templating"])});else if(typeof exports==="object")exports["highcharts/modules/series-label"]=factory(root["_Highcharts"],root["_Highcharts"]["Templating"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["Templating"])})(typeof window==="undefined"?this:window,(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__984__)=>{return(()=>{"use strict";var __webpack_modules__={984:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__984__},944:module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:()=>series_label_src});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_=__webpack_require__(984);var highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_default=__webpack_require__.n(highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_);const SeriesLabelDefaults={enabled:true,connectorAllowed:false,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:false,boxesToAvoid:[]};const SeriesLabel_SeriesLabelDefaults=SeriesLabelDefaults;function ccw(x1,y1,x2,y2,x3,y3){const cw=(y3-y1)*(x2-x1)-(y2-y1)*(x3-x1);return cw>0?true:!(cw<0)}function intersectLine(x1,y1,x2,y2,x3,y3,x4,y4){return ccw(x1,y1,x3,y3,x4,y4)!==ccw(x2,y2,x3,y3,x4,y4)&&ccw(x1,y1,x2,y2,x3,y3)!==ccw(x1,y1,x2,y2,x4,y4)}function boxIntersectLine(x,y,w,h,x1,y1,x2,y2){return intersectLine(x,y,x+w,y,x1,y1,x2,y2)||intersectLine(x+w,y,x+w,y+h,x1,y1,x2,y2)||intersectLine(x,y+h,x+w,y+h,x1,y1,x2,y2)||intersectLine(x,y,x,y+h,x1,y1,x2,y2)}function intersectRect(r1,r2){return!(r2.left>r1.right||r2.right<r1.left||r2.top>r1.bottom||r2.bottom<r1.top)}const SeriesLabelUtilities={boxIntersectLine:boxIntersectLine,intersectRect:intersectRect};const SeriesLabel_SeriesLabelUtilities=SeriesLabelUtilities;const{animObject}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{format}=highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_default();const{setOptions}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{composed}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const{boxIntersectLine:SeriesLabel_boxIntersectLine,intersectRect:SeriesLabel_intersectRect}=SeriesLabel_SeriesLabelUtilities;const{addEvent,extend,fireEvent,isNumber,pick,pushUnique,syncTimeout}=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();const labelDistance=3;function checkClearPoint(series,x,y,bBox,checkDistance){const chart=series.chart,seriesLabelOptions=series.options.label||{},onArea=pick(seriesLabelOptions.onArea,!!series.area),findDistanceToOthers=onArea||seriesLabelOptions.connectorAllowed,leastDistance=16,boxesToAvoid=chart.boxesToAvoid;let distToOthersSquared=Number.MAX_VALUE,distToPointSquared=Number.MAX_VALUE,dist,connectorPoint,withinRange,xDist,yDist,i,j;function getWeight(distToOthersSquared,distToPointSquared){return distToOthersSquared-distToPointSquared}for(i=0;boxesToAvoid&&i<boxesToAvoid.length;i+=1){if(SeriesLabel_intersectRect(boxesToAvoid[i],{left:x,right:x+bBox.width,top:y,bottom:y+bBox.height})){return false}}for(i=0;i<chart.series.length;i+=1){const serie=chart.series[i],points=serie.interpolatedPoints&&[...serie.interpolatedPoints];if(serie.visible&&points){const stepY=chart.plotHeight/10;for(let chartY=chart.plotTop;chartY<=chart.plotTop+chart.plotHeight;chartY+=stepY){points.unshift({chartX:chart.plotLeft,chartY:chartY});points.push({chartX:chart.plotLeft+chart.plotWidth,chartY:chartY})}for(j=1;j<points.length;j+=1){if(points[j].chartX>=x-leastDistance&&points[j-1].chartX<=x+bBox.width+leastDistance){if(SeriesLabel_boxIntersectLine(x,y,bBox.width,bBox.height,points[j-1].chartX,points[j-1].chartY,points[j].chartX,points[j].chartY)){return false}if(series===serie&&!withinRange&&checkDistance){withinRange=SeriesLabel_boxIntersectLine(x-leastDistance,y-leastDistance,bBox.width+2*leastDistance,bBox.height+2*leastDistance,points[j-1].chartX,points[j-1].chartY,points[j].chartX,points[j].chartY)}}if((findDistanceToOthers||withinRange)&&(series!==serie||onArea)){xDist=x+bBox.width/2-points[j].chartX;yDist=y+bBox.height/2-points[j].chartY;distToOthersSquared=Math.min(distToOthersSquared,xDist*xDist+yDist*yDist)}}if(!onArea&&findDistanceToOthers&&series===serie&&(checkDistance&&!withinRange||distToOthersSquared<Math.pow(seriesLabelOptions.connectorNeighbourDistance||1,2))){for(j=1;j<points.length;j+=1){dist=Math.min(Math.pow(x+bBox.width/2-points[j].chartX,2)+Math.pow(y+bBox.height/2-points[j].chartY,2),Math.pow(x-points[j].chartX,2)+Math.pow(y-points[j].chartY,2),Math.pow(x+bBox.width-points[j].chartX,2)+Math.pow(y-points[j].chartY,2),Math.pow(x+bBox.width-points[j].chartX,2)+Math.pow(y+bBox.height-points[j].chartY,2),Math.pow(x-points[j].chartX,2)+Math.pow(y+bBox.height-points[j].chartY,2));if(dist<distToPointSquared){distToPointSquared=dist;connectorPoint=points[j]}}withinRange=true}}}return!checkDistance||withinRange?{x:x,y:y,weight:getWeight(distToOthersSquared,connectorPoint?distToPointSquared:0),connectorPoint:connectorPoint}:false}function compose(ChartClass,SVGRendererClass){if(pushUnique(composed,"SeriesLabel")){addEvent(ChartClass,"load",onChartRedraw);addEvent(ChartClass,"redraw",onChartRedraw);SVGRendererClass.prototype.symbols.connector=symbolConnector;setOptions({plotOptions:{series:{label:SeriesLabel_SeriesLabelDefaults}}})}}function drawSeriesLabels(chart){chart.boxesToAvoid=[];const labelSeries=chart.labelSeries||[],boxesToAvoid=chart.boxesToAvoid;chart.series.forEach(s=>(s.points||[]).forEach(p=>(p.dataLabels||[]).forEach(label=>{const{width,height}=label.getBBox(),left=(label.translateX||0)+(s.xAxis?s.xAxis.pos:s.chart.plotLeft),top=(label.translateY||0)+(s.yAxis?s.yAxis.pos:s.chart.plotTop);boxesToAvoid.push({left:left,top:top,right:left+width,bottom:top+height})})));labelSeries.forEach(function(series){const seriesLabelOptions=series.options.label||{};series.interpolatedPoints=getPointsOnGraph(series);boxesToAvoid.push(...seriesLabelOptions.boxesToAvoid||[])});chart.series.forEach(function(series){const labelOptions=series.options.label;if(!labelOptions||!series.xAxis&&!series.yAxis){return}const colorClass="highcharts-color-"+pick(series.colorIndex,"none"),isNew=!series.labelBySeries,minFontSize=labelOptions.minFontSize,maxFontSize=labelOptions.maxFontSize,inverted=chart.inverted,paneLeft=inverted?series.yAxis.pos:series.xAxis.pos,paneTop=inverted?series.xAxis.pos:series.yAxis.pos,paneWidth=chart.inverted?series.yAxis.len:series.xAxis.len,paneHeight=chart.inverted?series.xAxis.len:series.yAxis.len,points=series.interpolatedPoints,onArea=pick(labelOptions.onArea,!!series.area),results=[],xData=series.getColumn("x");let bBox,x,y,clearPoint,i,best,label=series.labelBySeries,dataExtremes,areaMin,areaMax;if(onArea&&!inverted){dataExtremes=[series.xAxis.toPixels(xData[0]),series.xAxis.toPixels(xData[xData.length-1])];areaMin=Math.min.apply(Math,dataExtremes);areaMax=Math.max.apply(Math,dataExtremes)}function insidePane(x,y,bBox){const leftBound=Math.max(paneLeft,pick(areaMin,-Infinity)),rightBound=Math.min(paneLeft+paneWidth,pick(areaMax,Infinity));return x>leftBound&&x<=rightBound-bBox.width&&y>=paneTop&&y<=paneTop+paneHeight-bBox.height}function destroyLabel(){if(label){series.labelBySeries=label.destroy()}}if(series.visible&&!series.boosted&&points){if(!label){let labelText=series.name;if(typeof labelOptions.format==="string"){labelText=format(labelOptions.format,series,chart)}else if(labelOptions.formatter){labelText=labelOptions.formatter.call(series)}series.labelBySeries=label=chart.renderer.label(labelText,0,0,"connector",0,0,labelOptions.useHTML).addClass("highcharts-series-label "+"highcharts-series-label-"+series.index+" "+(series.options.className||"")+" "+colorClass);if(!chart.renderer.styledMode){const color=typeof series.color==="string"?series.color:"#666666";label.css(extend({color:onArea?chart.renderer.getContrast(color):color},labelOptions.style||{}));label.attr({opacity:chart.renderer.forExport?1:0,stroke:series.color,"stroke-width":1})}if(minFontSize&&maxFontSize){label.css({fontSize:labelFontSize(series,minFontSize,maxFontSize)})}label.attr({padding:0,zIndex:3}).add()}bBox=label.getBBox();bBox.width=Math.round(bBox.width);for(i=points.length-1;i>0;i-=1){if(onArea){x=(points[i].chartCenterX??points[i].chartX)-bBox.width/2;y=(points[i].chartCenterY??points[i].chartY)-bBox.height/2;if(insidePane(x,y,bBox)){best=checkClearPoint(series,x,y,bBox)}if(best){results.push(best)}}else{x=points[i].chartX+labelDistance;y=points[i].chartY-bBox.height-labelDistance;if(insidePane(x,y,bBox)){best=checkClearPoint(series,x,y,bBox,true)}if(best){results.push(best)}x=points[i].chartX+labelDistance;y=points[i].chartY+labelDistance;if(insidePane(x,y,bBox)){best=checkClearPoint(series,x,y,bBox,true)}if(best){results.push(best)}x=points[i].chartX-bBox.width-labelDistance;y=points[i].chartY+labelDistance;if(insidePane(x,y,bBox)){best=checkClearPoint(series,x,y,bBox,true)}if(best){results.push(best)}x=points[i].chartX-bBox.width-labelDistance;y=points[i].chartY-bBox.height-labelDistance;if(insidePane(x,y,bBox)){best=checkClearPoint(series,x,y,bBox,true)}if(best){results.push(best)}}}if(labelOptions.connectorAllowed&&!results.length&&!onArea){for(x=paneLeft+paneWidth-bBox.width;x>=paneLeft;x-=16){for(y=paneTop;y<paneTop+paneHeight-bBox.height;y+=16){clearPoint=checkClearPoint(series,x,y,bBox,true);if(clearPoint){results.push(clearPoint)}}}}if(results.length){results.sort((a,b)=>b.weight-a.weight);best=results[0];(chart.boxesToAvoid||[]).push({left:best.x,right:best.x+bBox.width,top:best.y,bottom:best.y+bBox.height});const dist=Math.sqrt(Math.pow(Math.abs(best.x-(label.x||0)),2)+Math.pow(Math.abs(best.y-(label.y||0)),2));if(dist&&series.labelBySeries){let attr={opacity:chart.renderer.forExport?1:0,x:best.x,y:best.y},anim={opacity:1};if(dist<=10){anim={x:attr.x,y:attr.y};attr={}}let animationOptions;if(isNew){animationOptions=animObject(series.options.animation);animationOptions.duration*=.2}series.labelBySeries.attr(extend(attr,{anchorX:best.connectorPoint&&(best.connectorPoint.plotX||0)+paneLeft,anchorY:best.connectorPoint&&(best.connectorPoint.plotY||0)+paneTop})).animate(anim,animationOptions);series.options.kdNow=true;series.buildKDTree();const closest=series.searchPoint({chartX:best.x,chartY:best.y},true);if(closest){label.closest=[closest,best.x-(closest.plotX||0),best.y-(closest.plotY||0)]}}}else{destroyLabel()}}else{destroyLabel()}});fireEvent(chart,"afterDrawSeriesLabels")}function getPointsOnGraph(series){if(!series.xAxis&&!series.yAxis){return}const distance=16,points=series.points,interpolated=[],graph=series.graph||series.area,node=graph&&graph.element,inverted=series.chart.inverted,xAxis=series.xAxis,yAxis=series.yAxis,paneLeft=inverted?yAxis.pos:xAxis.pos,paneTop=inverted?xAxis.pos:yAxis.pos,paneHeight=inverted?xAxis.len:yAxis.len,paneWidth=inverted?yAxis.len:xAxis.len,seriesLabelOptions=series.options.label||{},onArea=pick(seriesLabelOptions.onArea,!!series.area),translatedThreshold=yAxis.getThreshold(series.options.threshold),grid={},chartCenterKey=inverted?"chartCenterX":"chartCenterY";let i,deltaX,deltaY,delta,len,n,j;function pushDiscrete(point){const cellSize=8,key=Math.round((point.plotX||0)/cellSize)+","+Math.round((point.plotY||0)/cellSize);if(!grid[key]){grid[key]=1;interpolated.push(point)}}if(series.getPointSpline&&node&&node.getPointAtLength&&!onArea&&points.length<(series.chart.plotSizeX||0)/distance){const d=graph.toD&&graph.attr("d");if(graph.toD){graph.attr({d:graph.toD})}len=node.getTotalLength();for(i=0;i<len;i+=distance){const domPoint=node.getPointAtLength(i),plotX=inverted?paneWidth-domPoint.y:domPoint.x,plotY=inverted?paneHeight-domPoint.x:domPoint.y;pushDiscrete({chartX:paneLeft+plotX,chartY:paneTop+plotY,plotX:plotX,plotY:plotY})}if(d){graph.attr({d:d})}const point=points[points.length-1],pos=point.pos();pushDiscrete({chartX:paneLeft+(pos?.[0]||0),chartY:paneTop+(pos?.[1]||0)})}else{len=points.length;let last;for(i=0;i<len;i+=1){const point=points[i],[plotX,plotY]=point.pos()||[],{plotHigh}=point;if(isNumber(plotX)&&isNumber(plotY)){const ctlPoint={plotX:plotX,plotY:plotY,chartX:paneLeft+plotX,chartY:paneTop+plotY};if(onArea){if(plotHigh){ctlPoint.plotY=plotHigh;ctlPoint.chartY=paneTop+plotHigh}if(inverted){ctlPoint.chartCenterX=paneLeft+paneWidth-((plotHigh?plotHigh:point.plotY||0)+pick(point.yBottom,translatedThreshold))/2}else{ctlPoint.chartCenterY=paneTop+((plotHigh?plotHigh:plotY)+pick(point.yBottom,translatedThreshold))/2}}if(last){deltaX=Math.abs(ctlPoint.chartX-last.chartX);deltaY=Math.abs(ctlPoint.chartY-last.chartY);delta=Math.max(deltaX,deltaY);if(delta>distance&&delta<999){n=Math.ceil(delta/distance);for(j=1;j<n;j+=1){pushDiscrete({chartX:last.chartX+(ctlPoint.chartX-last.chartX)*(j/n),chartY:last.chartY+(ctlPoint.chartY-last.chartY)*(j/n),[chartCenterKey]:(last[chartCenterKey]||0)+((ctlPoint[chartCenterKey]||0)-(last[chartCenterKey]||0))*(j/n),plotX:(last.plotX||0)+(plotX-(last.plotX||0))*(j/n),plotY:(last.plotY||0)+(plotY-(last.plotY||0))*(j/n)})}}}pushDiscrete(ctlPoint);last=ctlPoint}}}return interpolated}function labelFontSize(series,minFontSize,maxFontSize){return minFontSize+(series.sum||0)/(series.chart.labelSeriesMaxSum||0)*(maxFontSize-minFontSize)+"px"}function onChartRedraw(e){if(this.renderer){const chart=this;let delay=animObject(chart.renderer.globalAnimation).duration;chart.labelSeries=[];chart.labelSeriesMaxSum=0;if(chart.seriesLabelTimer){highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clearTimeout(chart.seriesLabelTimer)}chart.series.forEach(function(series){const seriesLabelOptions=series.options.label||{},label=series.labelBySeries,closest=label&&label.closest,yData=series.getColumn("y");if(seriesLabelOptions.enabled&&series.visible&&(series.graph||series.area)&&!series.boosted&&chart.labelSeries){chart.labelSeries.push(series);if(seriesLabelOptions.minFontSize&&seriesLabelOptions.maxFontSize&&yData.length){series.sum=yData.reduce((pv,cv)=>(pv||0)+(cv||0),0);chart.labelSeriesMaxSum=Math.max(chart.labelSeriesMaxSum||0,series.sum||0)}if(e.type==="load"){delay=Math.max(delay,animObject(series.options.animation).duration)}if(closest){if(typeof closest[0].plotX!=="undefined"){label.animate({x:closest[0].plotX+closest[1],y:closest[0].plotY+closest[2]})}else{label.attr({opacity:0})}}}});chart.seriesLabelTimer=syncTimeout(function(){if(chart.series&&chart.labelSeries){drawSeriesLabels(chart)}},chart.renderer.forExport||!delay?0:delay)}}function symbolConnector(x,y,w,h,options){const anchorX=options&&options.anchorX,anchorY=options&&options.anchorY;let path,yOffset,lateral=w/2;if(isNumber(anchorX)&&isNumber(anchorY)){path=[["M",anchorX,anchorY]];yOffset=y-anchorY;if(yOffset<0){yOffset=-h-yOffset}if(yOffset<w){lateral=anchorX<x+w/2?yOffset:w-yOffset}if(anchorY>y+h){path.push(["L",x+lateral,y+h])}else if(anchorY<y){path.push(["L",x+lateral,y])}else if(anchorX<x){path.push(["L",x,y+h/2])}else if(anchorX>x+w){path.push(["L",x+w,y+h/2])}}return path||[]}const SeriesLabel={compose:compose};const SeriesLabel_SeriesLabel=SeriesLabel;"";const G=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();SeriesLabel_SeriesLabel.compose(G.Chart,G.SVGRenderer);const series_label_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});