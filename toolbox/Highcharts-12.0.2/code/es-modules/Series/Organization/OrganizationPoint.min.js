"use strict";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";const{sankey:{prototype:{pointClass:SankeyPointClass}}}=SeriesRegistry.seriesTypes;import U from"../../Core/Utilities.js";const{defined,find,pick}=U;function getOffset(node){let offset=node.linksFrom.length;node.linksFrom.forEach(link=>{if(link.id===link.toNode.linksTo[0].id){offset+=getOffset(link.toNode)}else{offset--}});return offset}class OrganizationPoint extends SankeyPointClass{constructor(series,options,x){super(series,options,x);if(!this.isNode){this.dataLabelOnNull=true;this.formatPrefix="link"}}getSum(){return 1}setNodeColumn(){super.setNodeColumn();const node=this,fromNode=node.getFromNode().fromNode;if(!defined(node.options.column)&&node.linksTo.length!==0&&fromNode&&fromNode.options.layout==="hanging"){let i=-1,link;node.options.layout=pick(node.options.layout,"hanging");node.hangsFrom=fromNode;find(fromNode.linksFrom,(link,index)=>{const found=link.toNode===node;if(found){i=index}return found});for(let j=0;j<fromNode.linksFrom.length;++j){link=fromNode.linksFrom[j];if(link.toNode.id===node.id){j=fromNode.linksFrom.length}else{i+=getOffset(link.toNode)}}node.column=(node.column||0)+i}}}export default OrganizationPoint;