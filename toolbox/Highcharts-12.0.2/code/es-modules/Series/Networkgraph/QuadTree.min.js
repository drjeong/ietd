"use strict";import QuadTreeNode from"./QuadTreeNode.js";class QuadTree{constructor(x,y,width,height){this.box={left:x,top:y,width:width,height:height};this.maxDepth=25;this.root=new QuadTreeNode(this.box);this.root.isInternal=true;this.root.isRoot=true;this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(node){node.updateMassAndCenter()})}insertNodes(points){for(const point of points){this.root.insert(point,this.maxDepth)}}visitNodeRecursive(node,beforeCallback,afterCallback){let goFurther;if(!node){node=this.root}if(node===this.root&&beforeCallback){goFurther=beforeCallback(node)}if(goFurther===false){return}for(const qtNode of node.nodes){if(qtNode.isInternal){if(beforeCallback){goFurther=beforeCallback(qtNode)}if(goFurther===false){continue}this.visitNodeRecursive(qtNode,beforeCallback,afterCallback)}else if(qtNode.body){if(beforeCallback){beforeCallback(qtNode.body)}}if(afterCallback){afterCallback(qtNode)}}if(node===this.root&&afterCallback){afterCallback(node)}}}export default QuadTree;