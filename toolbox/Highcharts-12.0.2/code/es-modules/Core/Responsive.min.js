"use strict";import U from"./Utilities.js";const{diffObjects,extend,find,merge,pick,uniqueKey}=U;var Responsive;(function(Responsive){function compose(ChartClass){const chartProto=ChartClass.prototype;if(!chartProto.matchResponsiveRule){extend(chartProto,{matchResponsiveRule:matchResponsiveRule,setResponsive:setResponsive})}return ChartClass}Responsive.compose=compose;function matchResponsiveRule(rule,matches){const condition=rule.condition,fn=condition.callback||function(){return this.chartWidth<=pick(condition.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(condition.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(condition.minWidth,0)&&this.chartHeight>=pick(condition.minHeight,0)};if(fn.call(this)){matches.push(rule._id)}}function setResponsive(redraw,reset){const options=this.options.responsive,currentResponsive=this.currentResponsive;let ruleIds=[],undoOptions;if(!reset&&options&&options.rules){options.rules.forEach(rule=>{if(typeof rule._id==="undefined"){rule._id=uniqueKey()}this.matchResponsiveRule(rule,ruleIds)},this)}const mergedOptions=merge(...ruleIds.map(ruleId=>find((options||{}).rules||[],rule=>rule._id===ruleId)).map(rule=>rule&&rule.chartOptions));mergedOptions.isResponsiveOptions=true;ruleIds=ruleIds.toString()||void 0;const currentRuleIds=currentResponsive&&currentResponsive.ruleIds;if(ruleIds!==currentRuleIds){if(currentResponsive){this.currentResponsive=void 0;this.updatingResponsive=true;this.update(currentResponsive.undoOptions,redraw,true);this.updatingResponsive=false}if(ruleIds){undoOptions=diffObjects(mergedOptions,this.options,true,this.collectionsWithUpdate);undoOptions.isResponsiveOptions=true;this.currentResponsive={ruleIds:ruleIds,mergedOptions:mergedOptions,undoOptions:undoOptions};if(!this.updatingResponsive){this.update(mergedOptions,redraw,true)}}else{this.currentResponsive=void 0}}}})(Responsive||(Responsive={}));export default Responsive;"";"";