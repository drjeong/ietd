"use strict";import H from"./Globals.js";const{charts,doc,win}=H;function error(code,stop,chart,params){const severity=stop?"Highcharts error":"Highcharts warning";if(code===32){code=`${severity}: Deprecated member`}const isCode=isNumber(code);let message=isCode?`${severity} #${code}: www.highcharts.com/errors/${code}/`:code.toString();const defaultHandler=function(){if(stop){throw new Error(message)}if(win.console&&error.messages.indexOf(message)===-1){console.warn(message)}};if(typeof params!=="undefined"){let additionalMessages="";if(isCode){message+="?"}objectEach(params,function(value,key){additionalMessages+=`\n - ${key}: ${value}`;if(isCode){message+=encodeURI(key)+"="+encodeURI(value)}});message+=additionalMessages}fireEvent(H,"displayError",{chart:chart,code:code,message:message,params:params},defaultHandler);error.messages.push(message)}(function(error){error.messages=[]})(error||(error={}));function merge(extendOrSource,...sources){let i,args=[extendOrSource,...sources],ret={};const doCopy=function(copy,original){if(typeof copy!=="object"){copy={}}objectEach(original,function(value,key){if(key==="__proto__"||key==="constructor"){return}if(isObject(value,true)&&!isClass(value)&&!isDOMElement(value)){copy[key]=doCopy(copy[key]||{},value)}else{copy[key]=original[key]}});return copy};if(extendOrSource===true){ret=args[1];args=Array.prototype.slice.call(args,2)}const len=args.length;for(i=0;i<len;i++){ret=doCopy(ret,args[i])}return ret}function clamp(value,min,max){return value>min?value<max?value:max:min}function crisp(value,lineWidth=0,inverted){const mod=lineWidth%2/2,inverter=inverted?-1:1;return(Math.round(value*inverter-mod)+mod)*inverter}function diffObjects(newer,older,keepOlder,collectionsWithUpdate){const ret={};function diff(newer,older,ret,depth){const keeper=keepOlder?older:newer;objectEach(newer,function(newerVal,key){if(!depth&&collectionsWithUpdate&&collectionsWithUpdate.indexOf(key)>-1&&older[key]){newerVal=splat(newerVal);ret[key]=[];for(let i=0;i<Math.max(newerVal.length,older[key].length);i++){if(older[key][i]){if(newerVal[i]===void 0){ret[key][i]=older[key][i]}else{ret[key][i]={};diff(newerVal[i],older[key][i],ret[key][i],depth+1)}}}}else if(isObject(newerVal,true)&&!newerVal.nodeType){ret[key]=isArray(newerVal)?[]:{};diff(newerVal,older[key]||{},ret[key],depth+1);if(Object.keys(ret[key]).length===0&&!(key==="colorAxis"&&depth===0)){delete ret[key]}}else if(newer[key]!==older[key]||key in newer&&!(key in older)){if(key!=="__proto__"&&key!=="constructor"){ret[key]=keeper[key]}}})}diff(newer,older,ret,0);return ret}function pInt(s,mag){return parseInt(s,mag||10)}function isString(s){return typeof s==="string"}function isArray(obj){const str=Object.prototype.toString.call(obj);return str==="[object Array]"||str==="[object Array Iterator]"}function isObject(obj,strict){return!!obj&&typeof obj==="object"&&(!strict||!isArray(obj))}function isDOMElement(obj){return isObject(obj)&&typeof obj.nodeType==="number"}function isClass(obj){const c=obj&&obj.constructor;return!!(isObject(obj,true)&&!isDOMElement(obj)&&(c&&c.name&&c.name!=="Object"))}function isNumber(n){return typeof n==="number"&&!isNaN(n)&&n<Infinity&&n>-Infinity}function erase(arr,item){let i=arr.length;while(i--){if(arr[i]===item){arr.splice(i,1);break}}}function insertItem(item,collection){const indexOption=item.options.index,length=collection.length;let i;for(i=item.options.isInternal?length:0;i<length+1;i++){if(!collection[i]||isNumber(indexOption)&&indexOption<pick(collection[i].options.index,collection[i]._i)||collection[i].options.isInternal){collection.splice(i,0,item);break}}return i}function pushUnique(array,item){return array.indexOf(item)<0&&!!array.push(item)}function defined(obj){return typeof obj!=="undefined"&&obj!==null}function attr(elem,keyOrAttribs,value){const isGetter=isString(keyOrAttribs)&&!defined(value);let ret;const attrSingle=(value,key)=>{if(defined(value)){elem.setAttribute(key,value)}else if(isGetter){ret=elem.getAttribute(key);if(!ret&&key==="class"){ret=elem.getAttribute(key+"Name")}}else{elem.removeAttribute(key)}};if(isString(keyOrAttribs)){attrSingle(value,keyOrAttribs)}else{objectEach(keyOrAttribs,attrSingle)}return ret}function splat(obj){return isArray(obj)?obj:[obj]}function syncTimeout(fn,delay,context){if(delay>0){return setTimeout(fn,delay,context)}fn.call(0,context);return-1}function internalClearTimeout(id){if(defined(id)){clearTimeout(id)}}function extend(a,b){let n;if(!a){a={}}for(n in b){a[n]=b[n]}return a}function pick(){const args=arguments;const length=args.length;for(let i=0;i<length;i++){const arg=args[i];if(typeof arg!=="undefined"&&arg!==null){return arg}}}function css(el,styles){extend(el.style,styles)}function createElement(tag,attribs,styles,parent,nopad){const el=doc.createElement(tag);if(attribs){extend(el,attribs)}if(nopad){css(el,{padding:"0",border:"none",margin:"0"})}if(styles){css(el,styles)}if(parent){parent.appendChild(el)}return el}function extendClass(parent,members){const obj=function(){};obj.prototype=new parent;extend(obj.prototype,members);return obj}function pad(number,length,padder){return new Array((length||2)+1-String(number).replace("-","").length).join(padder||"0")+number}function relativeLength(value,base,offset){return/%$/.test(value)?base*parseFloat(value)/100+(offset||0):parseFloat(value)}function replaceNested(text,...replacements){let previous,replacement;do{previous=text;for(replacement of replacements){text=text.replace(replacement[0],replacement[1])}}while(text!==previous);return text}function wrap(obj,method,func){const proceed=obj[method];obj[method]=function(){const outerArgs=arguments,scope=this;return func.apply(this,[function(){return proceed.apply(scope,arguments.length?arguments:outerArgs)}].concat([].slice.call(arguments)))}}function getMagnitude(num){return Math.pow(10,Math.floor(Math.log(num)/Math.LN10))}function normalizeTickInterval(interval,multiples,magnitude,allowDecimals,hasTickAmount){let i,retInterval=interval;magnitude=pick(magnitude,getMagnitude(interval));const normalized=interval/magnitude;if(!multiples){multiples=hasTickAmount?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10];if(allowDecimals===false){if(magnitude===1){multiples=multiples.filter(function(num){return num%1===0})}else if(magnitude<=.1){multiples=[1/magnitude]}}}for(i=0;i<multiples.length;i++){retInterval=multiples[i];if(hasTickAmount&&retInterval*magnitude>=interval||!hasTickAmount&&normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break}}retInterval=correctFloat(retInterval*magnitude,-Math.round(Math.log(.001)/Math.LN10));return retInterval}function stableSort(arr,sortFunction){const length=arr.length;let sortValue,i;for(i=0;i<length;i++){arr[i].safeI=i}arr.sort(function(a,b){sortValue=sortFunction(a,b);return sortValue===0?a.safeI-b.safeI:sortValue});for(i=0;i<length;i++){delete arr[i].safeI}}function arrayMin(data){let i=data.length,min=data[0];while(i--){if(data[i]<min){min=data[i]}}return min}function arrayMax(data){let i=data.length,max=data[0];while(i--){if(data[i]>max){max=data[i]}}return max}function destroyObjectProperties(obj,except,destructablesOnly){objectEach(obj,function(val,n){if(val!==except&&val?.destroy){val.destroy()}if(val?.destroy||!destructablesOnly){delete obj[n]}})}function discardElement(element){if(element&&element.parentElement){element.parentElement.removeChild(element)}}function correctFloat(num,prec){return num>1e14?num:parseFloat(num.toPrecision(prec||14))}const timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:24*36e5,week:7*24*36e5,month:28*24*36e5,year:364*24*36e5};Math.easeInOutSine=function(pos){return-.5*(Math.cos(Math.PI*pos)-1)};const getAlignFactor=(align="")=>({center:.5,right:1,middle:.5,bottom:1})[align]||0;function getClosestDistance(arrays,onError){const allowNegative=!onError;let closest,loopLength,distance,i;arrays.forEach(xData=>{if(xData.length>1){loopLength=xData.length-1;for(i=loopLength;i>0;i--){distance=xData[i]-xData[i-1];if(distance<0&&!allowNegative){onError?.();onError=void 0}else if(distance&&(typeof closest==="undefined"||distance<closest)){closest=distance}}}});return closest}function getNestedProperty(path,parent){const pathElements=path.split(".");while(pathElements.length&&defined(parent)){const pathElement=pathElements.shift();if(typeof pathElement==="undefined"||pathElement==="__proto__"){return}if(pathElement==="this"){let thisProp;if(isObject(parent)){thisProp=parent["@this"]}return thisProp??parent}const child=parent[pathElement];if(!defined(child)||typeof child==="function"||typeof child.nodeType==="number"||child===win){return}parent=child}return parent}function getStyle(el,prop,toInt){let style;if(prop==="width"){let offsetWidth=Math.min(el.offsetWidth,el.scrollWidth);const boundingClientRectWidth=el.getBoundingClientRect&&el.getBoundingClientRect().width;if(boundingClientRectWidth<offsetWidth&&boundingClientRectWidth>=offsetWidth-1){offsetWidth=Math.floor(boundingClientRectWidth)}return Math.max(0,offsetWidth-(getStyle(el,"padding-left",true)||0)-(getStyle(el,"padding-right",true)||0))}if(prop==="height"){return Math.max(0,Math.min(el.offsetHeight,el.scrollHeight)-(getStyle(el,"padding-top",true)||0)-(getStyle(el,"padding-bottom",true)||0))}const css=win.getComputedStyle(el,void 0);if(css){style=css.getPropertyValue(prop);if(pick(toInt,prop!=="opacity")){style=pInt(style)}}return style}const find=Array.prototype.find?function(arr,callback){return arr.find(callback)}:function(arr,callback){let i;const length=arr.length;for(i=0;i<length;i++){if(callback(arr[i],i)){return arr[i]}}};function offset(el){const docElem=doc.documentElement,box=el.parentElement||el.parentNode?el.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0),width:box.width,height:box.height}}function objectEach(obj,fn,ctx){for(const key in obj){if(Object.hasOwnProperty.call(obj,key)){fn.call(ctx||obj[key],obj[key],key,obj)}}}function addEvent(el,type,fn,options={}){const owner=typeof el==="function"&&el.prototype||el;if(!Object.hasOwnProperty.call(owner,"hcEvents")){owner.hcEvents={}}const events=owner.hcEvents;if(H.Point&&el instanceof H.Point&&el.series&&el.series.chart){el.series.chart.runTrackerClick=true}const addEventListener=el.addEventListener;if(addEventListener){addEventListener.call(el,type,fn,H.supportsPassiveEvents?{passive:options.passive===void 0?type.indexOf("touch")!==-1:options.passive,capture:false}:false)}if(!events[type]){events[type]=[]}const eventObject={fn:fn,order:typeof options.order==="number"?options.order:Infinity};events[type].push(eventObject);events[type].sort((a,b)=>a.order-b.order);return function(){removeEvent(el,type,fn)}}function removeEvent(el,type,fn){function removeOneEvent(type,fn){const removeEventListener=el.removeEventListener;if(removeEventListener){removeEventListener.call(el,type,fn,false)}}function removeAllEvents(eventCollection){let types,len;if(!el.nodeName){return}if(type){types={};types[type]=true}else{types=eventCollection}objectEach(types,function(_val,n){if(eventCollection[n]){len=eventCollection[n].length;while(len--){removeOneEvent(n,eventCollection[n][len].fn)}}})}const owner=typeof el==="function"&&el.prototype||el;if(Object.hasOwnProperty.call(owner,"hcEvents")){const events=owner.hcEvents;if(type){const typeEvents=events[type]||[];if(fn){events[type]=typeEvents.filter(function(obj){return fn!==obj.fn});removeOneEvent(type,fn)}else{removeAllEvents(events);events[type]=[]}}else{removeAllEvents(events);delete owner.hcEvents}}}function fireEvent(el,type,eventArguments,defaultFunction){eventArguments=eventArguments||{};if(doc.createEvent&&(el.dispatchEvent||el.fireEvent&&el!==H)){const e=doc.createEvent("Events");e.initEvent(type,true,true);eventArguments=extend(e,eventArguments);if(el.dispatchEvent){el.dispatchEvent(eventArguments)}else{el.fireEvent(type,eventArguments)}}else if(el.hcEvents){if(!eventArguments.target){extend(eventArguments,{preventDefault:function(){eventArguments.defaultPrevented=true},target:el,type:type})}const events=[];let object=el;let multilevel=false;while(object.hcEvents){if(Object.hasOwnProperty.call(object,"hcEvents")&&object.hcEvents[type]){if(events.length){multilevel=true}events.unshift.apply(events,object.hcEvents[type])}object=Object.getPrototypeOf(object)}if(multilevel){events.sort((a,b)=>a.order-b.order)}events.forEach(obj=>{if(obj.fn.call(el,eventArguments)===false){eventArguments.preventDefault()}})}if(defaultFunction&&!eventArguments.defaultPrevented){defaultFunction.call(el,eventArguments)}}let serialMode;const uniqueKey=function(){const hash=Math.random().toString(36).substring(2,9)+"-";let id=0;return function(){return"highcharts-"+(serialMode?"":hash)+id++}}();function useSerialIds(mode){return serialMode=pick(mode,serialMode)}function isFunction(obj){return typeof obj==="function"}function ucfirst(s){return isString(s)?s.substring(0,1).toUpperCase()+s.substring(1):String(s)}if(win.jQuery){win.jQuery.fn.highcharts=function(){const args=[].slice.call(arguments);if(this[0]){if(args[0]){new H[isString(args[0])?args.shift():"Chart"](this[0],args[0],args[1]);return this}return charts[attr(this[0],"data-highcharts-chart")]}}}const Utilities={addEvent:addEvent,arrayMax:arrayMax,arrayMin:arrayMin,attr:attr,clamp:clamp,clearTimeout:internalClearTimeout,correctFloat:correctFloat,createElement:createElement,crisp:crisp,css:css,defined:defined,destroyObjectProperties:destroyObjectProperties,diffObjects:diffObjects,discardElement:discardElement,erase:erase,error:error,extend:extend,extendClass:extendClass,find:find,fireEvent:fireEvent,getAlignFactor:getAlignFactor,getClosestDistance:getClosestDistance,getMagnitude:getMagnitude,getNestedProperty:getNestedProperty,getStyle:getStyle,insertItem:insertItem,isArray:isArray,isClass:isClass,isDOMElement:isDOMElement,isFunction:isFunction,isNumber:isNumber,isObject:isObject,isString:isString,merge:merge,normalizeTickInterval:normalizeTickInterval,objectEach:objectEach,offset:offset,pad:pad,pick:pick,pInt:pInt,pushUnique:pushUnique,relativeLength:relativeLength,removeEvent:removeEvent,replaceNested:replaceNested,splat:splat,stableSort:stableSort,syncTimeout:syncTimeout,timeUnits:timeUnits,ucfirst:ucfirst,uniqueKey:uniqueKey,useSerialIds:useSerialIds,wrap:wrap};export default Utilities;"";