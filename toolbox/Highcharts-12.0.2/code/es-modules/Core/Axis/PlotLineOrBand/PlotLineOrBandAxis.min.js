"use strict";import U from"../../Utilities.js";const{erase,extend,isNumber}=U;var PlotLineOrBandAxis;(function(PlotLineOrBandAxis){let PlotLineOrBandClass;function addPlotBand(options){return this.addPlotBandOrLine(options,"plotBands")}function addPlotBandOrLine(options,coll){const userOptions=this.userOptions;let obj=new PlotLineOrBandClass(this,options);if(this.visible){obj=obj.render()}if(obj){if(!this._addedPlotLB){this._addedPlotLB=true;(userOptions.plotLines||[]).concat(userOptions.plotBands||[]).forEach(plotLineOptions=>{this.addPlotBandOrLine(plotLineOptions)})}if(coll){const updatedOptions=userOptions[coll]||[];updatedOptions.push(options);userOptions[coll]=updatedOptions}this.plotLinesAndBands.push(obj)}return obj}function addPlotLine(options){return this.addPlotBandOrLine(options,"plotLines")}function compose(PlotLineOrBandType,AxisClass){const axisProto=AxisClass.prototype;if(!axisProto.addPlotBand){PlotLineOrBandClass=PlotLineOrBandType;extend(axisProto,{addPlotBand:addPlotBand,addPlotLine:addPlotLine,addPlotBandOrLine:addPlotBandOrLine,getPlotBandPath:getPlotBandPath,removePlotBand:removePlotBand,removePlotLine:removePlotLine,removePlotBandOrLine:removePlotBandOrLine})}return AxisClass}PlotLineOrBandAxis.compose=compose;function getPlotBandPath(from,to,options){options=options||this.options;const toPath=this.getPlotLinePath({value:to,force:true,acrossPanes:options.acrossPanes}),result=[],horiz=this.horiz,outside=!isNumber(this.min)||!isNumber(this.max)||from<this.min&&to<this.min||from>this.max&&to>this.max,path=this.getPlotLinePath({value:from,force:true,acrossPanes:options.acrossPanes});let i,plus=1,isFlat;if(path&&toPath){if(outside){isFlat=path.toString()===toPath.toString();plus=0}for(i=0;i<path.length;i+=2){const pathStart=path[i],pathEnd=path[i+1],toPathStart=toPath[i],toPathEnd=toPath[i+1];if((pathStart[0]==="M"||pathStart[0]==="L")&&(pathEnd[0]==="M"||pathEnd[0]==="L")&&(toPathStart[0]==="M"||toPathStart[0]==="L")&&(toPathEnd[0]==="M"||toPathEnd[0]==="L")){if(horiz&&toPathStart[1]===pathStart[1]){toPathStart[1]+=plus;toPathEnd[1]+=plus}else if(!horiz&&toPathStart[2]===pathStart[2]){toPathStart[2]+=plus;toPathEnd[2]+=plus}result.push(["M",pathStart[1],pathStart[2]],["L",pathEnd[1],pathEnd[2]],["L",toPathEnd[1],toPathEnd[2]],["L",toPathStart[1],toPathStart[2]],["Z"])}result.isFlat=isFlat}}return result}function removePlotBand(id){this.removePlotBandOrLine(id)}function removePlotBandOrLine(id){const plotLinesAndBands=this.plotLinesAndBands,options=this.options,userOptions=this.userOptions;if(plotLinesAndBands){let i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id===id){plotLinesAndBands[i].destroy()}}[options.plotLines||[],userOptions.plotLines||[],options.plotBands||[],userOptions.plotBands||[]].forEach(function(arr){i=arr.length;while(i--){if((arr[i]||{}).id===id){erase(arr,arr[i])}}})}}function removePlotLine(id){this.removePlotBandOrLine(id)}})(PlotLineOrBandAxis||(PlotLineOrBandAxis={}));export default PlotLineOrBandAxis;