"use strict";import H from"../Globals.js";const{isTouchDevice}=H;import U from"../Utilities.js";const{addEvent,correctFloat,defined,isNumber,pick}=U;function onAxisInit(){const axis=this;if(!axis.navigatorAxis){axis.navigatorAxis=new NavigatorAxisAdditions(axis)}}function onAxisSetExtremes(e){const axis=this,chart=axis.chart,chartOptions=chart.options,navigator=chartOptions.navigator,navigatorAxis=axis.navigatorAxis,pinchType=chart.zooming.pinchType,rangeSelector=chartOptions.rangeSelector,zoomType=chart.zooming.type;let zoomed;if(axis.isXAxis&&(navigator?.enabled||rangeSelector?.enabled)){if(zoomType==="y"&&e.trigger==="zoom"){zoomed=false}else if((e.trigger==="zoom"&&zoomType==="xy"||isTouchDevice&&pinchType==="xy")&&axis.options.range){const previousZoom=navigatorAxis.previousZoom;if(defined(e.min)){navigatorAxis.previousZoom=[axis.min,axis.max]}else if(previousZoom){e.min=previousZoom[0];e.max=previousZoom[1];navigatorAxis.previousZoom=void 0}}}if(typeof zoomed!=="undefined"){e.preventDefault()}}class NavigatorAxisAdditions{static compose(AxisClass){if(!AxisClass.keepProps.includes("navigatorAxis")){AxisClass.keepProps.push("navigatorAxis");addEvent(AxisClass,"init",onAxisInit);addEvent(AxisClass,"setExtremes",onAxisSetExtremes)}}constructor(axis){this.axis=axis}destroy(){this.axis=void 0}toFixedRange(pxMin,pxMax,fixedMin,fixedMax){const axis=this.axis,halfPointRange=(axis.pointRange||0)/2;let newMin=pick(fixedMin,axis.translate(pxMin,true,!axis.horiz)),newMax=pick(fixedMax,axis.translate(pxMax,true,!axis.horiz));if(!defined(fixedMin)){newMin=correctFloat(newMin+halfPointRange)}if(!defined(fixedMax)){newMax=correctFloat(newMax-halfPointRange)}if(!isNumber(newMin)||!isNumber(newMax)){newMin=newMax=void 0}return{min:newMin,max:newMax}}}export default NavigatorAxisAdditions;