"use strict";import U from"../Core/Utilities.js";const{defined,extend,pick,wrap}=U;var MapPointer;(function(MapPointer){let totalWheelDelta=0;let totalWheelDeltaTimer;function compose(PointerClass){const pointerProto=PointerClass.prototype;if(!pointerProto.onContainerDblClick){extend(pointerProto,{onContainerDblClick:onContainerDblClick,onContainerMouseWheel:onContainerMouseWheel});wrap(pointerProto,"normalize",wrapNormalize);wrap(pointerProto,"zoomOption",wrapZoomOption)}}MapPointer.compose=compose;function onContainerDblClick(e){const chart=this.chart;e=this.normalize(e);if(chart.options.mapNavigation.enableDoubleClickZoomTo){if(chart.pointer.inClass(e.target,"highcharts-tracker")&&chart.hoverPoint){chart.hoverPoint.zoomTo()}}else if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){chart.mapZoom(.5,void 0,void 0,e.chartX,e.chartY)}}function onContainerMouseWheel(e){const chart=this.chart;e=this.normalize(e);const delta=defined(e.wheelDelta)&&-e.wheelDelta/120||e.deltaY||e.detail;if(Math.abs(delta)>=1){totalWheelDelta+=Math.abs(delta);if(totalWheelDeltaTimer){clearTimeout(totalWheelDeltaTimer)}totalWheelDeltaTimer=setTimeout(()=>{totalWheelDelta=0},50)}if(totalWheelDelta<10&&chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)&&chart.mapView){chart.mapView.zoomBy((chart.options.mapNavigation.mouseWheelSensitivity-1)*-delta,void 0,[e.chartX,e.chartY],Math.abs(delta)<1?false:void 0)}}function wrapNormalize(proceed,e,chartPosition){const chart=this.chart;e=proceed.call(this,e,chartPosition);if(chart&&chart.mapView){const lonLat=chart.mapView.pixelsToLonLat({x:e.chartX-chart.plotLeft,y:e.chartY-chart.plotTop});if(lonLat){extend(e,lonLat)}}return e}function wrapZoomOption(proceed){const mapNavigation=this.chart.options.mapNavigation;if(mapNavigation&&pick(mapNavigation.enableTouchZoom,mapNavigation.enabled)){this.chart.zooming.pinchType="xy"}proceed.apply(this,[].slice.call(arguments,1))}})(MapPointer||(MapPointer={}));export default MapPointer;