"use strict";import DataGroupingAxisComposition from"./DataGroupingAxisComposition.js";import DataGroupingDefaults from"./DataGroupingDefaults.js";import DataGroupingSeriesComposition from"./DataGroupingSeriesComposition.js";import F from"../../Core/Templating.js";const{format}=F;import H from"../../Core/Globals.js";const{composed}=H;import U from"../../Core/Utilities.js";const{addEvent,extend,isNumber,pick,pushUnique}=U;function compose(AxisClass,SeriesClass,TooltipClass){DataGroupingAxisComposition.compose(AxisClass);DataGroupingSeriesComposition.compose(SeriesClass);if(TooltipClass&&pushUnique(composed,"DataGrouping")){addEvent(TooltipClass,"headerFormatter",onTooltipHeaderFormatter)}}function onTooltipHeaderFormatter(e){const chart=this.chart,time=chart.time,point=e.point,series=point.series,options=series.options,tooltipOptions=series.tooltipOptions,dataGroupingOptions=options.dataGrouping,xAxis=series.xAxis;let xDateFormat=tooltipOptions.xDateFormat||"",xDateFormatEnd,currentDataGrouping,dateTimeLabelFormats,labelFormats,formattedKey,formatString=tooltipOptions[e.isFooter?"footerFormat":"headerFormat"];if(xAxis&&xAxis.options.type==="datetime"&&dataGroupingOptions&&isNumber(point.key)){currentDataGrouping=series.currentDataGrouping;dateTimeLabelFormats=dataGroupingOptions.dateTimeLabelFormats||DataGroupingDefaults.common.dateTimeLabelFormats;if(currentDataGrouping){labelFormats=dateTimeLabelFormats[currentDataGrouping.unitName];if(currentDataGrouping.count===1){xDateFormat=labelFormats[0]}else{xDateFormat=labelFormats[1];xDateFormatEnd=labelFormats[2]}}else if(!xDateFormat&&dateTimeLabelFormats&&xAxis.dateTime){xDateFormat=xAxis.dateTime.getXDateFormat(point.x,tooltipOptions.dateTimeLabelFormats)}const groupStart=pick(series.groupMap?.[point.index].groupStart,point.key),groupEnd=groupStart+(currentDataGrouping?.totalRange||0)-1;formattedKey=time.dateFormat(xDateFormat,groupStart);if(xDateFormatEnd){formattedKey+=time.dateFormat(xDateFormatEnd,groupEnd)}if(series.chart.styledMode){formatString=this.styledModeFormat(formatString)}e.text=format(formatString,{point:extend(point,{key:formattedKey}),series:series},chart);e.preventDefault()}}const DataGroupingComposition={compose:compose,groupData:DataGroupingSeriesComposition.groupData};export default DataGroupingComposition;"";"";