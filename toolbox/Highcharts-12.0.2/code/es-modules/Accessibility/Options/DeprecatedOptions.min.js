"use strict";import U from"../../Core/Utilities.js";const{error,pick}=U;function traverseSetOption(root,optionAsArray,val){let opt=root,prop,i=0;for(;i<optionAsArray.length-1;++i){prop=optionAsArray[i];opt=opt[prop]=pick(opt[prop],{})}opt[optionAsArray[optionAsArray.length-1]]=val}function deprecateFromOptionsMap(chart,rootOldAsArray,rootNewAsArray,mapToNewOptions){function getChildProp(root,propAsArray){return propAsArray.reduce(function(acc,cur){return acc[cur]},root)}const rootOld=getChildProp(chart.options,rootOldAsArray),rootNew=getChildProp(chart.options,rootNewAsArray);Object.keys(mapToNewOptions).forEach(function(oldOptionKey){const val=rootOld[oldOptionKey];if(typeof val!=="undefined"){traverseSetOption(rootNew,mapToNewOptions[oldOptionKey],val);error(32,false,chart,{[rootOldAsArray.join(".")+"."+oldOptionKey]:rootNewAsArray.join(".")+"."+mapToNewOptions[oldOptionKey].join(".")})}})}function copyDeprecatedChartOptions(chart){const chartOptions=chart.options.chart,a11yOptions=chart.options.accessibility||{};["description","typeDescription"].forEach(function(prop){if(chartOptions[prop]){a11yOptions[prop]=chartOptions[prop];error(32,false,chart,{[`chart.${prop}`]:`use accessibility.${prop}`})}})}function copyDeprecatedAxisOptions(chart){chart.axes.forEach(function(axis){const opts=axis.options;if(opts&&opts.description){opts.accessibility=opts.accessibility||{};opts.accessibility.description=opts.description;error(32,false,chart,{"axis.description":"use axis.accessibility.description"})}})}function copyDeprecatedSeriesOptions(chart){const oldToNewSeriesOptions={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};chart.series.forEach(function(series){Object.keys(oldToNewSeriesOptions).forEach(function(oldOption){let optionVal=series.options[oldOption];if(oldOption==="accessibility.pointDescriptionFormatter"){optionVal=series.options.accessibility&&series.options.accessibility.pointDescriptionFormatter}if(typeof optionVal!=="undefined"){traverseSetOption(series.options,oldToNewSeriesOptions[oldOption],oldOption==="skipKeyboardNavigation"?!optionVal:optionVal);error(32,false,chart,{[`series.${oldOption}`]:"series."+oldToNewSeriesOptions[oldOption].join(".")})}})})}function copyDeprecatedTopLevelAccessibilityOptions(chart){deprecateFromOptionsMap(chart,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]})}function copyDeprecatedKeyboardNavigationOptions(chart){deprecateFromOptionsMap(chart,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]})}function copyDeprecatedLangOptions(chart){deprecateFromOptionsMap(chart,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}function copyDeprecatedOptions(chart){copyDeprecatedChartOptions(chart);copyDeprecatedAxisOptions(chart);if(chart.series){copyDeprecatedSeriesOptions(chart)}copyDeprecatedTopLevelAccessibilityOptions(chart);copyDeprecatedKeyboardNavigationOptions(chart);copyDeprecatedLangOptions(chart)}export default copyDeprecatedOptions;