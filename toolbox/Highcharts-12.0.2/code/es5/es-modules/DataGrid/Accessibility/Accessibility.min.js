"use strict";import Globals from"../Globals.js";import DGUtils from"../Utils.js";var makeHTMLElement=DGUtils.makeHTMLElement;var Accessibility=function(){function Accessibility(dataGrid){var _a;this.dataGrid=dataGrid;this.element=document.createElement("div");this.element.classList.add(Globals.classNames.visuallyHidden);(_a=this.dataGrid.container)===null||_a===void 0?void 0:_a.prepend(this.element);this.announcerElement=document.createElement("p");this.announcerElement.setAttribute("aria-atomic","true");this.announcerElement.setAttribute("aria-hidden","false")}Accessibility.prototype.addEditableCellHint=function(cellElement){var _a,_b,_c,_d;var editableLang=(_d=(_c=(_b=(_a=this.dataGrid.options)===null||_a===void 0?void 0:_a.lang)===null||_b===void 0?void 0:_b.accessibility)===null||_c===void 0?void 0:_c.cellEditing)===null||_d===void 0?void 0:_d.editable;if(!editableLang){return}makeHTMLElement("span",{className:Globals.classNames.visuallyHidden,innerText:", "+editableLang},cellElement)};Accessibility.prototype.addHeaderCellDescription=function(thElement,description){if(description){thElement.setAttribute("aria-description",description)}};Accessibility.prototype.announce=function(msg,assertive){var _this=this;if(assertive===void 0){assertive=false}if(this.announcerTimeout){clearTimeout(this.announcerTimeout)}this.announcerElement.remove();this.announcerElement.setAttribute("aria-live",assertive?"assertive":"polite");this.element.appendChild(this.announcerElement);this.announcerElement.textContent=msg;this.announcerTimeout=setTimeout(function(){_this.announcerElement.remove()},3e3)};Accessibility.prototype.userSortedColumn=function(order){var _a,_b,_c,_d,_e;var options=this.dataGrid.options;var announcementsLang=(_c=(_b=(_a=options===null||options===void 0?void 0:options.lang)===null||_a===void 0?void 0:_a.accessibility)===null||_b===void 0?void 0:_b.sorting)===null||_c===void 0?void 0:_c.announcements;if(!((_e=(_d=options===null||options===void 0?void 0:options.accessibility)===null||_d===void 0?void 0:_d.announcements)===null||_e===void 0?void 0:_e.sorting)){return}var msg;switch(order){case"asc":msg=announcementsLang===null||announcementsLang===void 0?void 0:announcementsLang.ascending;break;case"desc":msg=announcementsLang===null||announcementsLang===void 0?void 0:announcementsLang.descending;break;default:msg=announcementsLang===null||announcementsLang===void 0?void 0:announcementsLang.none}if(!msg){return}this.announce(msg,true)};Accessibility.prototype.userEditedCell=function(msgType){var _a,_b,_c,_d,_e;var options=this.dataGrid.options;var announcementsLang=(_c=(_b=(_a=options===null||options===void 0?void 0:options.lang)===null||_a===void 0?void 0:_a.accessibility)===null||_b===void 0?void 0:_b.cellEditing)===null||_c===void 0?void 0:_c.announcements;if(!((_e=(_d=options===null||options===void 0?void 0:options.accessibility)===null||_d===void 0?void 0:_d.announcements)===null||_e===void 0?void 0:_e.cellEditing)){return}var msg=announcementsLang===null||announcementsLang===void 0?void 0:announcementsLang[msgType];if(!msg){return}this.announce(msg)};Accessibility.prototype.setColumnSortState=function(thElement,state){thElement===null||thElement===void 0?void 0:thElement.setAttribute("aria-sort",state)};Accessibility.prototype.setRowIndex=function(el,idx){el.setAttribute("aria-rowindex",idx)};return Accessibility}();export default Accessibility;