"use strict";import H from"../Core/Globals.js";var noop=H.noop;import Series from"../Core/Series/Series.js";import U from"../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined;var DerivedComposition;(function(DerivedComposition){DerivedComposition.hasDerivedData=true;DerivedComposition.setDerivedData=noop;function compose(SeriesClass){var seriesProto=SeriesClass.prototype;seriesProto.addBaseSeriesEvents=addBaseSeriesEvents;seriesProto.addEvents=addEvents;seriesProto.destroy=destroy;seriesProto.init=init;seriesProto.setBaseSeries=setBaseSeries;return SeriesClass}DerivedComposition.compose=compose;function init(){Series.prototype.init.apply(this,arguments);this.initialised=false;this.baseSeries=null;this.eventRemovers=[];this.addEvents()}DerivedComposition.init=init;function setBaseSeries(){var chart=this.chart,baseSeriesOptions=this.options.baseSeries,baseSeries=defined(baseSeriesOptions)&&(chart.series[baseSeriesOptions]||chart.get(baseSeriesOptions));this.baseSeries=baseSeries||null}DerivedComposition.setBaseSeries=setBaseSeries;function addEvents(){var _this=this;this.eventRemovers.push(addEvent(this.chart,"afterLinkSeries",function(){_this.setBaseSeries();if(_this.baseSeries&&!_this.initialised){_this.setDerivedData();_this.addBaseSeriesEvents();_this.initialised=true}}))}DerivedComposition.addEvents=addEvents;function addBaseSeriesEvents(){var _this=this;this.eventRemovers.push(addEvent(this.baseSeries,"updatedData",function(){_this.setDerivedData()}),addEvent(this.baseSeries,"destroy",function(){_this.baseSeries=null;_this.initialised=false}))}DerivedComposition.addBaseSeriesEvents=addBaseSeriesEvents;function destroy(){this.eventRemovers.forEach(function(remover){remover()});Series.prototype.destroy.apply(this,arguments)}DerivedComposition.destroy=destroy})(DerivedComposition||(DerivedComposition={}));export default DerivedComposition;