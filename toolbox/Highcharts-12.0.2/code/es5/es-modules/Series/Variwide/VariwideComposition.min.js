"use strict";import H from"../../Core/Globals.js";var composed=H.composed;import U from"../../Core/Utilities.js";var addEvent=U.addEvent,pushUnique=U.pushUnique,wrap=U.wrap;function compose(AxisClass,TickClass){if(pushUnique(composed,"Variwide")){var tickProto=TickClass.prototype;addEvent(AxisClass,"afterDrawCrosshair",onAxisAfterDrawCrosshair);addEvent(AxisClass,"afterRender",onAxisAfterRender);addEvent(TickClass,"afterGetPosition",onTickAfterGetPosition);tickProto.postTranslate=tickPostTranslate;wrap(tickProto,"getLabelPosition",wrapTickGetLabelPosition)}}function onAxisAfterDrawCrosshair(e){if(this.variwide&&this.cross){this.cross.attr("stroke-width",e.point&&e.point.crosshairWidth)}}function onAxisAfterRender(){var axis=this;if(this.variwide){this.chart.labelCollectors.push(function(){return axis.tickPositions.filter(function(pos){return!!axis.ticks[pos].label}).map(function(pos,i){var label=axis.ticks[pos].label;label.labelrank=axis.zData[i];return label})})}}function onTickAfterGetPosition(e){var axis=this.axis,xOrY=axis.horiz?"x":"y";if(axis.variwide){this[xOrY+"Orig"]=e.pos[xOrY];this.postTranslate(e.pos,xOrY,this.pos)}}function tickPostTranslate(xy,xOrY,index){var axis=this.axis;var pos=xy[xOrY]-axis.pos;if(!axis.horiz){pos=axis.len-pos}pos=axis.series[0].postTranslate(index,pos);if(!axis.horiz){pos=axis.len-pos}xy[xOrY]=axis.pos+pos}function wrapTickGetLabelPosition(proceed,_x,_y,_label,horiz,_labelOptions,_tickmarkOffset,_index){var args=Array.prototype.slice.call(arguments,1),xOrY=horiz?"x":"y";if(this.axis.variwide&&typeof this[xOrY+"Orig"]==="number"){args[horiz?0:1]=this[xOrY+"Orig"]}var xy=proceed.apply(this,args);if(this.axis.variwide&&this.axis.categories){this.postTranslate(xy,xOrY,this.pos)}return xy}var VariwideComposition={compose:compose};export default VariwideComposition;