"use strict";import A from"../Core/Animation/AnimationUtilities.js";var setAnimation=A.setAnimation;import H from"../Core/Globals.js";var composed=H.composed;import U from"../Core/Utilities.js";var addEvent=U.addEvent,pushUnique=U.pushUnique;var integrations={};var layouts={};function compose(ChartClass){if(pushUnique(composed,"GraphLayout")){addEvent(ChartClass,"afterPrint",onChartAfterPrint);addEvent(ChartClass,"beforePrint",onChartBeforePrint);addEvent(ChartClass,"predraw",onChartPredraw);addEvent(ChartClass,"render",onChartRender)}}function onChartAfterPrint(){if(this.graphLayoutsLookup){this.graphLayoutsLookup.forEach(function(layout){layout.updateSimulation()});this.redraw()}}function onChartBeforePrint(){if(this.graphLayoutsLookup){this.graphLayoutsLookup.forEach(function(layout){layout.updateSimulation(false)});this.redraw()}}function onChartPredraw(){if(this.graphLayoutsLookup){this.graphLayoutsLookup.forEach(function(layout){layout.stop()})}}function onChartRender(){var systemsStable,afterRender=false;var layoutStep=function(layout){if(layout.maxIterations--&&isFinite(layout.temperature)&&!layout.isStable()&&!layout.enableSimulation){if(layout.beforeStep){layout.beforeStep()}layout.step();systemsStable=false;afterRender=true}};if(this.graphLayoutsLookup){setAnimation(false,this);this.graphLayoutsLookup.forEach(function(layout){return layout.start()});while(!systemsStable){systemsStable=true;this.graphLayoutsLookup.forEach(layoutStep)}if(afterRender){this.series.forEach(function(series){if(series&&series.layout){series.render()}})}}}var GraphLayoutComposition={compose:compose,integrations:integrations,layouts:layouts};export default GraphLayoutComposition;