"use strict";import A from"./Animation/AnimationUtilities.js";var animObject=A.animObject;import F from"./Templating.js";var format=F.format;import H from"./Globals.js";var composed=H.composed,dateFormats=H.dateFormats,doc=H.doc,isSafari=H.isSafari;import R from"./Renderer/RendererUtilities.js";var distribute=R.distribute;import RendererRegistry from"./Renderer/RendererRegistry.js";import U from"./Utilities.js";var addEvent=U.addEvent,clamp=U.clamp,css=U.css,discardElement=U.discardElement,extend=U.extend,fireEvent=U.fireEvent,isArray=U.isArray,isNumber=U.isNumber,isObject=U.isObject,isString=U.isString,merge=U.merge,pick=U.pick,pushUnique=U.pushUnique,splat=U.splat,syncTimeout=U.syncTimeout;var Tooltip=function(){function Tooltip(chart,options,pointer){this.allowShared=true;this.crosshairs=[];this.distance=0;this.isHidden=true;this.isSticky=false;this.options={};this.outside=false;this.chart=chart;this.init(chart,options);this.pointer=pointer}Tooltip.prototype.bodyFormatter=function(points){return points.map(function(point){var tooltipOptions=point.series.tooltipOptions,formatPrefix=point.formatPrefix||"point";return(tooltipOptions[formatPrefix+"Formatter"]||point.tooltipFormatter).call(point,tooltipOptions[formatPrefix+"Format"]||"")})};Tooltip.prototype.cleanSplit=function(force){this.chart.series.forEach(function(series){var tt=series&&series.tt;if(tt){if(!tt.isActive||force){series.tt=tt.destroy()}else{tt.isActive=false}}})};Tooltip.prototype.defaultFormatter=function(tooltip){var hoverPoints=this.points||splat(this);var s;s=[tooltip.headerFooterFormatter(hoverPoints[0])];s=s.concat(tooltip.bodyFormatter(hoverPoints));s.push(tooltip.headerFooterFormatter(hoverPoints[0],true));return s};Tooltip.prototype.destroy=function(){if(this.label){this.label=this.label.destroy()}if(this.split){this.cleanSplit(true);if(this.tt){this.tt=this.tt.destroy()}}if(this.renderer){this.renderer=this.renderer.destroy();discardElement(this.container)}U.clearTimeout(this.hideTimer)};Tooltip.prototype.getAnchor=function(points,mouseEvent){var _a=this,chart=_a.chart,pointer=_a.pointer,inverted=chart.inverted,plotTop=chart.plotTop,plotLeft=chart.plotLeft;var ret;points=splat(points);if(points[0].series&&points[0].series.yAxis&&!points[0].series.yAxis.options.reversedStacks){points=points.slice().reverse()}if(this.followPointer&&mouseEvent){if(typeof mouseEvent.chartX==="undefined"){mouseEvent=pointer.normalize(mouseEvent)}ret=[mouseEvent.chartX-plotLeft,mouseEvent.chartY-plotTop]}else if(points[0].tooltipPos){ret=points[0].tooltipPos}else{var chartX_1=0,chartY_1=0;points.forEach(function(point){var pos=point.pos(true);if(pos){chartX_1+=pos[0];chartY_1+=pos[1]}});chartX_1/=points.length;chartY_1/=points.length;if(this.shared&&points.length>1&&mouseEvent){if(inverted){chartX_1=mouseEvent.chartX}else{chartY_1=mouseEvent.chartY}}ret=[chartX_1-plotLeft,chartY_1-plotTop]}return ret.map(Math.round)};Tooltip.prototype.getClassName=function(point,isSplit,isHeader){var options=this.options,series=point.series,seriesOptions=series.options;return[options.className,"highcharts-label",isHeader&&"highcharts-tooltip-header",isSplit?"highcharts-tooltip-box":"highcharts-tooltip",!isHeader&&"highcharts-color-"+pick(point.colorIndex,series.colorIndex),seriesOptions&&seriesOptions.className].filter(isString).join(" ")};Tooltip.prototype.getLabel=function(_a){var _b=_a===void 0?{anchorX:0,anchorY:0}:_a,anchorX=_b.anchorX,anchorY=_b.anchorY;var tooltip=this,styledMode=this.chart.styledMode,options=this.options,doSplit=this.split&&this.allowShared;var container=this.container,renderer=this.chart.renderer;if(this.label){var wasSplit=!this.label.hasClass("highcharts-label");if(!doSplit&&wasSplit||doSplit&&!wasSplit){this.destroy()}}if(!this.label){if(this.outside){var chart=this.chart,chartStyle=chart.options.chart.style,Renderer=RendererRegistry.getRendererType();this.container=container=H.doc.createElement("div");container.className="highcharts-tooltip-container "+(chart.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||[].join(" "));css(container,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(chartStyle&&chartStyle.zIndex||0)+3)});this.renderer=renderer=new Renderer(container,0,0,chartStyle,void 0,void 0,renderer.styledMode)}if(doSplit){this.label=renderer.g("tooltip")}else{this.label=renderer.label("",anchorX,anchorY,options.shape,void 0,void 0,options.useHTML,void 0,"tooltip").attr({padding:options.padding,r:options.borderRadius});if(!styledMode){this.label.attr({fill:options.backgroundColor,"stroke-width":options.borderWidth||0}).css(options.style).css({pointerEvents:options.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})}}if(tooltip.outside){var label_1=this.label;[label_1.xSetter,label_1.ySetter].forEach(function(setter,i){label_1[i?"ySetter":"xSetter"]=function(value){setter.call(label_1,tooltip.distance);label_1[i?"y":"x"]=value;if(container){container.style[i?"top":"left"]="".concat(value,"px")}}})}this.label.attr({zIndex:8}).shadow(options.shadow).add()}if(container&&!container.parentElement){H.doc.body.appendChild(container)}return this.label};Tooltip.prototype.getPlayingField=function(){var body=doc.body,documentElement=doc.documentElement,_a=this,chart=_a.chart,distance=_a.distance,outside=_a.outside;return{width:outside?Math.max(body.scrollWidth,documentElement.scrollWidth,body.offsetWidth,documentElement.offsetWidth,documentElement.clientWidth)-2*distance-2:chart.chartWidth,height:outside?Math.max(body.scrollHeight,documentElement.scrollHeight,body.offsetHeight,documentElement.offsetHeight,documentElement.clientHeight):chart.chartHeight}};Tooltip.prototype.getPosition=function(boxWidth,boxHeight,point){var _a,_b;var _c=this,distance=_c.distance,chart=_c.chart,outside=_c.outside,pointer=_c.pointer,inverted=chart.inverted,plotLeft=chart.plotLeft,plotTop=chart.plotTop,polar=chart.polar,_d=point.plotX,plotX=_d===void 0?0:_d,_e=point.plotY,plotY=_e===void 0?0:_e,ret={},h=inverted&&point.h||0,_f=this.getPlayingField(),outerHeight=_f.height,outerWidth=_f.width,chartPosition=pointer.getChartPosition(),scaleX=function(val){return val*chartPosition.scaleX},scaleY=function(val){return val*chartPosition.scaleY},buildDimensionArray=function(dim){var isX=dim==="x";return[dim,isX?outerWidth:outerHeight,isX?boxWidth:boxHeight].concat(outside?[isX?scaleX(boxWidth):scaleY(boxHeight),isX?chartPosition.left-distance+scaleX(plotX+plotLeft):chartPosition.top-distance+scaleY(plotY+plotTop),0,isX?outerWidth:outerHeight]:[isX?boxWidth:boxHeight,isX?plotX+plotLeft:plotY+plotTop,isX?plotLeft:plotTop,isX?plotLeft+chart.plotWidth:plotTop+chart.plotHeight])};var first=buildDimensionArray("y"),second=buildDimensionArray("x"),swapped;var flipped=!!point.negative;if(!polar&&((_b=(_a=chart.hoverSeries)===null||_a===void 0?void 0:_a.yAxis)===null||_b===void 0?void 0:_b.reversed)){flipped=!flipped}var preferFarSide=!this.followPointer&&pick(point.ttBelow,polar?false:!inverted===flipped),firstDimension=function(dim,outerSize,innerSize,scaledInnerSize,point,min,max){var scaledDist=outside?dim==="y"?scaleY(distance):scaleX(distance):distance,scaleDiff=(innerSize-scaledInnerSize)/2,roomLeft=scaledInnerSize<point-distance,roomRight=point+distance+scaledInnerSize<outerSize,alignedLeft=point-scaledDist-innerSize+scaleDiff,alignedRight=point+scaledDist-scaleDiff;if(preferFarSide&&roomRight){ret[dim]=alignedRight}else if(!preferFarSide&&roomLeft){ret[dim]=alignedLeft}else if(roomLeft){ret[dim]=Math.min(max-scaledInnerSize,alignedLeft-h<0?alignedLeft:alignedLeft-h)}else if(roomRight){ret[dim]=Math.max(min,alignedRight+h+innerSize>outerSize?alignedRight:alignedRight+h)}else{return false}},secondDimension=function(dim,outerSize,innerSize,scaledInnerSize,point){if(point<distance||point>outerSize-distance){return false}if(point<innerSize/2){ret[dim]=1}else if(point>outerSize-scaledInnerSize/2){ret[dim]=outerSize-scaledInnerSize-2}else{ret[dim]=point-innerSize/2}},swap=function(count){var _a;_a=[second,first],first=_a[0],second=_a[1];swapped=count},run=function(){if(firstDimension.apply(0,first)!==false){if(secondDimension.apply(0,second)===false&&!swapped){swap(true);run()}}else if(!swapped){swap(true);run()}else{ret.x=ret.y=0}};if(inverted&&!polar||this.len>1){swap()}run();return ret};Tooltip.prototype.hide=function(delay){var tooltip=this;U.clearTimeout(this.hideTimer);delay=pick(delay,this.options.hideDelay);if(!this.isHidden){this.hideTimer=syncTimeout(function(){var label=tooltip.getLabel();tooltip.getLabel().animate({opacity:0},{duration:delay?150:delay,complete:function(){label.hide();if(tooltip.container){tooltip.container.remove()}}});tooltip.isHidden=true},delay)}};Tooltip.prototype.init=function(chart,options){this.chart=chart;this.options=options;this.crosshairs=[];this.isHidden=true;this.split=options.split&&!chart.inverted&&!chart.polar;this.shared=options.shared||this.split;this.outside=pick(options.outside,Boolean(chart.scrollablePixelsX||chart.scrollablePixelsY))};Tooltip.prototype.shouldStickOnContact=function(pointerEvent){return!!(!this.followPointer&&this.options.stickOnContact&&(!pointerEvent||this.pointer.inClass(pointerEvent.target,"highcharts-tooltip")))};Tooltip.prototype.move=function(x,y,anchorX,anchorY){var tooltip=this,animation=animObject(!tooltip.isHidden&&tooltip.options.animation),skipAnchor=tooltip.followPointer||(tooltip.len||0)>1,attr={x:x,y:y};if(!skipAnchor){attr.anchorX=anchorX;attr.anchorY=anchorY}animation.step=function(){return tooltip.drawTracker()};tooltip.getLabel().animate(attr,animation)};Tooltip.prototype.refresh=function(pointOrPoints,mouseEvent){var tooltip=this,_a=this,chart=_a.chart,options=_a.options,pointer=_a.pointer,shared=_a.shared,points=splat(pointOrPoints),point=points[0],formatString=options.format,formatter=options.formatter||tooltip.defaultFormatter,styledMode=chart.styledMode;var wasShared=tooltip.allowShared;if(!options.enabled||!point.series){return}U.clearTimeout(this.hideTimer);tooltip.allowShared=!(!isArray(pointOrPoints)&&pointOrPoints.series&&pointOrPoints.series.noSharedTooltip);wasShared=wasShared&&!tooltip.allowShared;tooltip.followPointer=!tooltip.split&&point.series.tooltipOptions.followPointer;var anchor=tooltip.getAnchor(pointOrPoints,mouseEvent),x=anchor[0],y=anchor[1];if(shared&&tooltip.allowShared){pointer.applyInactiveState(points);points.forEach(function(item){return item.setState("hover")});point.points=points}this.len=points.length;var text=isString(formatString)?format(formatString,point,chart):formatter.call(point,tooltip);point.points=void 0;var currentSeries=point.series;this.distance=pick(currentSeries.tooltipOptions.distance,16);if(text===false){this.hide()}else{if(tooltip.split&&tooltip.allowShared){this.renderSplit(text,points)}else{var checkX_1=x;var checkY_1=y;if(mouseEvent&&pointer.isDirectTouch){checkX_1=mouseEvent.chartX-chart.plotLeft;checkY_1=mouseEvent.chartY-chart.plotTop}if(chart.polar||currentSeries.options.clip===false||points.some(function(p){return pointer.isDirectTouch||p.series.shouldShowTooltip(checkX_1,checkY_1)})){var label=tooltip.getLabel(wasShared&&tooltip.tt||{});if(!options.style.width||styledMode){label.css({width:(this.outside?this.getPlayingField():chart.spacingBox).width+"px"})}label.attr({class:tooltip.getClassName(point),text:text&&text.join?text.join(""):text});if(this.outside){label.attr({x:clamp(label.x||0,0,this.getPlayingField().width-(label.width||0)-1)})}if(!styledMode){label.attr({stroke:options.borderColor||point.color||currentSeries.color||"#666666"})}tooltip.updatePosition({plotX:x,plotY:y,negative:point.negative,ttBelow:point.ttBelow,h:anchor[2]||0})}else{tooltip.hide();return}}if(tooltip.isHidden&&tooltip.label){tooltip.label.attr({opacity:1}).show()}tooltip.isHidden=false}fireEvent(this,"refresh")};Tooltip.prototype.renderSplit=function(labels,points){var _a;var tooltip=this;var chart=tooltip.chart,_b=tooltip.chart,chartWidth=_b.chartWidth,chartHeight=_b.chartHeight,plotHeight=_b.plotHeight,plotLeft=_b.plotLeft,plotTop=_b.plotTop,_c=_b.scrollablePixelsY,scrollablePixelsY=_c===void 0?0:_c,scrollablePixelsX=_b.scrollablePixelsX,styledMode=_b.styledMode,distance=tooltip.distance,options=tooltip.options,positioner=tooltip.options.positioner,pointer=tooltip.pointer;var _d=((_a=chart.scrollablePlotArea)===null||_a===void 0?void 0:_a.scrollingContainer)||{},_e=_d.scrollLeft,scrollLeft=_e===void 0?0:_e,_f=_d.scrollTop,scrollTop=_f===void 0?0:_f;var bounds=tooltip.outside&&typeof scrollablePixelsX!=="number"?doc.documentElement.getBoundingClientRect():{left:scrollLeft,right:scrollLeft+chartWidth,top:scrollTop,bottom:scrollTop+chartHeight};var tooltipLabel=tooltip.getLabel();var ren=this.renderer||chart.renderer;var headerTop=Boolean(chart.xAxis[0]&&chart.xAxis[0].opposite);var _g=pointer.getChartPosition(),chartLeft=_g.left,chartTop=_g.top;var distributionBoxTop=plotTop+scrollTop;var headerHeight=0;var adjustedPlotHeight=plotHeight-scrollablePixelsY;function getAnchor(point){var isHeader=point.isHeader,_a=point.plotX,plotX=_a===void 0?0:_a,_b=point.plotY,plotY=_b===void 0?0:_b,series=point.series;var anchorX;var anchorY;if(isHeader){anchorX=Math.max(plotLeft+plotX,plotLeft);anchorY=plotTop+plotHeight/2}else{var xAxis=series.xAxis,yAxis=series.yAxis;anchorX=xAxis.pos+clamp(plotX,-distance,xAxis.len+distance);if(series.shouldShowTooltip(0,yAxis.pos-plotTop+plotY,{ignoreX:true})){anchorY=yAxis.pos+plotY}}anchorX=clamp(anchorX,bounds.left-distance,bounds.right+distance);return{anchorX:anchorX,anchorY:anchorY}}function defaultPositioner(anchorX,anchorY,isHeader,boxWidth,alignedLeft){if(alignedLeft===void 0){alignedLeft=true}var y;var x;if(isHeader){y=headerTop?0:adjustedPlotHeight;x=clamp(anchorX-boxWidth/2,bounds.left,bounds.right-boxWidth-(tooltip.outside?chartLeft:0))}else{y=anchorY-distributionBoxTop;x=alignedLeft?anchorX-boxWidth-distance:anchorX+distance;x=clamp(x,alignedLeft?x:bounds.left,bounds.right)}return{x:x,y:y}}function updatePartialTooltip(partialTooltip,point,str){var _a;var tt=partialTooltip;var isHeader=point.isHeader,series=point.series;if(!tt){var attribs={padding:options.padding,r:options.borderRadius};if(!styledMode){attribs.fill=options.backgroundColor;attribs["stroke-width"]=(_a=options.borderWidth)!==null&&_a!==void 0?_a:1}tt=ren.label("",0,0,options[isHeader?"headerShape":"shape"],void 0,void 0,options.useHTML).addClass(tooltip.getClassName(point,true,isHeader)).attr(attribs).add(tooltipLabel)}tt.isActive=true;tt.attr({text:str});if(!styledMode){tt.css(options.style).attr({stroke:options.borderColor||point.color||series.color||"#333333"})}return tt}if(isString(labels)){labels=[false,labels]}var boxes=labels.slice(0,points.length+1).reduce(function(boxes,str,i){if(str!==false&&str!==""){var point=points[i-1]||{isHeader:true,plotX:points[0].plotX,plotY:plotHeight,series:{}};var isHeader=point.isHeader;var owner=isHeader?tooltip:point.series;var tt=owner.tt=updatePartialTooltip(owner.tt,point,str.toString());var bBox=tt.getBBox();var boxWidth=bBox.width+tt.strokeWidth();if(isHeader){headerHeight=bBox.height;adjustedPlotHeight+=headerHeight;if(headerTop){distributionBoxTop-=headerHeight}}var _a=getAnchor(point),anchorX=_a.anchorX,anchorY=_a.anchorY;if(typeof anchorY==="number"){var size=bBox.height+1;var boxPosition=positioner?positioner.call(tooltip,boxWidth,size,point):defaultPositioner(anchorX,anchorY,isHeader,boxWidth);boxes.push({align:positioner?0:void 0,anchorX:anchorX,anchorY:anchorY,boxWidth:boxWidth,point:point,rank:pick(boxPosition.rank,isHeader?1:0),size:size,target:boxPosition.y,tt:tt,x:boxPosition.x})}else{tt.isActive=false}}return boxes},[]);if(!positioner&&boxes.some(function(box){var outside=tooltip.outside;var boxStart=(outside?chartLeft:0)+box.anchorX;if(boxStart<bounds.left&&boxStart+box.boxWidth<bounds.right){return true}return boxStart<chartLeft-bounds.left+box.boxWidth&&bounds.right-boxStart>boxStart})){boxes=boxes.map(function(box){var _a=defaultPositioner(box.anchorX,box.anchorY,box.point.isHeader,box.boxWidth,false),x=_a.x,y=_a.y;return extend(box,{target:y,x:x})})}tooltip.cleanSplit();distribute(boxes,adjustedPlotHeight);var boxExtremes={left:chartLeft,right:chartLeft};boxes.forEach(function(box){var x=box.x,boxWidth=box.boxWidth,isHeader=box.isHeader;if(!isHeader){if(tooltip.outside&&chartLeft+x<boxExtremes.left){boxExtremes.left=chartLeft+x}if(!isHeader&&tooltip.outside&&boxExtremes.left+boxWidth>boxExtremes.right){boxExtremes.right=chartLeft+x}}});boxes.forEach(function(box){var x=box.x,anchorX=box.anchorX,anchorY=box.anchorY,pos=box.pos,isHeader=box.point.isHeader;var attributes={visibility:typeof pos==="undefined"?"hidden":"inherit",x:x,y:(pos||0)+distributionBoxTop,anchorX:anchorX,anchorY:anchorY};if(tooltip.outside&&x<anchorX){var offset=chartLeft-boxExtremes.left;if(offset>0){if(!isHeader){attributes.x=x+offset;attributes.anchorX=anchorX+offset}if(isHeader){attributes.x=(boxExtremes.right-boxExtremes.left)/2;attributes.anchorX=anchorX+offset}}}box.tt.attr(attributes)});var container=tooltip.container,outside=tooltip.outside,renderer=tooltip.renderer;if(outside&&container&&renderer){var _h=tooltipLabel.getBBox(),width=_h.width,height=_h.height,x=_h.x,y=_h.y;renderer.setSize(width+x,height+y,false);container.style.left=boxExtremes.left+"px";container.style.top=chartTop+"px"}if(isSafari){tooltipLabel.attr({opacity:tooltipLabel.opacity===1?.999:1})}};Tooltip.prototype.drawTracker=function(){var tooltip=this;if(!this.shouldStickOnContact()){if(tooltip.tracker){tooltip.tracker=tooltip.tracker.destroy()}return}var chart=tooltip.chart;var label=tooltip.label;var points=tooltip.shared?chart.hoverPoints:chart.hoverPoint;if(!label||!points){return}var box={x:0,y:0,width:0,height:0};var anchorPos=this.getAnchor(points);var labelBBox=label.getBBox();anchorPos[0]+=chart.plotLeft-(label.translateX||0);anchorPos[1]+=chart.plotTop-(label.translateY||0);box.x=Math.min(0,anchorPos[0]);box.y=Math.min(0,anchorPos[1]);box.width=anchorPos[0]<0?Math.max(Math.abs(anchorPos[0]),labelBBox.width-anchorPos[0]):Math.max(Math.abs(anchorPos[0]),labelBBox.width);box.height=anchorPos[1]<0?Math.max(Math.abs(anchorPos[1]),labelBBox.height-Math.abs(anchorPos[1])):Math.max(Math.abs(anchorPos[1]),labelBBox.height);if(tooltip.tracker){tooltip.tracker.attr(box)}else{tooltip.tracker=label.renderer.rect(box).addClass("highcharts-tracker").add(label);if(!chart.styledMode){tooltip.tracker.attr({fill:"rgba(0,0,0,0)"})}}};Tooltip.prototype.styledModeFormat=function(formatString){return formatString.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} '+"{series.options.className} "+'{point.options.className}"')};Tooltip.prototype.headerFooterFormatter=function(point,isFooter){var series=point.series,tooltipOptions=series.tooltipOptions,xAxis=series.xAxis,dateTime=xAxis&&xAxis.dateTime,e={isFooter:isFooter,point:point};var xDateFormat=tooltipOptions.xDateFormat||"",formatString=tooltipOptions[isFooter?"footerFormat":"headerFormat"];fireEvent(this,"headerFormatter",e,function(e){if(dateTime&&!xDateFormat&&isNumber(point.key)){xDateFormat=dateTime.getXDateFormat(point.key,tooltipOptions.dateTimeLabelFormats)}if(dateTime&&xDateFormat){if(isObject(xDateFormat)){var format_1=xDateFormat;dateFormats[0]=function(timestamp){return series.chart.time.dateFormat(format_1,timestamp)};xDateFormat="%0"}(point.tooltipDateKeys||["key"]).forEach(function(key){formatString=formatString.replace(new RegExp("point\\."+key+"([ \\)}])",""),"(point.".concat(key,":").concat(xDateFormat,")$1"))})}if(series.chart.styledMode){formatString=this.styledModeFormat(formatString)}e.text=format(formatString,point,this.chart)});return e.text||""};Tooltip.prototype.update=function(options){this.destroy();this.init(this.chart,merge(true,this.options,options))};Tooltip.prototype.updatePosition=function(point){var _a=this,chart=_a.chart,container=_a.container,distance=_a.distance,options=_a.options,pointer=_a.pointer,renderer=_a.renderer,_b=this.getLabel(),_c=_b.height,height=_c===void 0?0:_c,_d=_b.width,width=_d===void 0?0:_d,_e=pointer.getChartPosition(),left=_e.left,top=_e.top,scaleX=_e.scaleX,scaleY=_e.scaleY,pos=(options.positioner||this.getPosition).call(this,width,height,point),doc=H.doc;var anchorX=(point.plotX||0)+chart.plotLeft,anchorY=(point.plotY||0)+chart.plotTop,pad;if(renderer&&container){if(options.positioner){pos.x+=left-distance;pos.y+=top-distance}pad=(options.borderWidth||0)+2*distance+2;renderer.setSize(clamp(width+pad,0,doc.documentElement.clientWidth)-1,height+pad,false);if(scaleX!==1||scaleY!==1){css(container,{transform:"scale(".concat(scaleX,", ").concat(scaleY,")")});anchorX*=scaleX;anchorY*=scaleY}anchorX+=left-pos.x;anchorY+=top-pos.y}this.move(Math.round(pos.x),Math.round(pos.y||0),anchorX,anchorY)};return Tooltip}();(function(Tooltip){function compose(PointerClass){if(pushUnique(composed,"Core.Tooltip")){addEvent(PointerClass,"afterInit",function(){var chart=this.chart;if(chart.options.tooltip){chart.tooltip=new Tooltip(chart,chart.options.tooltip,this)}})}}Tooltip.compose=compose})(Tooltip||(Tooltip={}));export default Tooltip;"";