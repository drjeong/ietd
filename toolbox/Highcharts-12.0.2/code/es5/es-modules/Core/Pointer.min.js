"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};import Color from"./Color/Color.js";var color=Color.parse;import H from"./Globals.js";var charts=H.charts,composed=H.composed,isTouchDevice=H.isTouchDevice;import U from"./Utilities.js";var addEvent=U.addEvent,attr=U.attr,css=U.css,extend=U.extend,find=U.find,fireEvent=U.fireEvent,isNumber=U.isNumber,isObject=U.isObject,objectEach=U.objectEach,offset=U.offset,pick=U.pick,pushUnique=U.pushUnique,splat=U.splat;var Pointer=function(){function Pointer(chart,options){var _a;this.hasDragged=0;this.pointerCaptureEventsToUnbind=[];this.eventsToUnbind=[];this.options=options;this.chart=chart;this.runChartClick=Boolean((_a=options.chart.events)===null||_a===void 0?void 0:_a.click);this.pinchDown=[];this.setDOMEvents();fireEvent(this,"afterInit")}Pointer.prototype.applyInactiveState=function(points){var activeSeries=[],series;(points||[]).forEach(function(item){series=item.series;activeSeries.push(series);if(series.linkedParent){activeSeries.push(series.linkedParent)}if(series.linkedSeries){activeSeries=activeSeries.concat(series.linkedSeries)}if(series.navigatorSeries){activeSeries.push(series.navigatorSeries)}});this.chart.series.forEach(function(inactiveSeries){if(activeSeries.indexOf(inactiveSeries)===-1){inactiveSeries.setState("inactive",true)}else if(inactiveSeries.options.inactiveOtherPoints){inactiveSeries.setAllPointsToState("inactive")}})};Pointer.prototype.destroy=function(){var pointer=this;this.eventsToUnbind.forEach(function(unbind){return unbind()});this.eventsToUnbind=[];if(!H.chartCount){Pointer.unbindDocumentMouseUp.forEach(function(el){return el.unbind()});Pointer.unbindDocumentMouseUp.length=0;if(Pointer.unbindDocumentTouchEnd){Pointer.unbindDocumentTouchEnd=Pointer.unbindDocumentTouchEnd()}}clearInterval(pointer.tooltipTimeout);objectEach(pointer,function(_val,prop){pointer[prop]=void 0})};Pointer.prototype.getSelectionMarkerAttrs=function(chartX,chartY){var _this=this;var e={args:{chartX:chartX,chartY:chartY},attrs:{},shapeType:"rect"};fireEvent(this,"getSelectionMarkerAttrs",e,function(e){var _a=_this,chart=_a.chart,zoomHor=_a.zoomHor,zoomVert=_a.zoomVert,_b=chart.mouseDownX,mouseDownX=_b===void 0?0:_b,_c=chart.mouseDownY,mouseDownY=_c===void 0?0:_c,attrs=e.attrs;var size;attrs.x=chart.plotLeft;attrs.y=chart.plotTop;attrs.width=zoomHor?1:chart.plotWidth;attrs.height=zoomVert?1:chart.plotHeight;if(zoomHor){size=chartX-mouseDownX;attrs.width=Math.max(1,Math.abs(size));attrs.x=(size>0?0:size)+mouseDownX}if(zoomVert){size=chartY-mouseDownY;attrs.height=Math.max(1,Math.abs(size));attrs.y=(size>0?0:size)+mouseDownY}});return e};Pointer.prototype.drag=function(e){var chart=this.chart,_a=chart.mouseDownX,mouseDownX=_a===void 0?0:_a,_b=chart.mouseDownY,mouseDownY=_b===void 0?0:_b,_c=chart.options.chart,panning=_c.panning,panKey=_c.panKey,selectionMarkerFill=_c.selectionMarkerFill,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,panningEnabled=isObject(panning)?panning.enabled:panning,panKeyPressed=panKey&&e["".concat(panKey,"Key")];var chartX=e.chartX,chartY=e.chartY,clickedInside,selectionMarker=this.selectionMarker;if(selectionMarker&&selectionMarker.touch){return}if(chartX<plotLeft){chartX=plotLeft}else if(chartX>plotLeft+plotWidth){chartX=plotLeft+plotWidth}if(chartY<plotTop){chartY=plotTop}else if(chartY>plotTop+plotHeight){chartY=plotTop+plotHeight}this.hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+Math.pow(mouseDownY-chartY,2));if(this.hasDragged>10){clickedInside=chart.isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop,{visiblePlotOnly:true});var _d=this.getSelectionMarkerAttrs(chartX,chartY),shapeType=_d.shapeType,attrs=_d.attrs;if((chart.hasCartesianSeries||chart.mapView)&&this.hasZoom&&clickedInside&&!panKeyPressed){if(!selectionMarker){this.selectionMarker=selectionMarker=chart.renderer[shapeType]();selectionMarker.attr({class:"highcharts-selection-marker",zIndex:7}).add();if(!chart.styledMode){selectionMarker.attr({fill:selectionMarkerFill||color("#334eff").setOpacity(.25).get()})}}}if(selectionMarker){selectionMarker.attr(attrs)}if(clickedInside&&!selectionMarker&&panningEnabled){chart.pan(e,panning)}}};Pointer.prototype.dragStart=function(e){var chart=this.chart;chart.mouseIsDown=e.type;chart.cancelClick=false;chart.mouseDownX=e.chartX;chart.mouseDownY=e.chartY};Pointer.prototype.getSelectionBox=function(marker){var e={args:{marker:marker},result:marker.getBBox()};fireEvent(this,"getSelectionBox",e);return e.result};Pointer.prototype.drop=function(e){var _this=this;var _a=this,chart=_a.chart,selectionMarker=_a.selectionMarker;var redraw;for(var _i=0,_b=chart.axes;_i<_b.length;_i++){var axis=_b[_i];if(axis.isPanning){axis.isPanning=false;if(axis.options.startOnTick||axis.options.endOnTick||axis.series.some(function(s){return s.boosted})){axis.forceRedraw=true;axis.setExtremes(axis.userMin,axis.userMax,false);redraw=true}}}if(redraw){chart.redraw()}if(selectionMarker&&e){if(this.hasDragged){var from=this.getSelectionBox(selectionMarker);chart.transform({axes:chart.axes.filter(function(a){return a.zoomEnabled&&(a.coll==="xAxis"&&_this.zoomX||a.coll==="yAxis"&&_this.zoomY)}),selection:__assign({originalEvent:e,xAxis:[],yAxis:[]},from),from:from})}if(isNumber(chart.index)){this.selectionMarker=selectionMarker.destroy()}}if(chart&&isNumber(chart.index)){css(chart.container,{cursor:chart._cursor});chart.cancelClick=this.hasDragged>10;chart.mouseIsDown=false;this.hasDragged=0;this.pinchDown=[]}};Pointer.prototype.findNearestKDPoint=function(series,shared,e){var closest;function sort(p1,p2){var _a,_b;var isCloserX=p1.distX-p2.distX,isCloser=p1.dist-p2.dist,isAbove=((_a=p2.series.group)===null||_a===void 0?void 0:_a.zIndex)-((_b=p1.series.group)===null||_b===void 0?void 0:_b.zIndex);var result;if(isCloserX!==0&&shared){result=isCloserX}else if(isCloser!==0){result=isCloser}else if(isAbove!==0){result=isAbove}else{result=p1.series.index>p2.series.index?-1:1}return result}series.forEach(function(s){var noSharedTooltip=s.noSharedTooltip&&shared,compareX=!noSharedTooltip&&s.options.findNearestPointBy.indexOf("y")<0,point=s.searchPoint(e,compareX);if(isObject(point,true)&&point.series&&(!isObject(closest,true)||sort(closest,point)>0)){closest=point}});return closest};Pointer.prototype.getChartCoordinatesFromPoint=function(point,inverted){var _a,_b;var _c=point.series,xAxis=_c.xAxis,yAxis=_c.yAxis,shapeArgs=point.shapeArgs;if(xAxis&&yAxis){var x=(_b=(_a=point.clientX)!==null&&_a!==void 0?_a:point.plotX)!==null&&_b!==void 0?_b:0,y=point.plotY||0;if(point.isNode&&shapeArgs&&isNumber(shapeArgs.x)&&isNumber(shapeArgs.y)){x=shapeArgs.x;y=shapeArgs.y}return inverted?{chartX:yAxis.len+yAxis.pos-y,chartY:xAxis.len+xAxis.pos-x}:{chartX:x+xAxis.pos,chartY:y+yAxis.pos}}if(shapeArgs&&shapeArgs.x&&shapeArgs.y){return{chartX:shapeArgs.x,chartY:shapeArgs.y}}};Pointer.prototype.getChartPosition=function(){if(this.chartPosition){return this.chartPosition}var container=this.chart.container;var pos=offset(container);this.chartPosition={left:pos.left,top:pos.top,scaleX:1,scaleY:1};var offsetHeight=container.offsetHeight,offsetWidth=container.offsetWidth;if(offsetWidth>2&&offsetHeight>2){this.chartPosition.scaleX=pos.width/offsetWidth;this.chartPosition.scaleY=pos.height/offsetHeight}return this.chartPosition};Pointer.prototype.getCoordinates=function(e){var coordinates={xAxis:[],yAxis:[]};for(var _i=0,_a=this.chart.axes;_i<_a.length;_i++){var axis=_a[_i];coordinates[axis.isXAxis?"xAxis":"yAxis"].push({axis:axis,value:axis.toValue(e[axis.horiz?"chartX":"chartY"])})}return coordinates};Pointer.prototype.getHoverData=function(existingHoverPoint,existingHoverSeries,series,isDirectTouch,shared,e){var hoverPoints=[],useExisting=!!(isDirectTouch&&existingHoverPoint),filter=function(s){return s.visible&&!(!shared&&s.directTouch)&&pick(s.options.enableMouseTracking,true)};var hoverSeries=existingHoverSeries,searchSeries,eventArgs={chartX:e?e.chartX:void 0,chartY:e?e.chartY:void 0,shared:shared};fireEvent(this,"beforeGetHoverData",eventArgs);var notSticky=hoverSeries&&!hoverSeries.stickyTracking;searchSeries=notSticky?[hoverSeries]:series.filter(function(s){return s.stickyTracking&&(eventArgs.filter||filter)(s)});var hoverPoint=useExisting||!e?existingHoverPoint:this.findNearestKDPoint(searchSeries,shared,e);hoverSeries=hoverPoint&&hoverPoint.series;if(hoverPoint){if(shared&&!hoverSeries.noSharedTooltip){searchSeries=series.filter(function(s){return eventArgs.filter?eventArgs.filter(s):filter(s)&&!s.noSharedTooltip});searchSeries.forEach(function(s){var point=find(s.points,function(p){return p.x===hoverPoint.x&&!p.isNull});if(isObject(point)){if(s.boosted&&s.boost){point=s.boost.getPoint(point)}hoverPoints.push(point)}})}else{hoverPoints.push(hoverPoint)}}eventArgs={hoverPoint:hoverPoint};fireEvent(this,"afterGetHoverData",eventArgs);return{hoverPoint:eventArgs.hoverPoint,hoverSeries:hoverSeries,hoverPoints:hoverPoints}};Pointer.prototype.getPointFromEvent=function(e){var target=e.target,point;while(target&&!point){point=target.point;target=target.parentNode}return point};Pointer.prototype.onTrackerMouseOut=function(e){var chart=this.chart;var relatedTarget=e.relatedTarget;var series=chart.hoverSeries;this.isDirectTouch=false;if(series&&relatedTarget&&!series.stickyTracking&&!this.inClass(relatedTarget,"highcharts-tooltip")&&(!this.inClass(relatedTarget,"highcharts-series-"+series.index)||!this.inClass(relatedTarget,"highcharts-tracker"))){series.onMouseOut()}};Pointer.prototype.inClass=function(element,className){var elem=element,elemClassName;while(elem){elemClassName=attr(elem,"class");if(elemClassName){if(elemClassName.indexOf(className)!==-1){return true}if(elemClassName.indexOf("highcharts-container")!==-1){return false}}elem=elem.parentElement}};Pointer.prototype.normalize=function(e,chartPosition){var touches=e.touches;var ePos=touches?touches.length?touches.item(0):pick(touches.changedTouches,e.changedTouches)[0]:e;if(!chartPosition){chartPosition=this.getChartPosition()}var chartX=ePos.pageX-chartPosition.left,chartY=ePos.pageY-chartPosition.top;chartX/=chartPosition.scaleX;chartY/=chartPosition.scaleY;return extend(e,{chartX:Math.round(chartX),chartY:Math.round(chartY)})};Pointer.prototype.onContainerClick=function(e){var chart=this.chart;var hoverPoint=chart.hoverPoint;var pEvt=this.normalize(e);var plotLeft=chart.plotLeft;var plotTop=chart.plotTop;if(!chart.cancelClick){if(hoverPoint&&this.inClass(pEvt.target,"highcharts-tracker")){fireEvent(hoverPoint.series,"click",extend(pEvt,{point:hoverPoint}));if(chart.hoverPoint){hoverPoint.firePointEvent("click",pEvt)}}else{extend(pEvt,this.getCoordinates(pEvt));if(chart.isInsidePlot(pEvt.chartX-plotLeft,pEvt.chartY-plotTop,{visiblePlotOnly:true})){fireEvent(chart,"click",pEvt)}}}};Pointer.prototype.onContainerMouseDown=function(e){var _a;var isPrimaryButton=((e.buttons||e.button)&1)===1;e=this.normalize(e);if(H.isFirefox&&e.button!==0){this.onContainerMouseMove(e)}if(typeof e.button==="undefined"||isPrimaryButton){this.zoomOption(e);if(isPrimaryButton){(_a=e.preventDefault)===null||_a===void 0?void 0:_a.call(e)}this.dragStart(e)}};Pointer.prototype.onContainerMouseLeave=function(e){var pointer=(charts[pick(Pointer.hoverChartIndex,-1)]||{}).pointer;e=this.normalize(e);this.onContainerMouseMove(e);if(pointer&&!this.inClass(e.relatedTarget,"highcharts-tooltip")){pointer.reset();pointer.chartPosition=void 0}};Pointer.prototype.onContainerMouseEnter=function(){delete this.chartPosition};Pointer.prototype.onContainerMouseMove=function(e){var chart=this.chart,tooltip=chart.tooltip,pEvt=this.normalize(e);this.setHoverChartIndex(e);if(chart.mouseIsDown==="mousedown"||this.touchSelect(pEvt)){this.drag(pEvt)}if(!chart.openMenu&&(this.inClass(pEvt.target,"highcharts-tracker")||chart.isInsidePlot(pEvt.chartX-chart.plotLeft,pEvt.chartY-chart.plotTop,{visiblePlotOnly:true}))&&!(tooltip&&tooltip.shouldStickOnContact(pEvt))){if(this.inClass(pEvt.target,"highcharts-no-tooltip")){this.reset(false,0)}else{this.runPointActions(pEvt)}}};Pointer.prototype.onDocumentTouchEnd=function(e){this.onDocumentMouseUp(e)};Pointer.prototype.onContainerTouchMove=function(e){if(this.touchSelect(e)){this.onContainerMouseMove(e)}else{this.touch(e)}};Pointer.prototype.onContainerTouchStart=function(e){if(this.touchSelect(e)){this.onContainerMouseDown(e)}else{this.zoomOption(e);this.touch(e,true)}};Pointer.prototype.onDocumentMouseMove=function(e){var chart=this.chart;var tooltip=chart.tooltip;var chartPosition=this.chartPosition;var pEvt=this.normalize(e,chartPosition);if(chartPosition&&!chart.isInsidePlot(pEvt.chartX-chart.plotLeft,pEvt.chartY-chart.plotTop,{visiblePlotOnly:true})&&!(tooltip&&tooltip.shouldStickOnContact(pEvt))&&(pEvt.target===chart.container.ownerDocument||!this.inClass(pEvt.target,"highcharts-tracker"))){this.reset()}};Pointer.prototype.onDocumentMouseUp=function(e){var _a,_b;(_b=(_a=charts[pick(Pointer.hoverChartIndex,-1)])===null||_a===void 0?void 0:_a.pointer)===null||_b===void 0?void 0:_b.drop(e)};Pointer.prototype.pinch=function(e){var _this=this;var pointer=this,chart=pointer.chart,hasZoom=pointer.hasZoom,lastTouches=pointer.lastTouches,touches=[].map.call(e.touches||[],function(touch){return pointer.normalize(touch)}),touchesLength=touches.length,fireClickEvent=touchesLength===1&&(pointer.inClass(e.target,"highcharts-tracker")&&chart.runTrackerClick||pointer.runChartClick),tooltip=chart.tooltip,followTouchMove=touchesLength===1&&pick(tooltip===null||tooltip===void 0?void 0:tooltip.options.followTouchMove,true);if(touchesLength>1){pointer.initiated=true}else if(followTouchMove){pointer.initiated=false}if(hasZoom&&pointer.initiated&&!fireClickEvent&&e.cancelable!==false){e.preventDefault()}if(e.type==="touchstart"){pointer.pinchDown=touches;pointer.res=true;chart.mouseDownX=e.chartX}else if(followTouchMove){this.runPointActions(pointer.normalize(e))}else if(lastTouches){fireEvent(chart,"touchpan",{originalEvent:e,touches:touches},function(){var boxFromTouches=function(touches){var finger0=touches[0],finger1=touches[1]||finger0;return{x:finger0.chartX,y:finger0.chartY,width:finger1.chartX-finger0.chartX,height:finger1.chartY-finger0.chartY}};chart.transform({axes:chart.axes.filter(function(axis){return axis.zoomEnabled&&(_this.zoomHor&&axis.horiz||_this.zoomVert&&!axis.horiz)}),to:boxFromTouches(touches),from:boxFromTouches(lastTouches),trigger:e.type})});if(pointer.res){pointer.res=false;this.reset(false,0)}}pointer.lastTouches=touches};Pointer.prototype.reset=function(allowMove,delay){var pointer=this,chart=pointer.chart,hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint,hoverPoints=chart.hoverPoints,tooltip=chart.tooltip,tooltipPoints=tooltip&&tooltip.shared?hoverPoints:hoverPoint;if(allowMove&&tooltipPoints){splat(tooltipPoints).forEach(function(point){if(point.series.isCartesian&&typeof point.plotX==="undefined"){allowMove=false}})}if(allowMove){if(tooltip&&tooltipPoints&&splat(tooltipPoints).length){tooltip.refresh(tooltipPoints);if(tooltip.shared&&hoverPoints){hoverPoints.forEach(function(point){point.setState(point.state,true);if(point.series.isCartesian){if(point.series.xAxis.crosshair){point.series.xAxis.drawCrosshair(null,point)}if(point.series.yAxis.crosshair){point.series.yAxis.drawCrosshair(null,point)}}})}else if(hoverPoint){hoverPoint.setState(hoverPoint.state,true);chart.axes.forEach(function(axis){if(axis.crosshair&&hoverPoint.series[axis.coll]===axis){axis.drawCrosshair(null,hoverPoint)}})}}}else{if(hoverPoint){hoverPoint.onMouseOut()}if(hoverPoints){hoverPoints.forEach(function(point){point.setState()})}if(hoverSeries){hoverSeries.onMouseOut()}if(tooltip){tooltip.hide(delay)}if(pointer.unDocMouseMove){pointer.unDocMouseMove=pointer.unDocMouseMove()}chart.axes.forEach(function(axis){axis.hideCrosshair()});chart.hoverPoints=chart.hoverPoint=void 0}};Pointer.prototype.runPointActions=function(e,p,force){var pointer=this,chart=pointer.chart,series=chart.series,tooltip=chart.tooltip&&chart.tooltip.options.enabled?chart.tooltip:void 0,shared=tooltip?tooltip.shared:false;var hoverPoint=p||chart.hoverPoint,hoverSeries=hoverPoint&&hoverPoint.series||chart.hoverSeries;var isDirectTouch=(!e||e.type!=="touchmove")&&(!!p||hoverSeries&&hoverSeries.directTouch&&pointer.isDirectTouch),hoverData=this.getHoverData(hoverPoint,hoverSeries,series,isDirectTouch,shared,e);hoverPoint=hoverData.hoverPoint;hoverSeries=hoverData.hoverSeries;var points=hoverData.hoverPoints,followPointer=hoverSeries&&hoverSeries.tooltipOptions.followPointer&&!hoverSeries.tooltipOptions.split,useSharedTooltip=shared&&hoverSeries&&!hoverSeries.noSharedTooltip;if(hoverPoint&&(force||hoverPoint!==chart.hoverPoint||tooltip&&tooltip.isHidden)){(chart.hoverPoints||[]).forEach(function(p){if(points.indexOf(p)===-1){p.setState()}});if(chart.hoverSeries!==hoverSeries){hoverSeries.onMouseOver()}pointer.applyInactiveState(points);(points||[]).forEach(function(p){p.setState("hover")});if(chart.hoverPoint){chart.hoverPoint.firePointEvent("mouseOut")}if(!hoverPoint.series){return}chart.hoverPoints=points;chart.hoverPoint=hoverPoint;hoverPoint.firePointEvent("mouseOver",void 0,function(){if(tooltip&&hoverPoint){tooltip.refresh(useSharedTooltip?points:hoverPoint,e)}})}else if(followPointer&&tooltip&&!tooltip.isHidden){var anchor=tooltip.getAnchor([{}],e);if(chart.isInsidePlot(anchor[0],anchor[1],{visiblePlotOnly:true})){tooltip.updatePosition({plotX:anchor[0],plotY:anchor[1]})}}if(!pointer.unDocMouseMove){pointer.unDocMouseMove=addEvent(chart.container.ownerDocument,"mousemove",function(e){var _a,_b,_c;return(_c=(_b=charts[(_a=Pointer.hoverChartIndex)!==null&&_a!==void 0?_a:-1])===null||_b===void 0?void 0:_b.pointer)===null||_c===void 0?void 0:_c.onDocumentMouseMove(e)});pointer.eventsToUnbind.push(pointer.unDocMouseMove)}chart.axes.forEach(function drawAxisCrosshair(axis){var snap=pick((axis.crosshair||{}).snap,true);var point;if(snap){point=chart.hoverPoint;if(!point||point.series[axis.coll]!==axis){point=find(points,function(p){return p.series&&p.series[axis.coll]===axis})}}if(point||!snap){axis.drawCrosshair(e,point)}else{axis.hideCrosshair()}})};Pointer.prototype.setDOMEvents=function(){var _this=this;var container=this.chart.container,ownerDoc=container.ownerDocument;container.onmousedown=this.onContainerMouseDown.bind(this);container.onmousemove=this.onContainerMouseMove.bind(this);container.onclick=this.onContainerClick.bind(this);this.eventsToUnbind.push(addEvent(container,"mouseenter",this.onContainerMouseEnter.bind(this)),addEvent(container,"mouseleave",this.onContainerMouseLeave.bind(this)));if(!Pointer.unbindDocumentMouseUp.some(function(el){return el.doc===ownerDoc})){Pointer.unbindDocumentMouseUp.push({doc:ownerDoc,unbind:addEvent(ownerDoc,"mouseup",this.onDocumentMouseUp.bind(this))})}var parent=this.chart.renderTo.parentElement;while(parent&&parent.tagName!=="BODY"){this.eventsToUnbind.push(addEvent(parent,"scroll",function(){delete _this.chartPosition}));parent=parent.parentElement}this.eventsToUnbind.push(addEvent(container,"touchstart",this.onContainerTouchStart.bind(this),{passive:false}),addEvent(container,"touchmove",this.onContainerTouchMove.bind(this),{passive:false}));if(!Pointer.unbindDocumentTouchEnd){Pointer.unbindDocumentTouchEnd=addEvent(ownerDoc,"touchend",this.onDocumentTouchEnd.bind(this),{passive:false})}this.setPointerCapture();addEvent(this.chart,"redraw",this.setPointerCapture.bind(this))};Pointer.prototype.setPointerCapture=function(){var _a,_b;if(!isTouchDevice){return}var pointer=this,events=pointer.pointerCaptureEventsToUnbind,chart=pointer.chart,container=chart.container,followTouchMove=pick((_a=chart.options.tooltip)===null||_a===void 0?void 0:_a.followTouchMove,true),shouldHave=followTouchMove&&chart.series.some(function(series){return series.options.findNearestPointBy.indexOf("y")>-1});if(!pointer.hasPointerCapture&&shouldHave){events.push(addEvent(container,"pointerdown",function(e){var _a,_b;if((_a=e.target)===null||_a===void 0?void 0:_a.hasPointerCapture(e.pointerId)){(_b=e.target)===null||_b===void 0?void 0:_b.releasePointerCapture(e.pointerId)}}),addEvent(container,"pointermove",function(e){var _a,_b;(_b=(_a=chart.pointer)===null||_a===void 0?void 0:_a.getPointFromEvent(e))===null||_b===void 0?void 0:_b.onMouseOver(e)}));if(!chart.styledMode){css(container,{"touch-action":"none"})}container.className+=" highcharts-no-touch-action";pointer.hasPointerCapture=true}else if(pointer.hasPointerCapture&&!shouldHave){events.forEach(function(e){return e()});events.length=0;if(!chart.styledMode){css(container,{"touch-action":pick((_b=chart.options.chart.style)===null||_b===void 0?void 0:_b["touch-action"],"manipulation")})}container.className=container.className.replace(" highcharts-no-touch-action","");pointer.hasPointerCapture=false}};Pointer.prototype.setHoverChartIndex=function(e){var _a;var chart=this.chart;var hoverChart=H.charts[pick(Pointer.hoverChartIndex,-1)];if(hoverChart&&hoverChart!==chart){var relatedTargetObj={relatedTarget:chart.container};if(e&&!(e===null||e===void 0?void 0:e.relatedTarget)){e=__assign(__assign({},relatedTargetObj),e)}(_a=hoverChart.pointer)===null||_a===void 0?void 0:_a.onContainerMouseLeave(e||relatedTargetObj)}if(!hoverChart||!hoverChart.mouseIsDown){Pointer.hoverChartIndex=chart.index}};Pointer.prototype.touch=function(e,start){var _a=this,chart=_a.chart,_b=_a.pinchDown,pinchDown=_b===void 0?[]:_b;var hasMoved,isInside;this.setHoverChartIndex();e=this.normalize(e);if(e.touches.length===1){isInside=chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop,{visiblePlotOnly:true});if(isInside&&!chart.openMenu){if(start){this.runPointActions(e)}if(e.type==="touchmove"){hasMoved=pinchDown[0]?Math.pow(pinchDown[0].chartX-e.chartX,2)+Math.pow(pinchDown[0].chartY-e.chartY,2)>=16:false}if(pick(hasMoved,true)){this.pinch(e)}}else if(start){this.reset()}}else if(e.touches.length===2){this.pinch(e)}};Pointer.prototype.touchSelect=function(e){return Boolean(this.chart.zooming.singleTouch&&e.touches&&e.touches.length===1)};Pointer.prototype.zoomOption=function(e){var chart=this.chart,inverted=chart.inverted;var zoomType=chart.zooming.type||"",zoomX,zoomY;if(/touch/.test(e.type)){zoomType=pick(chart.zooming.pinchType,zoomType)}this.zoomX=zoomX=/x/.test(zoomType);this.zoomY=zoomY=/y/.test(zoomType);this.zoomHor=zoomX&&!inverted||zoomY&&inverted;this.zoomVert=zoomY&&!inverted||zoomX&&inverted;this.hasZoom=zoomX||zoomY};Pointer.unbindDocumentMouseUp=[];return Pointer}();(function(Pointer){function compose(ChartClass){if(pushUnique(composed,"Core.Pointer")){addEvent(ChartClass,"beforeRender",function(){this.pointer=new Pointer(this,this.options)})}}Pointer.compose=compose})(Pointer||(Pointer={}));export default Pointer;"";