"use strict";import U from"../Utilities.js";var addEvent=U.addEvent,normalizeTickInterval=U.normalizeTickInterval,pick=U.pick;var LogarithmicAxis;(function(LogarithmicAxis){function compose(AxisClass){if(!AxisClass.keepProps.includes("logarithmic")){AxisClass.keepProps.push("logarithmic");addEvent(AxisClass,"afterSetType",onAfterSetType);addEvent(AxisClass,"afterInit",onAfterInit)}return AxisClass}LogarithmicAxis.compose=compose;function onAfterSetType(){var _a;if(this.type!=="logarithmic"){this.logarithmic=void 0}else{(_a=this.logarithmic)!==null&&_a!==void 0?_a:this.logarithmic=new Additions(this)}}function onAfterInit(){var axis=this;var log=axis.logarithmic;if(log){axis.lin2val=function(num){return log.lin2log(num)};axis.val2lin=function(num){return log.log2lin(num)}}}var Additions=function(){function Additions(axis){this.axis=axis}Additions.prototype.getLogTickPositions=function(interval,min,max,minor){var log=this;var axis=log.axis;var axisLength=axis.len;var options=axis.options;var positions=[];if(!minor){log.minorAutoInterval=void 0}if(interval>=.5){interval=Math.round(interval);positions=axis.getLinearTickPositions(interval,min,max)}else if(interval>=.08){var roundedMin=Math.floor(min);var intermediate=void 0,i=void 0,j=void 0,len=void 0,pos=void 0,lastPos=void 0,break2=void 0;if(interval>.3){intermediate=[1,2,4]}else if(interval>.15){intermediate=[1,2,4,6,8]}else{intermediate=[1,2,3,4,5,6,7,8,9]}for(i=roundedMin;i<max+1&&!break2;i++){len=intermediate.length;for(j=0;j<len&&!break2;j++){pos=log.log2lin(log.lin2log(i)*intermediate[j]);if(pos>min&&(!minor||lastPos<=max)&&typeof lastPos!=="undefined"){positions.push(lastPos)}if(lastPos>max){break2=true}lastPos=pos}}}else{var realMin=log.lin2log(min),realMax=log.lin2log(max),tickIntervalOption=minor?axis.getMinorTickInterval():options.tickInterval,filteredTickIntervalOption=tickIntervalOption==="auto"?null:tickIntervalOption,tickPixelIntervalOption=options.tickPixelInterval/(minor?5:1),totalPixelLength=minor?axisLength/axis.tickPositions.length:axisLength;interval=pick(filteredTickIntervalOption,log.minorAutoInterval,(realMax-realMin)*tickPixelIntervalOption/(totalPixelLength||1));interval=normalizeTickInterval(interval);positions=axis.getLinearTickPositions(interval,realMin,realMax).map(log.log2lin);if(!minor){log.minorAutoInterval=interval/5}}if(!minor){axis.tickInterval=interval}return positions};Additions.prototype.lin2log=function(num){return Math.pow(10,num)};Additions.prototype.log2lin=function(num){return Math.log(num)/Math.LN10};return Additions}();LogarithmicAxis.Additions=Additions})(LogarithmicAxis||(LogarithmicAxis={}));export default LogarithmicAxis;