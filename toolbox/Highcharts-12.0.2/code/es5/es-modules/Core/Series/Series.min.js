"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};var __spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};import A from"../Animation/AnimationUtilities.js";var animObject=A.animObject,setAnimation=A.setAnimation;import DataTableCore from"../../Data/DataTableCore.js";import D from"../Defaults.js";var defaultOptions=D.defaultOptions;import F from"../Foundation.js";var registerEventOptions=F.registerEventOptions;import H from"../Globals.js";var svg=H.svg,win=H.win;import LegendSymbol from"../Legend/LegendSymbol.js";import Point from"./Point.js";import SeriesDefaults from"./SeriesDefaults.js";import SeriesRegistry from"./SeriesRegistry.js";var seriesTypes=SeriesRegistry.seriesTypes;import SVGElement from"../Renderer/SVG/SVGElement.js";import U from"../Utilities.js";var arrayMax=U.arrayMax,arrayMin=U.arrayMin,clamp=U.clamp,correctFloat=U.correctFloat,crisp=U.crisp,defined=U.defined,destroyObjectProperties=U.destroyObjectProperties,diffObjects=U.diffObjects,erase=U.erase,error=U.error,extend=U.extend,find=U.find,fireEvent=U.fireEvent,getClosestDistance=U.getClosestDistance,getNestedProperty=U.getNestedProperty,insertItem=U.insertItem,isArray=U.isArray,isNumber=U.isNumber,isString=U.isString,merge=U.merge,objectEach=U.objectEach,pick=U.pick,removeEvent=U.removeEvent,syncTimeout=U.syncTimeout;var Series=function(){function Series(){this.zoneAxis="y"}Series.prototype.init=function(chart,userOptions){var _a;fireEvent(this,"init",{options:userOptions});(_a=this.dataTable)!==null&&_a!==void 0?_a:this.dataTable=new DataTableCore;var series=this,chartSeries=chart.series;this.eventsToUnbind=[];series.chart=chart;series.options=series.setOptions(userOptions);var options=series.options,visible=options.visible!==false;series.linkedSeries=[];series.bindAxes();extend(series,{name:options.name,state:"",visible:visible,selected:options.selected===true});registerEventOptions(this,options);var events=options.events;if(events&&events.click||options.point&&options.point.events&&options.point.events.click||options.allowPointSelect){chart.runTrackerClick=true}series.getColor();series.getSymbol();if(series.isCartesian){chart.hasCartesianSeries=true}var lastSeries;if(chartSeries.length){lastSeries=chartSeries[chartSeries.length-1]}series._i=pick(lastSeries&&lastSeries._i,-1)+1;series.opacity=series.options.opacity;chart.orderItems("series",insertItem(this,chartSeries));if(options.dataSorting&&options.dataSorting.enabled){series.setDataSortingOptions()}else if(!series.points&&!series.data){series.setData(options.data,false)}fireEvent(this,"afterInit")};Series.prototype.is=function(type){return seriesTypes[type]&&this instanceof seriesTypes[type]};Series.prototype.bindAxes=function(){var series=this,seriesOptions=series.options,chart=series.chart;var axisOptions;fireEvent(this,"bindAxes",null,function(){(series.axisTypes||[]).forEach(function(coll){(chart[coll]||[]).forEach(function(axis){axisOptions=axis.options;if(pick(seriesOptions[coll],0)===axis.index||typeof seriesOptions[coll]!=="undefined"&&seriesOptions[coll]===axisOptions.id){insertItem(series,axis.series);series[coll]=axis;axis.isDirty=true}});if(!series[coll]&&series.optionalAxis!==coll){error(18,true,chart)}})});fireEvent(this,"afterBindAxes")};Series.prototype.hasData=function(){return this.visible&&typeof this.dataMax!=="undefined"&&typeof this.dataMin!=="undefined"||this.visible&&this.dataTable.rowCount>0};Series.prototype.hasMarkerChanged=function(options,oldOptions){var marker=options.marker,oldMarker=oldOptions.marker||{};return marker&&(oldMarker.enabled&&!marker.enabled||oldMarker.symbol!==marker.symbol||oldMarker.height!==marker.height||oldMarker.width!==marker.width)};Series.prototype.autoIncrement=function(x){var _a,_b;var options=this.options,_c=this.options,pointIntervalUnit=_c.pointIntervalUnit,relativeXValue=_c.relativeXValue,time=this.chart.time,xIncrement=(_b=(_a=this.xIncrement)!==null&&_a!==void 0?_a:time.parse(options.pointStart))!==null&&_b!==void 0?_b:0;var pointInterval;this.pointInterval=pointInterval=pick(this.pointInterval,options.pointInterval,1);if(relativeXValue&&isNumber(x)){pointInterval*=x}if(pointIntervalUnit){var d=time.toParts(xIncrement);if(pointIntervalUnit==="day"){d[2]+=pointInterval}else if(pointIntervalUnit==="month"){d[1]+=pointInterval}else if(pointIntervalUnit==="year"){d[0]+=pointInterval}pointInterval=time.makeTime.apply(time,d)-xIncrement}if(relativeXValue&&isNumber(x)){return xIncrement+pointInterval}this.xIncrement=xIncrement+pointInterval;return xIncrement};Series.prototype.setDataSortingOptions=function(){var options=this.options;extend(this,{requireSorting:false,sorted:false,enabledDataSorting:true,allowDG:false});if(!defined(options.pointRange)){options.pointRange=1}};Series.prototype.setOptions=function(itemOptions){var _a,_b;var chart=this.chart,chartOptions=chart.options,plotOptions=chartOptions.plotOptions,userOptions=chart.userOptions||{},seriesUserOptions=merge(itemOptions),styledMode=chart.styledMode,e={plotOptions:plotOptions,userOptions:seriesUserOptions};var zone;fireEvent(this,"setOptions",e);var typeOptions=e.plotOptions[this.type],userPlotOptions=userOptions.plotOptions||{},userPlotOptionsSeries=userPlotOptions.series||{},defaultPlotOptionsType=defaultOptions.plotOptions[this.type]||{},userPlotOptionsType=userPlotOptions[this.type]||{};this.userOptions=e.userOptions;var options=merge(typeOptions,plotOptions.series,userPlotOptionsType,seriesUserOptions);this.tooltipOptions=merge(defaultOptions.tooltip,(_a=defaultOptions.plotOptions.series)===null||_a===void 0?void 0:_a.tooltip,defaultPlotOptionsType===null||defaultPlotOptionsType===void 0?void 0:defaultPlotOptionsType.tooltip,chart.userOptions.tooltip,(_b=userPlotOptions.series)===null||_b===void 0?void 0:_b.tooltip,userPlotOptionsType.tooltip,seriesUserOptions.tooltip);this.stickyTracking=pick(seriesUserOptions.stickyTracking,userPlotOptionsType.stickyTracking,userPlotOptionsSeries.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?true:options.stickyTracking);if(typeOptions.marker===null){delete options.marker}this.zoneAxis=options.zoneAxis||"y";var zones=this.zones=(options.zones||[]).map(function(z){return __assign({},z)});if((options.negativeColor||options.negativeFillColor)&&!options.zones){zone={value:options[this.zoneAxis+"Threshold"]||options.threshold||0,className:"highcharts-negative"};if(!styledMode){zone.color=options.negativeColor;zone.fillColor=options.negativeFillColor}zones.push(zone)}if(zones.length&&defined(zones[zones.length-1].value)){zones.push(styledMode?{}:{color:this.color,fillColor:this.fillColor})}fireEvent(this,"afterSetOptions",{options:options});return options};Series.prototype.getName=function(){return pick(this.options.name,"Series "+(this.index+1))};Series.prototype.getCyclic=function(prop,value,defaults){var chart=this.chart,indexName="".concat(prop,"Index"),counterName="".concat(prop,"Counter"),len=(defaults===null||defaults===void 0?void 0:defaults.length)||chart.options.chart.colorCount;var i,setting;if(!value){setting=pick(prop==="color"?this.options.colorIndex:void 0,this[indexName]);if(defined(setting)){i=setting}else{if(!chart.series.length){chart[counterName]=0}i=chart[counterName]%len;chart[counterName]+=1}if(defaults){value=defaults[i]}}if(typeof i!=="undefined"){this[indexName]=i}this[prop]=value};Series.prototype.getColor=function(){if(this.chart.styledMode){this.getCyclic("color")}else if(this.options.colorByPoint){this.color="#cccccc"}else{this.getCyclic("color",this.options.color||defaultOptions.plotOptions[this.type].color,this.chart.options.colors)}};Series.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]};Series.prototype.getSymbol=function(){var seriesMarkerOption=this.options.marker;this.getCyclic("symbol",seriesMarkerOption.symbol,this.chart.options.symbols)};Series.prototype.getColumn=function(columnName,modified){return(modified?this.dataTable.modified:this.dataTable).getColumn(columnName,true)||[]};Series.prototype.findPointIndex=function(optionsObject,fromIndex){var id=optionsObject.id,x=optionsObject.x,oldData=this.points,dataSorting=this.options.dataSorting;var matchingPoint,matchedById,pointIndex;if(id){var item=this.chart.get(id);if(item instanceof Point){matchingPoint=item}}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){var matcher=function(oldPoint){return!oldPoint.touched&&oldPoint.index===optionsObject.index};if(dataSorting&&dataSorting.matchByName){matcher=function(oldPoint){return!oldPoint.touched&&oldPoint.name===optionsObject.name}}else if(this.options.relativeXValue){matcher=function(oldPoint){return!oldPoint.touched&&oldPoint.options.x===optionsObject.x}}matchingPoint=find(oldData,matcher);if(!matchingPoint){return void 0}}if(matchingPoint){pointIndex=matchingPoint&&matchingPoint.index;if(typeof pointIndex!=="undefined"){matchedById=true}}if(typeof pointIndex==="undefined"&&isNumber(x)){pointIndex=this.getColumn("x").indexOf(x,fromIndex)}if(pointIndex!==-1&&typeof pointIndex!=="undefined"&&this.cropped){pointIndex=pointIndex>=this.cropStart?pointIndex-this.cropStart:pointIndex}if(!matchedById&&isNumber(pointIndex)&&oldData[pointIndex]&&oldData[pointIndex].touched){pointIndex=void 0}return pointIndex};Series.prototype.updateData=function(data,animation){var options=this.options,dataSorting=options.dataSorting,oldData=this.points,pointsToAdd=[],requireSorting=this.requireSorting,equalLength=data.length===oldData.length;var hasUpdatedByKey,i,point,lastIndex,succeeded=true;this.xIncrement=null;data.forEach(function(pointOptions,i){var optionsObject=defined(pointOptions)&&this.pointClass.prototype.optionsToObject.call({series:this},pointOptions)||{};var pointIndex;var x=optionsObject.x,id=optionsObject.id;if(id||isNumber(x)){pointIndex=this.findPointIndex(optionsObject,lastIndex);if(pointIndex===-1||typeof pointIndex==="undefined"){pointsToAdd.push(pointOptions)}else if(oldData[pointIndex]&&pointOptions!==options.data[pointIndex]){oldData[pointIndex].update(pointOptions,false,null,false);oldData[pointIndex].touched=true;if(requireSorting){lastIndex=pointIndex+1}}else if(oldData[pointIndex]){oldData[pointIndex].touched=true}if(!equalLength||i!==pointIndex||dataSorting&&dataSorting.enabled||this.hasDerivedData){hasUpdatedByKey=true}}else{pointsToAdd.push(pointOptions)}},this);if(hasUpdatedByKey){i=oldData.length;while(i--){point=oldData[i];if(point&&!point.touched&&point.remove){point.remove(false,animation)}}}else if(equalLength&&(!dataSorting||!dataSorting.enabled)){data.forEach(function(point,i){if(point!==oldData[i].y&&!oldData[i].destroyed){oldData[i].update(point,false,null,false)}});pointsToAdd.length=0}else{succeeded=false}oldData.forEach(function(point){if(point){point.touched=false}});if(!succeeded){return false}pointsToAdd.forEach(function(point){this.addPoint(point,false,null,null,false)},this);var xData=this.getColumn("x");if(this.xIncrement===null&&xData.length){this.xIncrement=arrayMax(xData);this.autoIncrement()}return true};Series.prototype.dataColumnKeys=function(){return __spreadArray(["x"],this.pointArrayMap||["y"],true)};Series.prototype.setData=function(data,redraw,animation,updatePoints){var _a,_b;var _c,_d;if(redraw===void 0){redraw=true}var series=this,oldData=series.points,oldDataLength=oldData&&oldData.length||0,options=series.options,chart=series.chart,dataSorting=options.dataSorting,xAxis=series.xAxis,turboThreshold=options.turboThreshold,table=this.dataTable,dataColumnKeys=this.dataColumnKeys(),pointValKey=series.pointValKey||"y",pointArrayMap=series.pointArrayMap||[],valueCount=pointArrayMap.length,keys=options.keys;var i,updatedData,indexOfX=0,indexOfY=1,copiedData;if(!chart.options.chart.allowMutatingData){if(options.data){delete series.options.data}if(series.userOptions.data){delete series.userOptions.data}copiedData=merge(true,data)}data=copiedData||data||[];var dataLength=data.length;if(dataSorting&&dataSorting.enabled){data=this.sortData(data)}if(chart.options.chart.allowMutatingData&&updatePoints!==false&&dataLength&&oldDataLength&&!series.cropped&&!series.hasGroupedData&&series.visible&&!series.boosted){updatedData=this.updateData(data,animation)}if(!updatedData){series.xIncrement=null;series.colorCounter=0;var runTurbo=turboThreshold&&dataLength>turboThreshold;if(runTurbo){var firstPoint=series.getFirstValidPoint(data),lastPoint=series.getFirstValidPoint(data,dataLength-1,-1),isShortArray=function(a){return Boolean(isArray(a)&&(keys||isNumber(a[0])))};if(isNumber(firstPoint)&&isNumber(lastPoint)){var x=[],valueData=[];for(var _e=0,data_1=data;_e<data_1.length;_e++){var value=data_1[_e];x.push(this.autoIncrement());valueData.push(value)}table.setColumns((_a={x:x},_a[pointValKey]=valueData,_a))}else if(isShortArray(firstPoint)&&isShortArray(lastPoint)){if(valueCount){var autoX=firstPoint.length===valueCount?1:0,colArray_1=new Array(dataColumnKeys.length).fill(0).map(function(){return[]});for(var _f=0,_g=data;_f<_g.length;_f++){var pt=_g[_f];if(autoX){colArray_1[0].push(this.autoIncrement())}for(var j=autoX;j<=valueCount;j++){(_c=colArray_1[j])===null||_c===void 0?void 0:_c.push(pt[j-autoX])}}table.setColumns(dataColumnKeys.reduce(function(columns,columnName,i){columns[columnName]=colArray_1[i];return columns},{}))}else{if(keys){indexOfX=keys.indexOf("x");indexOfY=keys.indexOf("y");indexOfX=indexOfX>=0?indexOfX:0;indexOfY=indexOfY>=0?indexOfY:1}if(firstPoint.length===1){indexOfY=0}var xData=[],valueData=[];if(indexOfX===indexOfY){for(var _h=0,data_2=data;_h<data_2.length;_h++){var pt=data_2[_h];xData.push(this.autoIncrement());valueData.push(pt[indexOfY])}}else{for(var _j=0,data_3=data;_j<data_3.length;_j++){var pt=data_3[_j];xData.push(pt[indexOfX]);valueData.push(pt[indexOfY])}}table.setColumns((_b={x:xData},_b[pointValKey]=valueData,_b))}}else{runTurbo=false}}if(!runTurbo){var columns=dataColumnKeys.reduce(function(columns,columnName){columns[columnName]=[];return columns},{});for(i=0;i<dataLength;i++){var pt=series.pointClass.prototype.applyOptions.apply({series:series},[data[i]]);for(var _k=0,dataColumnKeys_1=dataColumnKeys;_k<dataColumnKeys_1.length;_k++){var key=dataColumnKeys_1[_k];columns[key][i]=pt[key]}}table.setColumns(columns)}if(isString(this.getColumn("y")[0])){error(14,true,chart)}series.data=[];series.options.data=series.userOptions.data=data;i=oldDataLength;while(i--){(_d=oldData[i])===null||_d===void 0?void 0:_d.destroy()}if(xAxis){xAxis.minRange=xAxis.userMinRange}series.isDirty=chart.isDirtyBox=true;series.isDirtyData=!!oldData;animation=false}if(options.legendType==="point"){this.processData();this.generatePoints()}if(redraw){chart.redraw(animation)}};Series.prototype.sortData=function(data){var series=this,options=series.options,dataSorting=options.dataSorting,sortKey=dataSorting.sortKey||"y",getPointOptionsObject=function(series,pointOptions){return defined(pointOptions)&&series.pointClass.prototype.optionsToObject.call({series:series},pointOptions)||{}};data.forEach(function(pointOptions,i){data[i]=getPointOptionsObject(series,pointOptions);data[i].index=i},this);var sortedData=data.concat().sort(function(a,b){var aValue=getNestedProperty(sortKey,a);var bValue=getNestedProperty(sortKey,b);return bValue<aValue?-1:bValue>aValue?1:0});sortedData.forEach(function(point,i){point.x=i},this);if(series.linkedSeries){series.linkedSeries.forEach(function(linkedSeries){var options=linkedSeries.options,seriesData=options.data;if((!options.dataSorting||!options.dataSorting.enabled)&&seriesData){seriesData.forEach(function(pointOptions,i){seriesData[i]=getPointOptionsObject(linkedSeries,pointOptions);if(data[i]){seriesData[i].x=data[i].x;seriesData[i].index=i}});linkedSeries.setData(seriesData,false)}})}return data};Series.prototype.getProcessedData=function(forceExtremesFromAll){var series=this,table=series.dataTable,isCartesian=series.isCartesian,options=series.options,xAxis=series.xAxis,cropThreshold=options.cropThreshold,getExtremesFromAll=forceExtremesFromAll||series.getExtremesFromAll,logarithmic=xAxis===null||xAxis===void 0?void 0:xAxis.logarithmic,dataLength=table.rowCount;var croppedData,cropped,cropStart=0,xExtremes,min,max,xData=series.getColumn("x"),modified=table,updatingNames=false;if(xAxis){xExtremes=xAxis.getExtremes();min=xExtremes.min;max=xExtremes.max;updatingNames=!!(xAxis.categories&&!xAxis.names.length);if(isCartesian&&series.sorted&&!getExtremesFromAll&&(!cropThreshold||dataLength>cropThreshold||series.forceCrop)){if(xData[dataLength-1]<min||xData[0]>max){modified=new DataTableCore}else if(series.getColumn(series.pointValKey||"y").length&&(xData[0]<min||xData[dataLength-1]>max)){croppedData=this.cropData(table,min,max);modified=croppedData.modified;cropStart=croppedData.start;cropped=true}}}xData=modified.getColumn("x")||[];var closestPointRange=getClosestDistance([logarithmic?xData.map(logarithmic.log2lin):xData],function(){return series.requireSorting&&!updatingNames&&error(15,false,series.chart)});return{modified:modified,cropped:cropped,cropStart:cropStart,closestPointRange:closestPointRange}};Series.prototype.processData=function(force){var series=this,xAxis=series.xAxis,table=series.dataTable;if(series.isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force){return false}var processedData=series.getProcessedData();table.modified=processedData.modified;series.cropped=processedData.cropped;series.cropStart=processedData.cropStart;series.closestPointRange=series.basePointRange=processedData.closestPointRange;fireEvent(series,"afterProcessData")};Series.prototype.cropData=function(table,min,max){var xData=table.getColumn("x",true)||[],dataLength=xData.length,columns={};var i,j,start=0,end=dataLength;for(i=0;i<dataLength;i++){if(xData[i]>=min){start=Math.max(0,i-1);break}}for(j=i;j<dataLength;j++){if(xData[j]>max){end=j+1;break}}for(var _a=0,_b=this.dataColumnKeys();_a<_b.length;_a++){var key=_b[_a];var column=table.getColumn(key,true);if(column){columns[key]=column.slice(start,end)}}return{modified:new DataTableCore({columns:columns}),start:start,end:end}};Series.prototype.generatePoints=function(){var _a,_b,_c,_d;var series=this,options=series.options,dataOptions=series.processedData||options.data,table=series.dataTable.modified,xData=series.getColumn("x",true),PointClass=series.pointClass,processedDataLength=table.rowCount,cropStart=series.cropStart||0,hasGroupedData=series.hasGroupedData,keys=options.keys,points=[],groupCropStartIndex=options.dataGrouping&&options.dataGrouping.groupAll?cropStart:0,categories=(_a=series.xAxis)===null||_a===void 0?void 0:_a.categories,pointArrayMap=series.pointArrayMap||["y"],dataColumnKeys=this.dataColumnKeys();var dataLength,cursor,point,i,data=series.data,pOptions;if(!data&&!hasGroupedData){var arr=[];arr.length=(dataOptions===null||dataOptions===void 0?void 0:dataOptions.length)||0;data=series.data=arr}if(keys&&hasGroupedData){series.options.keys=false}for(i=0;i<processedDataLength;i++){cursor=cropStart+i;if(!hasGroupedData){point=data[cursor];pOptions=dataOptions?dataOptions[cursor]:table.getRow(i,pointArrayMap);if(!point&&pOptions!==void 0){data[cursor]=point=new PointClass(series,pOptions,xData[i])}}else{point=new PointClass(series,table.getRow(i,dataColumnKeys)||[]);point.dataGroup=series.groupMap[groupCropStartIndex+i];if((_b=point.dataGroup)===null||_b===void 0?void 0:_b.options){point.options=point.dataGroup.options;extend(point,point.dataGroup.options);delete point.dataLabels}}if(point){point.index=hasGroupedData?groupCropStartIndex+i:cursor;points[i]=point;point.category=(_c=categories===null||categories===void 0?void 0:categories[point.x])!==null&&_c!==void 0?_c:point.x;point.key=(_d=point.name)!==null&&_d!==void 0?_d:point.category}}series.options.keys=keys;if(data&&(processedDataLength!==(dataLength=data.length)||hasGroupedData)){for(i=0;i<dataLength;i++){if(i===cropStart&&!hasGroupedData){i+=processedDataLength}if(data[i]){data[i].destroyElements();data[i].plotX=void 0}}}series.data=data;series.points=points;fireEvent(this,"afterGeneratePoints")};Series.prototype.getXExtremes=function(xData){return{min:arrayMin(xData),max:arrayMax(xData)}};Series.prototype.getExtremes=function(yData,forceExtremesFromAll){var _a;var _b=this,xAxis=_b.xAxis,yAxis=_b.yAxis,getExtremesFromAll=forceExtremesFromAll||this.getExtremesFromAll||this.options.getExtremesFromAll,table=getExtremesFromAll&&this.cropped?this.dataTable:this.dataTable.modified,rowCount=table.rowCount,customData=yData||this.stackedYData,yAxisData=customData?[customData]:((_a=this.keysAffectYAxis||this.pointArrayMap||["y"])===null||_a===void 0?void 0:_a.map(function(key){return table.getColumn(key,true)||[]}))||[],xData=this.getColumn("x",true),activeYData=[],shoulder=this.requireSorting&&!this.is("column")?1:0,positiveValuesOnly=yAxis?yAxis.positiveValuesOnly:false,doAll=getExtremesFromAll||this.cropped||!xAxis;var xExtremes,x,i,xMin=0,xMax=0;if(xAxis){xExtremes=xAxis.getExtremes();xMin=xExtremes.min;xMax=xExtremes.max}for(i=0;i<rowCount;i++){x=xData[i];if(doAll||(xData[i+shoulder]||x)>=xMin&&(xData[i-shoulder]||x)<=xMax){for(var _c=0,yAxisData_1=yAxisData;_c<yAxisData_1.length;_c++){var values=yAxisData_1[_c];var val=values[i];if(isNumber(val)&&(val>0||!positiveValuesOnly)){activeYData.push(val)}}}}var dataExtremes={activeYData:activeYData,dataMin:arrayMin(activeYData),dataMax:arrayMax(activeYData)};fireEvent(this,"afterGetExtremes",{dataExtremes:dataExtremes});return dataExtremes};Series.prototype.applyExtremes=function(){var dataExtremes=this.getExtremes();this.dataMin=dataExtremes.dataMin;this.dataMax=dataExtremes.dataMax;return dataExtremes};Series.prototype.getFirstValidPoint=function(data,start,increment){if(start===void 0){start=0}if(increment===void 0){increment=1}var dataLength=data.length;var i=start;while(i>=0&&i<dataLength){if(defined(data[i])){return data[i]}i+=increment}};Series.prototype.translate=function(){var _a;this.generatePoints();var series=this,options=series.options,stacking=options.stacking,xAxis=series.xAxis,enabledDataSorting=series.enabledDataSorting,yAxis=series.yAxis,points=series.points,dataLength=points.length,pointPlacement=series.pointPlacementToXValue(),dynamicallyPlaced=Boolean(pointPlacement),threshold=options.threshold,stackThreshold=options.startFromThreshold?threshold:0;var i,plotX,lastPlotX,stackIndicator,closestPointRangePx=Number.MAX_VALUE;function limitedRange(val){return clamp(val,-1e9,1e9)}for(i=0;i<dataLength;i++){var point=points[i],xValue=point.x;var stackItem=void 0,stackValues=void 0,yValue=point.y,lowValue=point.low;var stacks=stacking&&((_a=yAxis.stacking)===null||_a===void 0?void 0:_a.stacks[(series.negStacks&&yValue<(stackThreshold?0:threshold)?"-":"")+series.stackKey]);plotX=xAxis.translate(xValue,false,false,false,true,pointPlacement);point.plotX=isNumber(plotX)?correctFloat(limitedRange(plotX)):void 0;if(stacking&&series.visible&&stacks&&stacks[xValue]){stackIndicator=series.getStackIndicator(stackIndicator,xValue,series.index);if(!point.isNull&&stackIndicator.key){stackItem=stacks[xValue];stackValues=stackItem.points[stackIndicator.key]}if(stackItem&&isArray(stackValues)){lowValue=stackValues[0];yValue=stackValues[1];if(lowValue===stackThreshold&&stackIndicator.key===stacks[xValue].base){lowValue=pick(isNumber(threshold)?threshold:yAxis.min)}if(yAxis.positiveValuesOnly&&defined(lowValue)&&lowValue<=0){lowValue=void 0}point.total=point.stackTotal=pick(stackItem.total);point.percentage=defined(point.y)&&stackItem.total?point.y/stackItem.total*100:void 0;point.stackY=yValue;if(!series.irregularWidths){stackItem.setOffset(series.pointXOffset||0,series.barW||0,void 0,void 0,void 0,series.xAxis)}}}point.yBottom=defined(lowValue)?limitedRange(yAxis.translate(lowValue,false,true,false,true)):void 0;if(series.dataModify){yValue=series.dataModify.modifyValue(yValue,i)}var plotY=void 0;if(isNumber(yValue)&&point.plotX!==void 0){plotY=yAxis.translate(yValue,false,true,false,true);plotY=isNumber(plotY)?limitedRange(plotY):void 0}point.plotY=plotY;point.isInside=this.isPointInside(point);point.clientX=dynamicallyPlaced?correctFloat(xAxis.translate(xValue,false,false,false,true,pointPlacement)):plotX;point.negative=(point.y||0)<(threshold||0);if(!point.isNull&&point.visible!==false){if(typeof lastPlotX!=="undefined"){closestPointRangePx=Math.min(closestPointRangePx,Math.abs(plotX-lastPlotX))}lastPlotX=plotX}point.zone=this.zones.length?point.getZone():void 0;if(!point.graphic&&series.group&&enabledDataSorting){point.isNew=true}}series.closestPointRangePx=closestPointRangePx;fireEvent(this,"afterTranslate")};Series.prototype.getValidPoints=function(points,insideOnly,allowNull){var chart=this.chart;return(points||this.points||[]).filter(function(point){var plotX=point.plotX,plotY=point.plotY,asNull=!allowNull&&(point.isNull||!isNumber(plotY));if(asNull||insideOnly&&!chart.isInsidePlot(plotX,plotY,{inverted:chart.inverted})){return false}return point.visible!==false})};Series.prototype.getClipBox=function(){var _a;var _b=this,chart=_b.chart,xAxis=_b.xAxis,yAxis=_b.yAxis;var _c=merge(chart.clipBox),x=_c.x,y=_c.y,width=_c.width,height=_c.height;if(xAxis&&xAxis.len!==chart.plotSizeX){width=xAxis.len}if(yAxis&&yAxis.len!==chart.plotSizeY){height=yAxis.len}if(chart.inverted&&!this.invertible){_a=[height,width],width=_a[0],height=_a[1]}return{x:x,y:y,width:width,height:height}};Series.prototype.getSharedClipKey=function(){this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0);return this.sharedClipKey};Series.prototype.setClip=function(){var _a=this,chart=_a.chart,group=_a.group,markerGroup=_a.markerGroup,sharedClips=chart.sharedClips,renderer=chart.renderer,clipBox=this.getClipBox(),sharedClipKey=this.getSharedClipKey();var clipRect=sharedClips[sharedClipKey];if(!clipRect){sharedClips[sharedClipKey]=clipRect=renderer.clipRect(clipBox)}else{clipRect.animate(clipBox)}if(group){group.clip(this.options.clip===false?void 0:clipRect)}if(markerGroup){markerGroup.clip()}};Series.prototype.animate=function(init){var _a=this,chart=_a.chart,group=_a.group,markerGroup=_a.markerGroup,inverted=chart.inverted,animation=animObject(this.options.animation),animationClipKey=[this.getSharedClipKey(),animation.duration,animation.easing,animation.defer].join(",");var animationClipRect=chart.sharedClips[animationClipKey],markerAnimationClipRect=chart.sharedClips[animationClipKey+"m"];if(init&&group){var clipBox=this.getClipBox();if(!animationClipRect){clipBox.width=0;if(inverted){clipBox.x=chart.plotHeight}animationClipRect=chart.renderer.clipRect(clipBox);chart.sharedClips[animationClipKey]=animationClipRect;var markerClipBox={x:inverted?-99:-99,y:inverted?-99:-99,width:inverted?chart.plotWidth+199:99,height:inverted?99:chart.plotHeight+199};markerAnimationClipRect=chart.renderer.clipRect(markerClipBox);chart.sharedClips[animationClipKey+"m"]=markerAnimationClipRect}else{animationClipRect.attr("height",clipBox.height)}group.clip(animationClipRect);markerGroup===null||markerGroup===void 0?void 0:markerGroup.clip(markerAnimationClipRect)}else if(animationClipRect&&!animationClipRect.hasClass("highcharts-animating")){var finalBox=this.getClipBox(),step_1=animation.step;if((markerGroup===null||markerGroup===void 0?void 0:markerGroup.element.childNodes.length)||chart.series.length>1){animation.step=function(val,fx){if(step_1){step_1.apply(fx,arguments)}if(fx.prop==="width"&&(markerAnimationClipRect===null||markerAnimationClipRect===void 0?void 0:markerAnimationClipRect.element)){markerAnimationClipRect.attr(inverted?"height":"width",val+99)}}}animationClipRect.addClass("highcharts-animating").animate(finalBox,animation)}};Series.prototype.afterAnimate=function(){var _this=this;this.setClip();objectEach(this.chart.sharedClips,function(clip,key,sharedClips){if(clip&&!_this.chart.container.querySelector('[clip-path="url(#'.concat(clip.id,')"]'))){clip.destroy();delete sharedClips[key]}});this.finishedAnimating=true;fireEvent(this,"afterAnimate")};Series.prototype.drawPoints=function(points){if(points===void 0){points=this.points}var series=this,chart=series.chart,styledMode=chart.styledMode,colorAxis=series.colorAxis,options=series.options,seriesMarkerOptions=options.marker,markerGroup=series[series.specialGroup||"markerGroup"],xAxis=series.xAxis,globallyEnabled=pick(seriesMarkerOptions.enabled,!xAxis||xAxis.isRadial?true:null,series.closestPointRangePx>=seriesMarkerOptions.enabledThreshold*seriesMarkerOptions.radius);var i,point,graphic,verb,pointMarkerOptions,hasPointMarker,markerAttribs;if(seriesMarkerOptions.enabled!==false||series._hasPointMarkers){for(i=0;i<points.length;i++){point=points[i];graphic=point.graphic;verb=graphic?"animate":"attr";pointMarkerOptions=point.marker||{};hasPointMarker=!!point.marker;var shouldDrawMarker=(globallyEnabled&&typeof pointMarkerOptions.enabled==="undefined"||pointMarkerOptions.enabled)&&!point.isNull&&point.visible!==false;if(shouldDrawMarker){var symbol=pick(pointMarkerOptions.symbol,series.symbol,"rect");markerAttribs=series.markerAttribs(point,point.selected&&"select");if(series.enabledDataSorting){point.startXPos=xAxis.reversed?-(markerAttribs.width||0):xAxis.width}var isInside=point.isInside!==false;if(!graphic&&isInside&&((markerAttribs.width||0)>0||point.hasImage)){point.graphic=graphic=chart.renderer.symbol(symbol,markerAttribs.x,markerAttribs.y,markerAttribs.width,markerAttribs.height,hasPointMarker?pointMarkerOptions:seriesMarkerOptions).add(markerGroup);if(series.enabledDataSorting&&chart.hasRendered){graphic.attr({x:point.startXPos});verb="animate"}}if(graphic&&verb==="animate"){graphic[isInside?"show":"hide"](isInside).animate(markerAttribs)}if(graphic){var pointAttr=series.pointAttribs(point,styledMode||!point.selected?void 0:"select");if(!styledMode){graphic[verb](pointAttr)}else if(colorAxis){graphic["css"]({fill:pointAttr.fill})}}if(graphic){graphic.addClass(point.getClassName(),true)}}else if(graphic){point.graphic=graphic.destroy()}}}};Series.prototype.markerAttribs=function(point,state){var seriesOptions=this.options,seriesMarkerOptions=seriesOptions.marker,pointMarkerOptions=point.marker||{},symbol=pointMarkerOptions.symbol||seriesMarkerOptions.symbol,attribs={};var seriesStateOptions,pointStateOptions,radius=pick(pointMarkerOptions.radius,seriesMarkerOptions&&seriesMarkerOptions.radius);if(state){seriesStateOptions=seriesMarkerOptions.states[state];pointStateOptions=pointMarkerOptions.states&&pointMarkerOptions.states[state];radius=pick(pointStateOptions&&pointStateOptions.radius,seriesStateOptions&&seriesStateOptions.radius,radius&&radius+(seriesStateOptions&&seriesStateOptions.radiusPlus||0))}point.hasImage=symbol&&symbol.indexOf("url")===0;if(point.hasImage){radius=0}var pos=point.pos();if(isNumber(radius)&&pos){if(seriesOptions.crisp){pos[0]=crisp(pos[0],point.hasImage?0:symbol==="rect"?(seriesMarkerOptions===null||seriesMarkerOptions===void 0?void 0:seriesMarkerOptions.lineWidth)||0:1)}attribs.x=pos[0]-radius;attribs.y=pos[1]-radius}if(radius){attribs.width=attribs.height=2*radius}return attribs};Series.prototype.pointAttribs=function(point,state){var seriesMarkerOptions=this.options.marker,pointOptions=point&&point.options,pointMarkerOptions=pointOptions&&pointOptions.marker||{},pointColorOption=pointOptions&&pointOptions.color,pointColor=point&&point.color,zoneColor=point&&point.zone&&point.zone.color;var seriesStateOptions,pointStateOptions,color=this.color,fill,stroke,strokeWidth=pick(pointMarkerOptions.lineWidth,seriesMarkerOptions.lineWidth),opacity=1;color=pointColorOption||zoneColor||pointColor||color;fill=pointMarkerOptions.fillColor||seriesMarkerOptions.fillColor||color;stroke=pointMarkerOptions.lineColor||seriesMarkerOptions.lineColor||color;state=state||"normal";if(state){seriesStateOptions=seriesMarkerOptions.states[state]||{};pointStateOptions=pointMarkerOptions.states&&pointMarkerOptions.states[state]||{};strokeWidth=pick(pointStateOptions.lineWidth,seriesStateOptions.lineWidth,strokeWidth+pick(pointStateOptions.lineWidthPlus,seriesStateOptions.lineWidthPlus,0));fill=pointStateOptions.fillColor||seriesStateOptions.fillColor||fill;stroke=pointStateOptions.lineColor||seriesStateOptions.lineColor||stroke;opacity=pick(pointStateOptions.opacity,seriesStateOptions.opacity,opacity)}return{stroke:stroke,"stroke-width":strokeWidth,fill:fill,opacity:opacity}};Series.prototype.destroy=function(keepEventsForUpdate){var series=this,chart=series.chart,issue134=/AppleWebKit\/533/.test(win.navigator.userAgent),data=series.data||[];var destroy,i,point,axis;fireEvent(series,"destroy",{keepEventsForUpdate:keepEventsForUpdate});this.removeEvents(keepEventsForUpdate);(series.axisTypes||[]).forEach(function(AXIS){axis=series[AXIS];if(axis&&axis.series){erase(axis.series,series);axis.isDirty=axis.forceRedraw=true}});if(series.legendItem){series.chart.legend.destroyItem(series)}i=data.length;while(i--){point=data[i];if(point&&point.destroy){point.destroy()}}for(var _a=0,_b=series.zones;_a<_b.length;_a++){var zone=_b[_a];destroyObjectProperties(zone,void 0,true)}U.clearTimeout(series.animationTimeout);objectEach(series,function(val,prop){if(val instanceof SVGElement&&!val.survive){destroy=issue134&&prop==="group"?"hide":"destroy";val[destroy]()}});if(chart.hoverSeries===series){chart.hoverSeries=void 0}erase(chart.series,series);chart.orderItems("series");objectEach(series,function(val,prop){if(!keepEventsForUpdate||prop!=="hcEvents"){delete series[prop]}})};Series.prototype.applyZones=function(){var series=this,area=series.area,chart=series.chart,graph=series.graph,zones=series.zones,points=series.points,xAxis=series.xAxis,yAxis=series.yAxis,zoneAxis=series.zoneAxis,inverted=chart.inverted,renderer=chart.renderer,axis=this["".concat(zoneAxis,"Axis")],_a=axis||{},isXAxis=_a.isXAxis,_b=_a.len,len=_b===void 0?0:_b,_c=_a.minPointOffset,minPointOffset=_c===void 0?0:_c,halfWidth=((graph===null||graph===void 0?void 0:graph.strokeWidth())||0)/2+1,avoidClose=function(zone,plotX,plotY){if(plotX===void 0){plotX=0}if(plotY===void 0){plotY=0}if(inverted){plotY=len-plotY}var _a=zone.translated,translated=_a===void 0?0:_a,lineClip=zone.lineClip,distance=plotY-translated;lineClip===null||lineClip===void 0?void 0:lineClip.push(["L",plotX,Math.abs(distance)<halfWidth?plotY-halfWidth*(distance<=0?-1:1):translated])};if(zones.length&&(graph||area)&&axis&&isNumber(axis.min)){var axisMax_1=axis.getExtremes().max+minPointOffset,invertPath_1=function(path){path.forEach(function(segment,i){if(segment[0]==="M"||segment[0]==="L"){path[i]=[segment[0],isXAxis?len-segment[1]:segment[1],isXAxis?segment[2]:len-segment[2]]}})};zones.forEach(function(zone){zone.lineClip=[];zone.translated=clamp(axis.toPixels(pick(zone.value,axisMax_1),true)||0,0,len)});if(graph&&!this.showLine){graph.hide()}if(area){area.hide()}if(zoneAxis==="y"&&points.length<xAxis.len){for(var _d=0,points_1=points;_d<points_1.length;_d++){var point=points_1[_d];var plotX=point.plotX,plotY=point.plotY,zone=point.zone,zoneBelow=zone&&zones[zones.indexOf(zone)-1];if(zone){avoidClose(zone,plotX,plotY)}if(zoneBelow){avoidClose(zoneBelow,plotX,plotY)}}}var lastLineClip_1=[],lastTranslated_1=axis.toPixels(axis.getExtremes().min-minPointOffset,true);zones.forEach(function(zone){var _a,_b;var lineClip=zone.lineClip||[],translated=Math.round(zone.translated||0);if(xAxis.reversed){lineClip.reverse()}var clip=zone.clip,simpleClip=zone.simpleClip,x1=0,y1=0,x2=xAxis.len,y2=yAxis.len;if(isXAxis){x1=translated;x2=lastTranslated_1}else{y1=translated;y2=lastTranslated_1}var simplePath=[["M",x1,y1],["L",x2,y1],["L",x2,y2],["L",x1,y2],["Z"]],adaptivePath=__spreadArray(__spreadArray(__spreadArray(__spreadArray([simplePath[0]],lineClip,true),[simplePath[1],simplePath[2]],false),lastLineClip_1,true),[simplePath[3],simplePath[4]],false);lastLineClip_1=lineClip.reverse();lastTranslated_1=translated;if(inverted){invertPath_1(adaptivePath);if(area){invertPath_1(simplePath)}}if(clip){clip.animate({d:adaptivePath});simpleClip===null||simpleClip===void 0?void 0:simpleClip.animate({d:simplePath})}else{clip=zone.clip=renderer.path(adaptivePath);if(area){simpleClip=zone.simpleClip=renderer.path(simplePath)}}if(graph){(_a=zone.graph)===null||_a===void 0?void 0:_a.clip(clip)}if(area){(_b=zone.area)===null||_b===void 0?void 0:_b.clip(simpleClip)}})}else if(series.visible){if(graph){graph.show()}if(area){area.show()}}};Series.prototype.plotGroup=function(prop,name,visibility,zIndex,parent){var group=this[prop];var isNew=!group,attrs={visibility:visibility,zIndex:zIndex||.1};if(defined(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"){attrs.opacity=this.opacity}if(!group){this[prop]=group=this.chart.renderer.g().add(parent)}group.addClass("highcharts-"+name+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(defined(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(group.hasClass("highcharts-tracker")?" highcharts-tracker":""),true);group.attr(attrs)[isNew?"attr":"animate"](this.getPlotBox(name));return group};Series.prototype.getPlotBox=function(name){var horAxis=this.xAxis,vertAxis=this.yAxis;var chart=this.chart,inverted=chart.inverted&&!chart.polar&&horAxis&&this.invertible&&name==="series";if(chart.inverted){horAxis=vertAxis;vertAxis=this.xAxis}return{translateX:horAxis?horAxis.left:chart.plotLeft,translateY:vertAxis?vertAxis.top:chart.plotTop,rotation:inverted?90:0,rotationOriginX:inverted?(horAxis.len-vertAxis.len)/2:0,rotationOriginY:inverted?(horAxis.len+vertAxis.len)/2:0,scaleX:inverted?-1:1,scaleY:1}};Series.prototype.removeEvents=function(keepEventsForUpdate){var eventsToUnbind=this.eventsToUnbind;if(!keepEventsForUpdate){removeEvent(this)}if(eventsToUnbind.length){eventsToUnbind.forEach(function(unbind){unbind()});eventsToUnbind.length=0}};Series.prototype.render=function(){var _a,_b,_c,_d,_e;var series=this,chart=series.chart,options=series.options,hasRendered=series.hasRendered,animOptions=animObject(options.animation),visibility=series.visible?"inherit":"hidden",zIndex=options.zIndex,chartSeriesGroup=chart.seriesGroup;var animDuration=series.finishedAnimating?0:animOptions.duration;fireEvent(this,"render");series.plotGroup("group","series",visibility,zIndex,chartSeriesGroup);series.markerGroup=series.plotGroup("markerGroup","markers",visibility,zIndex,chartSeriesGroup);if(options.clip!==false){series.setClip()}if(animDuration){(_a=series.animate)===null||_a===void 0?void 0:_a.call(series,true)}if(series.drawGraph){series.drawGraph();series.applyZones()}if(series.visible){series.drawPoints()}(_b=series.drawDataLabels)===null||_b===void 0?void 0:_b.call(series);(_c=series.redrawPoints)===null||_c===void 0?void 0:_c.call(series);if(options.enableMouseTracking){(_d=series.drawTracker)===null||_d===void 0?void 0:_d.call(series)}if(animDuration){(_e=series.animate)===null||_e===void 0?void 0:_e.call(series)}if(!hasRendered){if(animDuration&&animOptions.defer){animDuration+=animOptions.defer}series.animationTimeout=syncTimeout(function(){series.afterAnimate()},animDuration||0)}series.isDirty=false;series.hasRendered=true;fireEvent(series,"afterRender")};Series.prototype.redraw=function(){var wasDirty=this.isDirty||this.isDirtyData;this.translate();this.render();if(wasDirty){delete this.kdTree}};Series.prototype.reserveSpace=function(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries};Series.prototype.searchPoint=function(e,compareX){var _a=this,xAxis=_a.xAxis,yAxis=_a.yAxis,inverted=this.chart.inverted;return this.searchKDTree({clientX:inverted?xAxis.len-e.chartY+xAxis.pos:e.chartX-xAxis.pos,plotY:inverted?yAxis.len-e.chartX+yAxis.pos:e.chartY-yAxis.pos},compareX,e)};Series.prototype.buildKDTree=function(e){this.buildingKdTree=true;var series=this,dimensions=series.options.findNearestPointBy.indexOf("y")>-1?2:1;function kdtree(points,depth,dimensions){var length=points===null||points===void 0?void 0:points.length;var axis,median;if(length){axis=series.kdAxisArray[depth%dimensions];points.sort(function(a,b){return(a[axis]||0)-(b[axis]||0)});median=Math.floor(length/2);return{point:points[median],left:kdtree(points.slice(0,median),depth+1,dimensions),right:kdtree(points.slice(median+1),depth+1,dimensions)}}}function startRecursive(){series.kdTree=kdtree(series.getValidPoints(void 0,!series.directTouch),dimensions,dimensions);series.buildingKdTree=false}delete series.kdTree;syncTimeout(startRecursive,series.options.kdNow||(e===null||e===void 0?void 0:e.type)==="touchstart"?0:1)};Series.prototype.searchKDTree=function(point,compareX,e){var series=this,_a=this.kdAxisArray,kdX=_a[0],kdY=_a[1],kdComparer=compareX?"distX":"dist",kdDimensions=(series.options.findNearestPointBy||"").indexOf("y")>-1?2:1,useRadius=!!series.isBubble;function setDistance(p1,p2){var _a;var p1kdX=p1[kdX],p2kdX=p2[kdX],x=defined(p1kdX)&&defined(p2kdX)?p1kdX-p2kdX:null,p1kdY=p1[kdY],p2kdY=p2[kdY],y=defined(p1kdY)&&defined(p2kdY)?p1kdY-p2kdY:0,radius=useRadius?((_a=p2.marker)===null||_a===void 0?void 0:_a.radius)||0:0;p2.dist=Math.sqrt((x&&x*x||0)+y*y)-radius;p2.distX=defined(x)?Math.abs(x)-radius:Number.MAX_VALUE}function doSearch(search,tree,depth,dimensions){var _a;var point=tree.point,axis=series.kdAxisArray[depth%dimensions];var nPoint1,nPoint2,ret=point;setDistance(search,point);var tdist=(search[axis]||0)-(point[axis]||0)+(useRadius?((_a=point.marker)===null||_a===void 0?void 0:_a.radius)||0:0),sideA=tdist<0?"left":"right",sideB=tdist<0?"right":"left";if(tree[sideA]){nPoint1=doSearch(search,tree[sideA],depth+1,dimensions);ret=nPoint1[kdComparer]<ret[kdComparer]?nPoint1:point}if(tree[sideB]){if(Math.sqrt(tdist*tdist)<ret[kdComparer]){nPoint2=doSearch(search,tree[sideB],depth+1,dimensions);ret=nPoint2[kdComparer]<ret[kdComparer]?nPoint2:ret}}return ret}if(!this.kdTree&&!this.buildingKdTree){this.buildKDTree(e)}if(this.kdTree){return doSearch(point,this.kdTree,kdDimensions,kdDimensions)}};Series.prototype.pointPlacementToXValue=function(){var _a=this,options=_a.options,xAxis=_a.xAxis;var factor=options.pointPlacement;if(factor==="between"){factor=xAxis.reversed?-.5:.5}return isNumber(factor)?factor*(options.pointRange||xAxis.pointRange):0};Series.prototype.isPointInside=function(point){var _a=this,chart=_a.chart,xAxis=_a.xAxis,yAxis=_a.yAxis,_b=point.plotX,plotX=_b===void 0?-1:_b,_c=point.plotY,plotY=_c===void 0?-1:_c,isInside=plotY>=0&&plotY<=(yAxis?yAxis.len:chart.plotHeight)&&plotX>=0&&plotX<=(xAxis?xAxis.len:chart.plotWidth);return isInside};Series.prototype.drawTracker=function(){var _a;var series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat((trackByArea?series.areaPath:series.graphPath)||[]),chart=series.chart,pointer=chart.pointer,renderer=chart.renderer,snap=((_a=chart.options.tooltip)===null||_a===void 0?void 0:_a.snap)||0,onMouseOver=function(){if(options.enableMouseTracking&&chart.hoverSeries!==series){series.onMouseOver()}},TRACKER_FILL="rgba(192,192,192,"+(svg?1e-4:.002)+")";var tracker=series.tracker;if(tracker){tracker.attr({d:trackerPath})}else if(series.graph){series.tracker=tracker=renderer.path(trackerPath).attr({visibility:series.visible?"inherit":"hidden",zIndex:2}).addClass(trackByArea?"highcharts-tracker-area":"highcharts-tracker-line").add(series.group);if(!chart.styledMode){tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:"none","stroke-width":series.graph.strokeWidth()+(trackByArea?0:2*snap)})}[series.tracker,series.markerGroup,series.dataLabelsGroup].forEach(function(tracker){if(tracker){tracker.addClass("highcharts-tracker").on("mouseover",onMouseOver).on("mouseout",function(e){pointer===null||pointer===void 0?void 0:pointer.onTrackerMouseOut(e)});if(options.cursor&&!chart.styledMode){tracker.css({cursor:options.cursor})}tracker.on("touchstart",onMouseOver)}})}fireEvent(this,"afterDrawTracker")};Series.prototype.addPoint=function(options,redraw,shift,animation,withEvent){var series=this,seriesOptions=series.options,chart=series.chart,data=series.data,table=series.dataTable,xAxis=series.xAxis,names=xAxis&&xAxis.hasNames&&xAxis.names,dataOptions=seriesOptions.data,xData=series.getColumn("x");var isInTheMiddle,i;redraw=pick(redraw,true);var point={series:series};series.pointClass.prototype.applyOptions.apply(point,[options]);var x=point.x;i=xData.length;if(series.requireSorting&&x<xData[i-1]){isInTheMiddle=true;while(i&&xData[i-1]>x){i--}}table.setRow(point,i,true,{addColumns:false});if(names&&point.name){names[x]=point.name}dataOptions===null||dataOptions===void 0?void 0:dataOptions.splice(i,0,options);if(isInTheMiddle||series.processedData){series.data.splice(i,0,null);series.processData()}if(seriesOptions.legendType==="point"){series.generatePoints()}if(shift){if(data[0]&&!!data[0].remove){data[0].remove(false)}else{__spreadArray([data,dataOptions],Object.values(table.getColumns()),true).filter(defined).forEach(function(coll){coll.shift()});table.rowCount-=1;fireEvent(table,"afterDeleteRows")}}if(withEvent!==false){fireEvent(series,"addPoint",{point:point})}series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw(animation)}};Series.prototype.removePoint=function(i,redraw,animation){var series=this,chart=series.chart,data=series.data,points=series.points,table=series.dataTable,point=data[i],remove=function(){__spreadArray([(points===null||points===void 0?void 0:points.length)===data.length?points:void 0,data,series.options.data],Object.values(table.getColumns()),true).filter(defined).forEach(function(coll){coll.splice(i,1)});table.rowCount-=1;fireEvent(table,"afterDeleteRows");point===null||point===void 0?void 0:point.destroy();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw()}};setAnimation(animation,chart);redraw=pick(redraw,true);if(point){point.firePointEvent("remove",null,remove)}else{remove()}};Series.prototype.remove=function(redraw,animation,withEvent,keepEvents){var series=this,chart=series.chart;function remove(){series.destroy(keepEvents);chart.isDirtyLegend=chart.isDirtyBox=true;chart.linkSeries(keepEvents);if(pick(redraw,true)){chart.redraw(animation)}}if(withEvent!==false){fireEvent(series,"remove",null,remove)}else{remove()}};Series.prototype.update=function(options,redraw){var _a,_b,_c,_d;options=diffObjects(options,this.userOptions);fireEvent(this,"update",{options:options});var series=this,chart=series.chart,oldOptions=series.userOptions,initialType=series.initialType||series.type,plotOptions=chart.options.plotOptions,initialSeriesProto=seriesTypes[initialType].prototype,groups=["group","markerGroup","dataLabelsGroup","transformGroup"],optionsToCheck=["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"],animation=series.finishedAnimating&&{animation:false},kinds={};var seriesOptions,n,preserve=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],newType=options.type||oldOptions.type||chart.options.chart.type;var keepPoints=!(this.hasDerivedData||newType&&newType!==this.type||typeof options.keys!=="undefined"||typeof options.pointStart!=="undefined"||typeof options.pointInterval!=="undefined"||typeof options.relativeXValue!=="undefined"||options.joinBy||options.mapData||optionsToCheck.some(function(option){return series.hasOptionChanged(option)}));newType=newType||initialType;if(keepPoints){preserve.push("data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups");if(options.visible!==false){preserve.push("area","graph")}series.parallelArrays.forEach(function(key){preserve.push(key+"Data")});if(options.data){if(options.dataSorting){extend(series.options.dataSorting,options.dataSorting)}this.setData(options.data,false)}}else{this.dataTable.modified=this.dataTable}options=merge(oldOptions,{index:oldOptions.index===void 0?series.index:oldOptions.index,pointStart:(_c=(_b=(_a=plotOptions===null||plotOptions===void 0?void 0:plotOptions.series)===null||_a===void 0?void 0:_a.pointStart)!==null&&_b!==void 0?_b:oldOptions.pointStart)!==null&&_c!==void 0?_c:series.getColumn("x")[0]},!keepPoints&&{data:series.options.data},options,animation);if(keepPoints&&options.data){options.data=series.options.data}preserve=groups.concat(preserve);preserve.forEach(function(prop){preserve[prop]=series[prop];delete series[prop]});var casting=false;if(seriesTypes[newType]){casting=newType!==series.type;series.remove(false,false,false,true);if(casting){chart.propFromSeries();if(Object.setPrototypeOf){Object.setPrototypeOf(series,seriesTypes[newType].prototype)}else{var ownEvents=Object.hasOwnProperty.call(series,"hcEvents")&&series.hcEvents;for(n in initialSeriesProto){series[n]=void 0}extend(series,seriesTypes[newType].prototype);if(ownEvents){series.hcEvents=ownEvents}else{delete series.hcEvents}}}}else{error(17,true,chart,{missingModuleFor:newType})}preserve.forEach(function(prop){series[prop]=preserve[prop]});series.init(chart,options);if(keepPoints&&this.points){seriesOptions=series.options;if(seriesOptions.visible===false){kinds.graphic=1;kinds.dataLabel=1}else{if(this.hasMarkerChanged(seriesOptions,oldOptions)){kinds.graphic=1}if(!((_d=series.hasDataLabels)===null||_d===void 0?void 0:_d.call(series))){kinds.dataLabel=1}}for(var _e=0,_f=this.points;_e<_f.length;_e++){var point=_f[_e];if(point&&point.series){point.resolveColor();if(Object.keys(kinds).length){point.destroyElements(kinds)}if(seriesOptions.showInLegend===false&&point.legendItem){chart.legend.destroyItem(point)}}}}series.initialType=initialType;chart.linkSeries();chart.setSortedData();if(casting&&series.linkedSeries.length){series.isDirtyData=true}fireEvent(this,"afterUpdate");if(pick(redraw,true)){chart.redraw(keepPoints?void 0:false)}};Series.prototype.setName=function(name){this.name=this.options.name=this.userOptions.name=name;this.chart.isDirtyLegend=true};Series.prototype.hasOptionChanged=function(optionName){var _a,_b;var chart=this.chart,option=this.options[optionName],plotOptions=chart.options.plotOptions,oldOption=this.userOptions[optionName],plotOptionsOption=pick((_a=plotOptions===null||plotOptions===void 0?void 0:plotOptions[this.type])===null||_a===void 0?void 0:_a[optionName],(_b=plotOptions===null||plotOptions===void 0?void 0:plotOptions.series)===null||_b===void 0?void 0:_b[optionName]);if(oldOption&&!defined(plotOptionsOption)){return option!==oldOption}return option!==pick(plotOptionsOption,option)};Series.prototype.onMouseOver=function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries,pointer=chart.pointer;pointer===null||pointer===void 0?void 0:pointer.setHoverChartIndex();if(hoverSeries&&hoverSeries!==series){hoverSeries.onMouseOut()}if(series.options.events.mouseOver){fireEvent(series,"mouseOver")}series.setState("hover");chart.hoverSeries=series};Series.prototype.onMouseOut=function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;chart.hoverSeries=null;if(hoverPoint){hoverPoint.onMouseOut()}if(series&&options.events.mouseOut){fireEvent(series,"mouseOut")}if(tooltip&&!series.stickyTracking&&(!tooltip.shared||series.noSharedTooltip)){tooltip.hide()}chart.series.forEach(function(s){s.setState("",true)})};Series.prototype.setState=function(state,inherit){var series=this,options=series.options,graph=series.graph,inactiveOtherPoints=options.inactiveOtherPoints,stateOptions=options.states,stateAnimation=pick(stateOptions[state||"normal"]&&stateOptions[state||"normal"].animation,series.chart.options.chart.animation);var lineWidth=options.lineWidth,opacity=options.opacity;state=state||"";if(series.state!==state){[series.group,series.markerGroup,series.dataLabelsGroup].forEach(function(group){if(group){if(series.state){group.removeClass("highcharts-series-"+series.state)}if(state){group.addClass("highcharts-series-"+state)}}});series.state=state;if(!series.chart.styledMode){if(stateOptions[state]&&stateOptions[state].enabled===false){return}if(state){lineWidth=stateOptions[state].lineWidth||lineWidth+(stateOptions[state].lineWidthPlus||0);opacity=pick(stateOptions[state].opacity,opacity)}if(graph&&!graph.dashstyle&&isNumber(lineWidth)){for(var _a=0,_b=__spreadArray([graph],this.zones.map(function(zone){return zone.graph}),true);_a<_b.length;_a++){var graphElement=_b[_a];graphElement===null||graphElement===void 0?void 0:graphElement.animate({"stroke-width":lineWidth},stateAnimation)}}if(!inactiveOtherPoints){[series.group,series.markerGroup,series.dataLabelsGroup,series.labelBySeries].forEach(function(group){if(group){group.animate({opacity:opacity},stateAnimation)}})}}}if(inherit&&inactiveOtherPoints&&series.points){series.setAllPointsToState(state||void 0)}};Series.prototype.setAllPointsToState=function(state){this.points.forEach(function(point){if(point.setState){point.setState(state)}})};Series.prototype.setVisible=function(vis,redraw){var _a;var series=this,chart=series.chart,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=series.options.visible=series.userOptions.visible=typeof vis==="undefined"?!oldVisibility:vis;var showOrHide=vis?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(function(key){var _a;(_a=series[key])===null||_a===void 0?void 0:_a[showOrHide]()});if(chart.hoverSeries===series||((_a=chart.hoverPoint)===null||_a===void 0?void 0:_a.series)===series){series.onMouseOut()}if(series.legendItem){chart.legend.colorizeItem(series,vis)}series.isDirty=true;if(series.options.stacking){chart.series.forEach(function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true}})}series.linkedSeries.forEach(function(otherSeries){otherSeries.setVisible(vis,false)});if(ignoreHiddenSeries){chart.isDirtyBox=true}fireEvent(series,showOrHide);if(redraw!==false){chart.redraw()}};Series.prototype.show=function(){this.setVisible(true)};Series.prototype.hide=function(){this.setVisible(false)};Series.prototype.select=function(selected){var series=this;series.selected=selected=this.options.selected=typeof selected==="undefined"?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected}fireEvent(series,selected?"select":"unselect")};Series.prototype.shouldShowTooltip=function(plotX,plotY,options){if(options===void 0){options={}}options.series=this;options.visiblePlotOnly=true;return this.chart.isInsidePlot(plotX,plotY,options)};Series.prototype.drawLegendSymbol=function(legend,item){var _a;(_a=LegendSymbol[this.options.legendSymbol||"rectangle"])===null||_a===void 0?void 0:_a.call(this,legend,item)};Series.defaultOptions=SeriesDefaults;Series.types=SeriesRegistry.seriesTypes;Series.registerType=SeriesRegistry.registerSeriesType;return Series}();extend(Series.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:false,invertible:true,isCartesian:true,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Point,requireSorting:true,sorted:true});SeriesRegistry.series=Series;export default Series;"";"";