"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};import G from"../Core/Globals.js";var win=G.win;import U from"../Core/Utilities.js";var discardElement=U.discardElement,objectEach=U.objectEach;function ajax(settings){var headers={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},r=new XMLHttpRequest;function handleError(xhr,err){if(settings.error){settings.error(xhr,err)}else{}}if(!settings.url){return false}r.open((settings.type||"get").toUpperCase(),settings.url,true);if(!settings.headers||!settings.headers["Content-Type"]){r.setRequestHeader("Content-Type",headers[settings.dataType||"json"]||headers.text)}objectEach(settings.headers,function(val,key){r.setRequestHeader(key,val)});if(settings.responseType){r.responseType=settings.responseType}r.onreadystatechange=function(){var res;if(r.readyState===4){if(r.status===200){if(settings.responseType!=="blob"){res=r.responseText;if(settings.dataType==="json"){try{res=JSON.parse(res)}catch(e){if(e instanceof Error){return handleError(r,e)}}}}return settings.success&&settings.success(res,r)}handleError(r,r.responseText)}};if(settings.data&&typeof settings.data!=="string"){settings.data=JSON.stringify(settings.data)}r.send(settings.data)}function getJSON(url,success){HttpUtilities.ajax({url:url,success:success,dataType:"json",headers:{"Content-Type":"text/plain"}})}function post(url,data,fetchOptions){var formData=new win.FormData;objectEach(data,function(val,name){formData.append(name,val)});formData.append("b64","true");var filename=data.filename,type=data.type;return win.fetch(url,__assign({method:"POST",body:formData},fetchOptions)).then(function(res){if(res.ok){res.text().then(function(text){var link=document.createElement("a");link.href="data:".concat(type,";base64,").concat(text);link.download=filename;link.click();discardElement(link)})}})}var HttpUtilities={ajax:ajax,getJSON:getJSON,post:post};export default HttpUtilities;"";