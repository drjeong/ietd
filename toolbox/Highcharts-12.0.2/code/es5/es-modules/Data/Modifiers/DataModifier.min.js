"use strict";import U from"../../Core/Utilities.js";var addEvent=U.addEvent,fireEvent=U.fireEvent,merge=U.merge;var DataModifier=function(){function DataModifier(){}DataModifier.prototype.benchmark=function(dataTable,options){var results=[];var modifier=this;var execute=function(){modifier.modifyTable(dataTable);modifier.emit({type:"afterBenchmarkIteration"})};var defaultOptions={iterations:1};var iterations=merge(defaultOptions,options).iterations;modifier.on("afterBenchmarkIteration",function(){if(results.length===iterations){modifier.emit({type:"afterBenchmark",results:results});return}execute()});var times={startTime:0,endTime:0};modifier.on("modify",function(){times.startTime=window.performance.now()});modifier.on("afterModify",function(){times.endTime=window.performance.now();results.push(times.endTime-times.startTime)});execute();return results};DataModifier.prototype.emit=function(e){fireEvent(this,e.type,e)};DataModifier.prototype.modify=function(table,eventDetail){var modifier=this;return new Promise(function(resolve,reject){if(table.modified===table){table.modified=table.clone(false,eventDetail)}try{resolve(modifier.modifyTable(table,eventDetail))}catch(e){modifier.emit({type:"error",detail:eventDetail,table:table});reject(e)}})};DataModifier.prototype.modifyCell=function(table,columnName,rowIndex,cellValue,eventDetail){return this.modifyTable(table)};DataModifier.prototype.modifyColumns=function(table,columns,rowIndex,eventDetail){return this.modifyTable(table)};DataModifier.prototype.modifyRows=function(table,rows,rowIndex,eventDetail){return this.modifyTable(table)};DataModifier.prototype.on=function(type,callback){return addEvent(this,type,callback)};return DataModifier}();(function(DataModifier){DataModifier.types={};function registerType(key,DataModifierClass){return!!key&&!DataModifier.types[key]&&!!(DataModifier.types[key]=DataModifierClass)}DataModifier.registerType=registerType})(DataModifier||(DataModifier={}));export default DataModifier;