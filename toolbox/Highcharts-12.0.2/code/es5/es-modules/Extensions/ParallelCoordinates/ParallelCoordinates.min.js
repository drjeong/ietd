"use strict";import ParallelAxis from"./ParallelAxis.js";import ParallelCoordinatesDefaults from"./ParallelCoordinatesDefaults.js";import ParallelSeries from"./ParallelSeries.js";import U from"../../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined,merge=U.merge,splat=U.splat;var ChartAdditions=function(){function ChartAdditions(chart){this.chart=chart}ChartAdditions.prototype.setParallelInfo=function(options){var chart=this.chart||this,seriesOptions=options.series;chart.parallelInfo={counter:0};for(var _i=0,seriesOptions_1=seriesOptions;_i<seriesOptions_1.length;_i++){var series=seriesOptions_1[_i];if(series.data){chart.parallelInfo.counter=Math.max(chart.parallelInfo.counter,series.data.length-1)}}};return ChartAdditions}();var ParallelCoordinates;(function(ParallelCoordinates){function compose(AxisClass,ChartClass,highchartsDefaultOptions,SeriesClass){ParallelAxis.compose(AxisClass);ParallelSeries.compose(SeriesClass);var ChartCompo=ChartClass,addsProto=ChartAdditions.prototype,chartProto=ChartCompo.prototype;if(!chartProto.setParallelInfo){chartProto.setParallelInfo=addsProto.setParallelInfo;addEvent(ChartCompo,"init",onChartInit);addEvent(ChartCompo,"update",onChartUpdate);merge(true,highchartsDefaultOptions.chart,ParallelCoordinatesDefaults.chart)}}ParallelCoordinates.compose=compose;function onChartInit(e){var chart=this,options=e.args[0],defaultYAxis=splat(options.yAxis||{}),newYAxes=[];var yAxisLength=defaultYAxis.length;chart.hasParallelCoordinates=options.chart&&options.chart.parallelCoordinates;if(chart.hasParallelCoordinates){chart.setParallelInfo(options);for(;yAxisLength<=chart.parallelInfo.counter;yAxisLength++){newYAxes.push({})}if(!options.legend){options.legend={}}if(options.legend&&typeof options.legend.enabled==="undefined"){options.legend.enabled=false}merge(true,options,{boost:{seriesThreshold:Number.MAX_VALUE},plotOptions:{series:{boostThreshold:Number.MAX_VALUE}}});options.yAxis=defaultYAxis.concat(newYAxes);options.xAxis=merge(ParallelCoordinatesDefaults.xAxis,splat(options.xAxis||{})[0])}}function onChartUpdate(e){var chart=this,options=e.options;if(options.chart){if(defined(options.chart.parallelCoordinates)){chart.hasParallelCoordinates=options.chart.parallelCoordinates}chart.options.chart.parallelAxes=merge(chart.options.chart.parallelAxes,options.chart.parallelAxes)}if(chart.hasParallelCoordinates){if(options.series){chart.setParallelInfo(options)}for(var _i=0,_a=chart.yAxis;_i<_a.length;_i++){var axis=_a[_i];axis.update({},false)}}}})(ParallelCoordinates||(ParallelCoordinates={}));export default ParallelCoordinates;