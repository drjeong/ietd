"use strict";import H from"../Core/Globals.js";var isSafari=H.isSafari,win=H.win,doc=H.win.document;var domurl=win.URL||win.webkitURL||win;function dataURLtoBlob(dataURL){var parts=dataURL.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(parts&&parts.length>3&&win.atob&&win.ArrayBuffer&&win.Uint8Array&&win.Blob&&domurl.createObjectURL){var binStr=win.atob(parts[3]),buf=new win.ArrayBuffer(binStr.length),binary=new win.Uint8Array(buf);for(var i=0;i<binary.length;++i){binary[i]=binStr.charCodeAt(i)}return domurl.createObjectURL(new win.Blob([binary],{type:parts[1]}))}}function downloadURL(dataURL,filename){var nav=win.navigator,a=doc.createElement("a");if(typeof dataURL!=="string"&&!(dataURL instanceof String)&&nav.msSaveOrOpenBlob){nav.msSaveOrOpenBlob(dataURL,filename);return}dataURL=""+dataURL;if(nav.userAgent.length>1e3){throw new Error("Input too long")}var isOldEdgeBrowser=/Edge\/\d+/.test(nav.userAgent),safariBlob=isSafari&&typeof dataURL==="string"&&dataURL.indexOf("data:application/pdf")===0;if(safariBlob||isOldEdgeBrowser||dataURL.length>2e6){dataURL=dataURLtoBlob(dataURL)||"";if(!dataURL){throw new Error("Failed to convert to blob")}}if(typeof a.download!=="undefined"){a.href=dataURL;a.download=filename;doc.body.appendChild(a);a.click();doc.body.removeChild(a)}else{try{if(!win.open(dataURL,"chart")){throw new Error("Failed to open window")}}catch(_a){win.location.href=dataURL}}}var DownloadURL={dataURLtoBlob:dataURLtoBlob,downloadURL:downloadURL};export default DownloadURL;