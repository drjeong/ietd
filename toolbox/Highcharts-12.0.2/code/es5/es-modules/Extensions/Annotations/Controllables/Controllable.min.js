"use strict";import ControlTarget from"../ControlTarget.js";import U from"../../../Core/Utilities.js";var merge=U.merge;var Controllable=function(){function Controllable(annotation,options,index,itemType){this.annotation=annotation;this.chart=annotation.chart;this.collection=itemType==="label"?"labels":"shapes";this.controlPoints=[];this.options=options;this.points=[];this.index=index;this.itemType=itemType;this.init(annotation,options,index)}Controllable.prototype.attr=function(){var _args=[];for(var _i=0;_i<arguments.length;_i++){_args[_i]=arguments[_i]}this.graphic.attr.apply(this.graphic,arguments)};Controllable.prototype.attrsFromOptions=function(options){var map=this.constructor.attrsMap,attrs={},styledMode=this.chart.styledMode;var key,mappedKey;for(key in options){mappedKey=map[key];if(typeof map[key]!=="undefined"&&(!styledMode||["fill","stroke","stroke-width"].indexOf(mappedKey)===-1)){attrs[mappedKey]=options[key]}}return attrs};Controllable.prototype.destroy=function(){if(this.graphic){this.graphic=this.graphic.destroy()}if(this.tracker){this.tracker=this.tracker.destroy()}this.destroyControlTarget()};Controllable.prototype.init=function(annotation,options,index){this.annotation=annotation;this.chart=annotation.chart;this.options=options;this.points=[];this.controlPoints=[];this.index=index;this.linkPoints();this.addControlPoints()};Controllable.prototype.redraw=function(animation){this.redrawControlPoints(animation)};Controllable.prototype.render=function(_parentGroup){if(this.options.className&&this.graphic){this.graphic.addClass(this.options.className)}this.renderControlPoints()};Controllable.prototype.rotate=function(cx,cy,radians){this.transform("rotate",cx,cy,radians)};Controllable.prototype.scale=function(cx,cy,sx,sy){this.transform("scale",cx,cy,sx,sy)};Controllable.prototype.setControlPointsVisibility=function(visible){this.controlPoints.forEach(function(controlPoint){controlPoint.setVisibility(visible)})};Controllable.prototype.shouldBeDrawn=function(){return!!this.points.length};Controllable.prototype.translateShape=function(dx,dy,translateSecondPoint){var chart=this.annotation.chart,shapeOptions=this.annotation.userOptions,annotationIndex=chart.annotations.indexOf(this.annotation),chartOptions=chart.options.annotations[annotationIndex];this.translatePoint(dx,dy,0);if(translateSecondPoint){this.translatePoint(dx,dy,1)}chartOptions[this.collection][this.index].point=this.options.point;shapeOptions[this.collection][this.index].point=this.options.point};Controllable.prototype.update=function(newOptions){var annotation=this.annotation,options=merge(true,this.options,newOptions),parentGroup=this.graphic.parentGroup,Constructor=this.constructor;this.destroy();var newControllable=new Constructor(annotation,options,this.index,this.itemType);merge(true,this,newControllable);this.render(parentGroup);this.redraw()};return Controllable}();ControlTarget.compose(Controllable);export default Controllable;"";