"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();import Annotation from"../Annotation.js";import ControlPoint from"../ControlPoint.js";import CrookedLine from"./CrookedLine.js";import InfinityLine from"./InfinityLine.js";import MockPoint from"../MockPoint.js";import U from"../../../Core/Utilities.js";var merge=U.merge;function edgePoint(startIndex,endIndex,fibonacciIndex){return function(target){var chart=target.annotation.chart,plotLeftOrTop=chart.inverted?chart.plotTop:chart.plotLeft;var points=target.annotation.points;var xAxis=points[0].series.xAxis,deltaX=points.length>1?points[1].plotX-points[0].plotX:0,x=xAxis.toValue(points[0].plotX+plotLeftOrTop+fibonacciIndex*deltaX);points=[new MockPoint(chart,points[0].target,{x:x,y:0,xAxis:points[0].options.xAxis,yAxis:points[0].options.yAxis}),new MockPoint(chart,points[0].target,{x:x,y:1,xAxis:points[0].options.xAxis,yAxis:points[0].options.yAxis})];return InfinityLine.findEdgePoint(points[startIndex],points[endIndex])}}var FibonacciTimeZones=function(_super){__extends(FibonacciTimeZones,_super);function FibonacciTimeZones(){return _super!==null&&_super.apply(this,arguments)||this}FibonacciTimeZones.prototype.addShapes=function(){var numberOfLines=11;var fibb=1,nextFibb=1;for(var i=0;i<numberOfLines;i++){var correctedFibb=!i?0:fibb,points=[edgePoint(1,0,correctedFibb),edgePoint(0,1,correctedFibb)];nextFibb=fibb+nextFibb;fibb=nextFibb-fibb;if(i===1){this.secondLineEdgePoints=[points[0],points[1]]}this.initShape(merge(this.options.typeOptions.line,{type:"path",points:points,className:"highcharts-fibonacci-timezones-lines"}),i)}};FibonacciTimeZones.prototype.addControlPoints=function(){var options=this.options,typeOptions=options.typeOptions,controlPoint=new ControlPoint(this.chart,this,merge(options.controlPointOptions,typeOptions.controlPointOptions),0);this.controlPoints.push(controlPoint);typeOptions.controlPointOptions=controlPoint.options};return FibonacciTimeZones}(CrookedLine);FibonacciTimeZones.prototype.defaultOptions=merge(CrookedLine.prototype.defaultOptions,{typeOptions:{line:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:void 0},controlPointOptions:{positioner:function(){var _a;var target=this.target,graphic=this.graphic,edgePoints=target.secondLineEdgePoints,args={annotation:target},firstEdgePointY=edgePoints[0](args).y,secondEdgePointY=edgePoints[1](args).y,plotLeft=this.chart.plotLeft,plotTop=this.chart.plotTop;var x=edgePoints[0](args).x,y=(firstEdgePointY+secondEdgePointY)/2;if(this.chart.inverted){_a=[y,x],x=_a[0],y=_a[1]}return{x:plotLeft+x-(graphic.width||0)/2,y:plotTop+y-(graphic.height||0)/2}},events:{drag:function(e,target){var isInsidePlot=target.chart.isInsidePlot(e.chartX-target.chart.plotLeft,e.chartY-target.chart.plotTop,{visiblePlotOnly:true});if(isInsidePlot){var translation=this.mouseMoveToTranslation(e);target.translatePoint(translation.x,0,1);target.redraw(false)}}}}}});Annotation.types.fibonacciTimeZones=FibonacciTimeZones;export default FibonacciTimeZones;