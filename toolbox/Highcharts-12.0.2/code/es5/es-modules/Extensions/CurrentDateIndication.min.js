"use strict";import H from"../Core/Globals.js";var composed=H.composed;import U from"../Core/Utilities.js";var addEvent=U.addEvent,merge=U.merge,pushUnique=U.pushUnique,wrap=U.wrap;var defaultOptions={color:"#ccd3ff",width:2,label:{format:"%[abdYHM]",formatter:function(value,format){return this.axis.chart.time.dateFormat(format||"",value,true)},rotation:0,style:{fontSize:"0.7em"}}};function compose(AxisClass,PlotLineOrBandClass){if(pushUnique(composed,"CurrentDateIndication")){addEvent(AxisClass,"afterSetOptions",onAxisAfterSetOptions);addEvent(PlotLineOrBandClass,"render",onPlotLineOrBandRender);wrap(PlotLineOrBandClass.prototype,"getLabelText",wrapPlotLineOrBandGetLabelText)}}function onAxisAfterSetOptions(){var options=this.options,cdiOptions=options.currentDateIndicator;if(cdiOptions){var plotLineOptions=typeof cdiOptions==="object"?merge(defaultOptions,cdiOptions):merge(defaultOptions);plotLineOptions.value=Date.now();plotLineOptions.className="highcharts-current-date-indicator";if(!options.plotLines){options.plotLines=[]}options.plotLines.push(plotLineOptions)}}function onPlotLineOrBandRender(){if(this.label){this.label.attr({text:this.getLabelText(this.options.label)})}}function wrapPlotLineOrBandGetLabelText(defaultMethod,defaultLabelOptions){var options=this.options;if(options&&options.className&&options.className.indexOf("highcharts-current-date-indicator")!==-1&&options.label&&typeof options.label.formatter==="function"){options.value=Date.now();return options.label.formatter.call(this,options.value,options.label.format)}return defaultMethod.call(this,defaultLabelOptions)}var CurrentDateIndication={compose:compose};export default CurrentDateIndication;