"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var isNumber=U.isNumber,merge=U.merge;var CMOIndicator=function(_super){__extends(CMOIndicator,_super);function CMOIndicator(){return _super!==null&&_super.apply(this,arguments)||this}CMOIndicator.prototype.getValues=function(series,params){var period=params.period,xVal=series.xData,yVal=series.yData,yValLen=yVal?yVal.length:0,CMO=[],xData=[],yData=[];var i,index=params.index,values;if(xVal.length<period){return}if(isNumber(yVal[0])){values=yVal}else{index=Math.min(index,yVal[0].length-1);values=yVal.map(function(value){return value[index]})}var firstAddedSum=0,sumOfHigherValues=0,sumOfLowerValues=0,y;for(var j=period;j>0;j--){if(values[j]>values[j-1]){sumOfHigherValues+=values[j]-values[j-1]}else if(values[j]<values[j-1]){sumOfLowerValues+=values[j-1]-values[j]}}y=sumOfHigherValues+sumOfLowerValues>0?100*(sumOfHigherValues-sumOfLowerValues)/(sumOfHigherValues+sumOfLowerValues):0;xData.push(xVal[period]);yData.push(y);CMO.push([xVal[period],y]);for(i=period+1;i<yValLen;i++){firstAddedSum=Math.abs(values[i-period-1]-values[i-period]);if(values[i]>values[i-1]){sumOfHigherValues+=values[i]-values[i-1]}else if(values[i]<values[i-1]){sumOfLowerValues+=values[i-1]-values[i]}if(values[i-period]>values[i-period-1]){sumOfHigherValues-=firstAddedSum}else{sumOfLowerValues-=firstAddedSum}y=sumOfHigherValues+sumOfLowerValues>0?100*(sumOfHigherValues-sumOfLowerValues)/(sumOfHigherValues+sumOfLowerValues):0;xData.push(xVal[i]);yData.push(y);CMO.push([xVal[i],y])}return{values:CMO,xData:xData,yData:yData}};CMOIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{period:20,index:3}});return CMOIndicator}(SMAIndicator);SeriesRegistry.registerSeriesType("cmo",CMOIndicator);export default CMOIndicator;"";