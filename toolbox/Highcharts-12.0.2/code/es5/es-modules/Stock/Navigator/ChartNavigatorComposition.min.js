"use strict";import H from"../../Core/Globals.js";var isTouchDevice=H.isTouchDevice;import U from"../../Core/Utilities.js";var addEvent=U.addEvent,merge=U.merge,pick=U.pick;var composedMembers=[];var NavigatorConstructor;function compose(ChartClass,NavigatorClass){if(U.pushUnique(composedMembers,ChartClass)){var chartProto=ChartClass.prototype;NavigatorConstructor=NavigatorClass;chartProto.callbacks.push(onChartCallback);addEvent(ChartClass,"afterAddSeries",onChartAfterAddSeries);addEvent(ChartClass,"afterSetChartSize",onChartAfterSetChartSize);addEvent(ChartClass,"afterUpdate",onChartAfterUpdate);addEvent(ChartClass,"beforeRender",onChartBeforeRender);addEvent(ChartClass,"beforeShowResetZoom",onChartBeforeShowResetZoom);addEvent(ChartClass,"update",onChartUpdate)}}function onChartAfterAddSeries(){if(this.navigator){this.navigator.setBaseSeries(null,false)}}function onChartAfterSetChartSize(){var _a;var legend=this.legend,navigator=this.navigator;var legendOptions,xAxis,yAxis;if(navigator){legendOptions=legend&&legend.options;xAxis=navigator.xAxis;yAxis=navigator.yAxis;var scrollbarHeight=navigator.scrollbarHeight,scrollButtonSize=navigator.scrollButtonSize;if(this.inverted){navigator.left=navigator.opposite?this.chartWidth-scrollbarHeight-navigator.height:this.spacing[3]+scrollbarHeight;navigator.top=this.plotTop+scrollButtonSize}else{navigator.left=pick(xAxis.left,this.plotLeft+scrollButtonSize);navigator.top=navigator.navigatorOptions.top||this.chartHeight-navigator.height-scrollbarHeight-(((_a=this.scrollbar)===null||_a===void 0?void 0:_a.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(legendOptions&&legendOptions.verticalAlign==="bottom"&&legendOptions.layout!=="proximate"&&legendOptions.enabled&&!legendOptions.floating?legend.legendHeight+pick(legendOptions.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)}if(xAxis&&yAxis){if(this.inverted){xAxis.options.left=yAxis.options.left=navigator.left}else{xAxis.options.top=yAxis.options.top=navigator.top}xAxis.setAxisSize();yAxis.setAxisSize()}}}function onChartAfterUpdate(event){if(!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)){this.scroller=this.navigator=new NavigatorConstructor(this);if(pick(event.redraw,true)){this.redraw(event.animation)}}}function onChartBeforeRender(){var options=this.options;if(options.navigator.enabled||options.scrollbar.enabled){this.scroller=this.navigator=new NavigatorConstructor(this)}}function onChartBeforeShowResetZoom(){var chartOptions=this.options,navigator=chartOptions.navigator,rangeSelector=chartOptions.rangeSelector;if((navigator&&navigator.enabled||rangeSelector&&rangeSelector.enabled)&&(!isTouchDevice&&this.zooming.type==="x"||isTouchDevice&&this.zooming.pinchType==="x")){return false}}function onChartCallback(chart){var navigator=chart.navigator;if(navigator&&chart.xAxis[0]){var extremes=chart.xAxis[0].getExtremes();navigator.render(extremes.min,extremes.max)}}function onChartUpdate(e){var navigatorOptions=e.options.navigator||{},scrollbarOptions=e.options.scrollbar||{};if(!this.navigator&&!this.scroller&&(navigatorOptions.enabled||scrollbarOptions.enabled)){merge(true,this.options.navigator,navigatorOptions);merge(true,this.options.scrollbar,scrollbarOptions);delete e.options.navigator;delete e.options.scrollbar}}var ChartNavigatorComposition={compose:compose};export default ChartNavigatorComposition;