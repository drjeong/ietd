(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("highcharts"),require("highcharts")["SeriesRegistry"]);else if(typeof define==="function"&&define.amd)define("highcharts/indicators/psar",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"]],factory);else if(typeof exports==="object")exports["highcharts/indicators/psar"]=factory(require("highcharts"),require("highcharts")["SeriesRegistry"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["SeriesRegistry"])})(this,function(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__512__){return function(){"use strict";var __webpack_modules__={512:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}!function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};__webpack_require__.d(getter,{a:getter});return getter}}();!function(){__webpack_require__.d=function(exports,definition){for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}}();!function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return psar_src}});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SMAIndicator=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.sma;var merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge;function toFixed(a,n){return parseFloat(a.toFixed(n))}function calculateDirection(previousDirection,low,high,PSAR){if(previousDirection===1&&low>PSAR||previousDirection===-1&&high>PSAR){return 1}return-1}function getAccelerationFactor(dir,pDir,eP,pEP,pAcc,inc,maxAcc,initAcc){if(dir===pDir){if(dir===1&&eP>pEP){return pAcc===maxAcc?maxAcc:toFixed(pAcc+inc,2)}if(dir===-1&&eP<pEP){return pAcc===maxAcc?maxAcc:toFixed(pAcc+inc,2)}return pAcc}return initAcc}function getExtremePoint(high,low,previousDirection,previousExtremePoint){if(previousDirection===1){return high>previousExtremePoint?high:previousExtremePoint}return low<previousExtremePoint?low:previousExtremePoint}function getEPMinusPSAR(EP,PSAR){return EP-PSAR}function getAccelerationFactorMultiply(accelerationFactor,EPMinusSAR){return accelerationFactor*EPMinusSAR}function getPSAR(pdir,sDir,PSAR,pACCMulti,sLow,pLow,pHigh,sHigh,pEP){if(pdir===sDir){if(pdir===1){return PSAR+pACCMulti<Math.min(sLow,pLow)?PSAR+pACCMulti:Math.min(sLow,pLow)}return PSAR+pACCMulti>Math.max(sHigh,pHigh)?PSAR+pACCMulti:Math.max(sHigh,pHigh)}return pEP}var PSARIndicator=function(_super){__extends(PSARIndicator,_super);function PSARIndicator(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.nameComponents=void 0;return _this}PSARIndicator.prototype.getValues=function(series,params){var xVal=series.xData,yVal=series.yData,maxAccelerationFactor=params.maxAccelerationFactor,increment=params.increment,initialAccelerationFactor=params.initialAccelerationFactor,decimals=params.decimals,index=params.index,PSARArr=[],xData=[],yData=[];var accelerationFactor=params.initialAccelerationFactor,direction,extremePoint=yVal[0][1],EPMinusPSAR,accelerationFactorMultiply,newDirection,previousDirection=1,prevLow,prevPrevLow,prevHigh,prevPrevHigh,PSAR=yVal[0][2],newExtremePoint,high,low,ind;if(index>=yVal.length){return}for(ind=0;ind<index;ind++){extremePoint=Math.max(yVal[ind][1],extremePoint);PSAR=Math.min(yVal[ind][2],toFixed(PSAR,decimals))}direction=yVal[ind][1]>PSAR?1:-1;EPMinusPSAR=getEPMinusPSAR(extremePoint,PSAR);accelerationFactor=params.initialAccelerationFactor;accelerationFactorMultiply=getAccelerationFactorMultiply(accelerationFactor,EPMinusPSAR);PSARArr.push([xVal[index],PSAR]);xData.push(xVal[index]);yData.push(toFixed(PSAR,decimals));for(ind=index+1;ind<yVal.length;ind++){prevLow=yVal[ind-1][2];prevPrevLow=yVal[ind-2][2];prevHigh=yVal[ind-1][1];prevPrevHigh=yVal[ind-2][1];high=yVal[ind][1];low=yVal[ind][2];if(prevPrevLow!==null&&prevPrevHigh!==null&&prevLow!==null&&prevHigh!==null&&high!==null&&low!==null){PSAR=getPSAR(direction,previousDirection,PSAR,accelerationFactorMultiply,prevPrevLow,prevLow,prevHigh,prevPrevHigh,extremePoint);newExtremePoint=getExtremePoint(high,low,direction,extremePoint);newDirection=calculateDirection(previousDirection,low,high,PSAR);accelerationFactor=getAccelerationFactor(newDirection,direction,newExtremePoint,extremePoint,accelerationFactor,increment,maxAccelerationFactor,initialAccelerationFactor);EPMinusPSAR=getEPMinusPSAR(newExtremePoint,PSAR);accelerationFactorMultiply=getAccelerationFactorMultiply(accelerationFactor,EPMinusPSAR);PSARArr.push([xVal[ind],toFixed(PSAR,decimals)]);xData.push(xVal[ind]);yData.push(toFixed(PSAR,decimals));previousDirection=direction;direction=newDirection;extremePoint=newExtremePoint}}return{values:PSARArr,xData:xData,yData:yData}};PSARIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{lineWidth:0,marker:{enabled:true},states:{hover:{lineWidthPlus:0}},params:{period:void 0,initialAccelerationFactor:.02,maxAccelerationFactor:.2,increment:.02,index:2,decimals:4}});return PSARIndicator}(SMAIndicator);highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("psar",PSARIndicator);var PSAR_PSARIndicator=null&&PSARIndicator;"";var psar_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__}()});