(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("highcharts"),require("highcharts")["Axis"],require("highcharts")["Color"],require("highcharts")["LegendSymbol"],require("highcharts")["SeriesRegistry"],require("highcharts")["SVGElement"],require("highcharts")["Series"],require("highcharts")["Chart"],require("highcharts")["SVGRenderer"],require("highcharts")["Templating"],require("highcharts")["Series"]["types"]["scatter"],require("highcharts")["Point"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/map",[["highcharts/highcharts"],["highcharts/highcharts","Axis"],["highcharts/highcharts","Color"],["highcharts/highcharts","LegendSymbol"],["highcharts/highcharts","SeriesRegistry"],["highcharts/highcharts","SVGElement"],["highcharts/highcharts","Series"],["highcharts/highcharts","Chart"],["highcharts/highcharts","SVGRenderer"],["highcharts/highcharts","Templating"],["highcharts/highcharts","Series","types","scatter"],["highcharts/highcharts","Point"]],factory);else if(typeof exports==="object")exports["highcharts/modules/map"]=factory(require("highcharts"),require("highcharts")["Axis"],require("highcharts")["Color"],require("highcharts")["LegendSymbol"],require("highcharts")["SeriesRegistry"],require("highcharts")["SVGElement"],require("highcharts")["Series"],require("highcharts")["Chart"],require("highcharts")["SVGRenderer"],require("highcharts")["Templating"],require("highcharts")["Series"]["types"]["scatter"],require("highcharts")["Point"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["Axis"],root["Highcharts"]["Color"],root["Highcharts"]["LegendSymbol"],root["Highcharts"]["SeriesRegistry"],root["Highcharts"]["SVGElement"],root["Highcharts"]["Series"],root["Highcharts"]["Chart"],root["Highcharts"]["SVGRenderer"],root["Highcharts"]["Templating"],root["Highcharts"]["Series"]["types"]["scatter"],root["Highcharts"]["Point"])})(this,function(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__532__,__WEBPACK_EXTERNAL_MODULE__620__,__WEBPACK_EXTERNAL_MODULE__500__,__WEBPACK_EXTERNAL_MODULE__512__,__WEBPACK_EXTERNAL_MODULE__28__,__WEBPACK_EXTERNAL_MODULE__820__,__WEBPACK_EXTERNAL_MODULE__960__,__WEBPACK_EXTERNAL_MODULE__540__,__WEBPACK_EXTERNAL_MODULE__984__,__WEBPACK_EXTERNAL_MODULE__632__,__WEBPACK_EXTERNAL_MODULE__260__){return function(){"use strict";var __webpack_modules__={532:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__532__},960:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__960__},620:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__620__},500:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__500__},260:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__260__},28:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__28__},540:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__540__},632:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__632__},820:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__820__},512:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__512__},984:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__984__},944:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}!function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};__webpack_require__.d(getter,{a:getter});return getter}}();!function(){__webpack_require__.d=function(exports,definition){for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}}();!function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return map_src}});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_Axis_commonjs_highcharts_Axis_commonjs2_highcharts_Axis_root_Highcharts_Axis_=__webpack_require__(532);var highcharts_Axis_commonjs_highcharts_Axis_commonjs2_highcharts_Axis_root_Highcharts_Axis_default=__webpack_require__.n(highcharts_Axis_commonjs_highcharts_Axis_commonjs2_highcharts_Axis_root_Highcharts_Axis_);var highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_=__webpack_require__(620);var highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default=__webpack_require__.n(highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_);var color=highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default().parse;var addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,splat=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().splat;var ColorAxisComposition;(function(ColorAxisComposition){var ColorAxisConstructor;function compose(ColorAxisClass,ChartClass,FxClass,LegendClass,SeriesClass){var chartProto=ChartClass.prototype,fxProto=FxClass.prototype,seriesProto=SeriesClass.prototype;if(!chartProto.collectionsWithUpdate.includes("colorAxis")){ColorAxisConstructor=ColorAxisClass;chartProto.collectionsWithUpdate.push("colorAxis");chartProto.collectionsWithInit.colorAxis=[chartProto.addColorAxis];addEvent(ChartClass,"afterCreateAxes",onChartAfterCreateAxes);wrapChartCreateAxis(ChartClass);fxProto.fillSetter=wrapFxFillSetter;fxProto.strokeSetter=wrapFxStrokeSetter;addEvent(LegendClass,"afterGetAllItems",onLegendAfterGetAllItems);addEvent(LegendClass,"afterColorizeItem",onLegendAfterColorizeItem);addEvent(LegendClass,"afterUpdate",onLegendAfterUpdate);extend(seriesProto,{optionalAxis:"colorAxis",translateColors:seriesTranslateColors});extend(seriesProto.pointClass.prototype,{setVisible:pointSetVisible});addEvent(SeriesClass,"afterTranslate",onSeriesAfterTranslate,{order:1});addEvent(SeriesClass,"bindAxes",onSeriesBindAxes)}}ColorAxisComposition.compose=compose;function onChartAfterCreateAxes(){var _this=this;var userOptions=this.userOptions;this.colorAxis=[];if(userOptions.colorAxis){userOptions.colorAxis=splat(userOptions.colorAxis);userOptions.colorAxis.map(function(axisOptions){return new ColorAxisConstructor(_this,axisOptions)})}}function onLegendAfterGetAllItems(e){var _this=this;var colorAxes=this.chart.colorAxis||[],destroyItem=function(item){var i=e.allItems.indexOf(item);if(i!==-1){_this.destroyItem(e.allItems[i]);e.allItems.splice(i,1)}};var colorAxisItems=[],options,i;colorAxes.forEach(function(colorAxis){options=colorAxis.options;if(options&&options.showInLegend){if(options.dataClasses&&options.visible){colorAxisItems=colorAxisItems.concat(colorAxis.getDataClassLegendSymbols())}else if(options.visible){colorAxisItems.push(colorAxis)}colorAxis.series.forEach(function(series){if(!series.options.showInLegend||options.dataClasses){if(series.options.legendType==="point"){series.points.forEach(function(point){destroyItem(point)})}else{destroyItem(series)}}})}});i=colorAxisItems.length;while(i--){e.allItems.unshift(colorAxisItems[i])}}function onLegendAfterColorizeItem(e){if(e.visible&&e.item.legendColor){e.item.legendItem.symbol.attr({fill:e.item.legendColor})}}function onLegendAfterUpdate(e){var _a;(_a=this.chart.colorAxis)===null||_a===void 0?void 0:_a.forEach(function(colorAxis){colorAxis.update({},e.redraw)})}function onSeriesAfterTranslate(){if(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs){this.translateColors()}}function onSeriesBindAxes(){var axisTypes=this.axisTypes;if(!axisTypes){this.axisTypes=["colorAxis"]}else if(axisTypes.indexOf("colorAxis")===-1){axisTypes.push("colorAxis")}}function pointSetVisible(vis){var point=this,method=vis?"show":"hide";point.visible=point.options.visible=Boolean(vis);["graphic","dataLabel"].forEach(function(key){if(point[key]){point[key][method]()}});this.series.buildKDTree()}ColorAxisComposition.pointSetVisible=pointSetVisible;function seriesTranslateColors(){var series=this,points=this.getPointsCollection(),nullColor=this.options.nullColor,colorAxis=this.colorAxis,colorKey=this.colorKey;points.forEach(function(point){var value=point.getNestedProperty(colorKey),color=point.options.color||(point.isNull||point.value===null?nullColor:colorAxis&&typeof value!=="undefined"?colorAxis.toColor(value,point):point.color||series.color);if(color&&point.color!==color){point.color=color;if(series.options.legendType==="point"&&point.legendItem&&point.legendItem.label){series.chart.legend.colorizeItem(point,point.visible)}}})}function wrapChartCreateAxis(ChartClass){var superCreateAxis=ChartClass.prototype.createAxis;ChartClass.prototype.createAxis=function(type,options){var chart=this;if(type!=="colorAxis"){return superCreateAxis.apply(chart,arguments)}var axis=new ColorAxisConstructor(chart,merge(options.axis,{index:chart[type].length,isX:false}));chart.isDirtyLegend=true;chart.axes.forEach(function(axis){axis.series=[]});chart.series.forEach(function(series){series.bindAxes();series.isDirtyData=true});if(pick(options.redraw,true)){chart.redraw(options.animation)}return axis}}function wrapFxFillSetter(){this.elem.attr("fill",color(this.start).tweenTo(color(this.end),this.pos),void 0,true)}function wrapFxStrokeSetter(){this.elem.attr("stroke",color(this.start).tweenTo(color(this.end),this.pos),void 0,true)}})(ColorAxisComposition||(ColorAxisComposition={}));var Color_ColorAxisComposition=ColorAxisComposition;var colorAxisDefaults={lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:true};var ColorAxisDefaults=colorAxisDefaults;var ColorAxisLike_color=highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default().parse;var ColorAxisLike_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge;var ColorAxisLike;(function(ColorAxisLike){function initDataClasses(userOptions){var axis=this,chart=axis.chart,legendItem=axis.legendItem=axis.legendItem||{},options=axis.options,userDataClasses=userOptions.dataClasses||[];var dataClass,dataClasses,colorCount=chart.options.chart.colorCount,colorCounter=0,colors;axis.dataClasses=dataClasses=[];legendItem.labels=[];for(var i=0,iEnd=userDataClasses.length;i<iEnd;++i){dataClass=userDataClasses[i];dataClass=ColorAxisLike_merge(dataClass);dataClasses.push(dataClass);if(!chart.styledMode&&dataClass.color){continue}if(options.dataClassColor==="category"){if(!chart.styledMode){colors=chart.options.colors||[];colorCount=colors.length;dataClass.color=colors[colorCounter]}dataClass.colorIndex=colorCounter;colorCounter++;if(colorCounter===colorCount){colorCounter=0}}else{dataClass.color=ColorAxisLike_color(options.minColor).tweenTo(ColorAxisLike_color(options.maxColor),iEnd<2?.5:i/(iEnd-1))}}}ColorAxisLike.initDataClasses=initDataClasses;function initStops(){var axis=this,options=axis.options,stops=axis.stops=options.stops||[[0,options.minColor||""],[1,options.maxColor||""]];for(var i=0,iEnd=stops.length;i<iEnd;++i){stops[i].color=ColorAxisLike_color(stops[i][1])}}ColorAxisLike.initStops=initStops;function normalizedValue(value){var axis=this,max=axis.max||0,min=axis.min||0;if(axis.logarithmic){value=axis.logarithmic.log2lin(value)}return 1-(max-value)/(max-min||1)}ColorAxisLike.normalizedValue=normalizedValue;function toColor(value,point){var axis=this;var dataClasses=axis.dataClasses;var stops=axis.stops;var pos,from,to,color,dataClass,i;if(dataClasses){i=dataClasses.length;while(i--){dataClass=dataClasses[i];from=dataClass.from;to=dataClass.to;if((typeof from==="undefined"||value>=from)&&(typeof to==="undefined"||value<=to)){color=dataClass.color;if(point){point.dataClass=i;point.colorIndex=dataClass.colorIndex}break}}}else{pos=axis.normalizedValue(value);i=stops.length;while(i--){if(pos>stops[i][0]){break}}from=stops[i]||stops[i+1];to=stops[i+1]||from;pos=1-(to[0]-pos)/(to[0]-from[0]||1);color=from.color.tweenTo(to.color,pos)}return color}ColorAxisLike.toColor=toColor})(ColorAxisLike||(ColorAxisLike={}));var Color_ColorAxisLike=ColorAxisLike;var highcharts_LegendSymbol_commonjs_highcharts_LegendSymbol_commonjs2_highcharts_LegendSymbol_root_Highcharts_LegendSymbol_=__webpack_require__(500);var highcharts_LegendSymbol_commonjs_highcharts_LegendSymbol_commonjs2_highcharts_LegendSymbol_root_Highcharts_LegendSymbol_default=__webpack_require__.n(highcharts_LegendSymbol_commonjs_highcharts_LegendSymbol_commonjs2_highcharts_LegendSymbol_root_Highcharts_LegendSymbol_);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var defaultOptions=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defaultOptions;var Series=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().series;var defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,ColorAxis_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,isArray=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isArray,isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,ColorAxis_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,ColorAxis_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;defaultOptions.colorAxis=ColorAxis_merge(defaultOptions.xAxis,ColorAxisDefaults);var ColorAxis=function(_super){__extends(ColorAxis,_super);function ColorAxis(chart,userOptions){var _this=_super.call(this,chart,userOptions)||this;_this.coll="colorAxis";_this.visible=true;_this.init(chart,userOptions);return _this}ColorAxis.compose=function(ChartClass,FxClass,LegendClass,SeriesClass){Color_ColorAxisComposition.compose(ColorAxis,ChartClass,FxClass,LegendClass,SeriesClass)};ColorAxis.prototype.init=function(chart,userOptions){var axis=this;var legend=chart.options.legend||{},horiz=userOptions.layout?userOptions.layout!=="vertical":legend.layout!=="vertical";axis.side=userOptions.side||horiz?2:1;axis.reversed=userOptions.reversed||!horiz;axis.opposite=!horiz;_super.prototype.init.call(this,chart,userOptions,"colorAxis");this.userOptions=userOptions;if(isArray(chart.userOptions.colorAxis)){chart.userOptions.colorAxis[this.index]=userOptions}if(userOptions.dataClasses){axis.initDataClasses(userOptions)}axis.initStops();axis.horiz=horiz;axis.zoomEnabled=false};ColorAxis.prototype.hasData=function(){return!!(this.tickPositions||[]).length};ColorAxis.prototype.setTickPositions=function(){if(!this.dataClasses){return _super.prototype.setTickPositions.call(this)}};ColorAxis.prototype.setOptions=function(userOptions){var options=ColorAxis_merge(defaultOptions.colorAxis,userOptions,{showEmpty:false,title:null,visible:this.chart.options.legend.enabled&&userOptions.visible!==false});_super.prototype.setOptions.call(this,options);this.options.crosshair=this.options.marker};ColorAxis.prototype.setAxisSize=function(){var _a;var axis=this,chart=axis.chart,symbol=(_a=axis.legendItem)===null||_a===void 0?void 0:_a.symbol;var _b=axis.getSize(),width=_b.width,height=_b.height;if(symbol){this.left=+symbol.attr("x");this.top=+symbol.attr("y");this.width=width=+symbol.attr("width");this.height=height=+symbol.attr("height");this.right=chart.chartWidth-this.left-width;this.bottom=chart.chartHeight-this.top-height;this.pos=this.horiz?this.left:this.top}this.len=(this.horiz?width:height)||ColorAxis.defaultLegendLength};ColorAxis.prototype.getOffset=function(){var _a;var axis=this;var group=(_a=axis.legendItem)===null||_a===void 0?void 0:_a.group;var sideOffset=axis.chart.axisOffset[axis.side];if(group){axis.axisParent=group;_super.prototype.getOffset.call(this);var legend_1=this.chart.legend;legend_1.allItems.forEach(function(item){if(item instanceof ColorAxis){item.drawLegendSymbol(legend_1,item)}});legend_1.render();this.chart.getMargins(true);if(!this.chart.series.some(function(series){return series.isDrilling})){axis.isDirty=true}if(!axis.added){axis.added=true;axis.labelLeft=0;axis.labelRight=axis.width}axis.chart.axisOffset[axis.side]=sideOffset}};ColorAxis.prototype.setLegendColor=function(){var axis=this;var horiz=axis.horiz;var reversed=axis.reversed;var one=reversed?1:0;var zero=reversed?0:1;var grad=horiz?[one,0,zero,0]:[0,zero,0,one];axis.legendColor={linearGradient:{x1:grad[0],y1:grad[1],x2:grad[2],y2:grad[3]},stops:axis.stops}};ColorAxis.prototype.drawLegendSymbol=function(legend,item){var _a;var axis=this,legendItem=item.legendItem||{},padding=legend.padding,legendOptions=legend.options,labelOptions=axis.options.labels,itemDistance=ColorAxis_pick(legendOptions.itemDistance,10),horiz=axis.horiz,_b=axis.getSize(),width=_b.width,height=_b.height,labelPadding=ColorAxis_pick(legendOptions.labelPadding,horiz?16:30);this.setLegendColor();if(!legendItem.symbol){legendItem.symbol=this.chart.renderer.symbol("roundedRect").attr({r:(_a=legendOptions.symbolRadius)!==null&&_a!==void 0?_a:3,zIndex:1}).add(legendItem.group)}legendItem.symbol.attr({x:0,y:(legend.baseline||0)-11,width:width,height:height});legendItem.labelWidth=width+padding+(horiz?itemDistance:ColorAxis_pick(labelOptions.x,labelOptions.distance)+(this.maxLabelLength||0));legendItem.labelHeight=height+padding+(horiz?labelPadding:0)};ColorAxis.prototype.setState=function(state){this.series.forEach(function(series){series.setState(state)})};ColorAxis.prototype.setVisible=function(){};ColorAxis.prototype.getSeriesExtremes=function(){var axis=this;var series=axis.series;var colorValArray,colorKey,calculatedExtremes,cSeries,i=series.length;this.dataMin=Infinity;this.dataMax=-Infinity;while(i--){cSeries=series[i];colorKey=cSeries.colorKey=ColorAxis_pick(cSeries.options.colorKey,cSeries.colorKey,cSeries.pointValKey,cSeries.zoneAxis,"y");calculatedExtremes=cSeries[colorKey+"Min"]&&cSeries[colorKey+"Max"];for(var _i=0,_a=[colorKey,"value","y"];_i<_a.length;_i++){var key=_a[_i];colorValArray=cSeries.getColumn(key);if(colorValArray.length){break}}if(calculatedExtremes){cSeries.minColorValue=cSeries[colorKey+"Min"];cSeries.maxColorValue=cSeries[colorKey+"Max"]}else{var cExtremes=Series.prototype.getExtremes.call(cSeries,colorValArray);cSeries.minColorValue=cExtremes.dataMin;cSeries.maxColorValue=cExtremes.dataMax}if(defined(cSeries.minColorValue)&&defined(cSeries.maxColorValue)){this.dataMin=Math.min(this.dataMin,cSeries.minColorValue);this.dataMax=Math.max(this.dataMax,cSeries.maxColorValue)}if(!calculatedExtremes){Series.prototype.applyExtremes.call(cSeries)}}};ColorAxis.prototype.drawCrosshair=function(e,point){var axis=this,legendItem=axis.legendItem||{},plotX=point&&point.plotX,plotY=point&&point.plotY,axisPos=axis.pos,axisLen=axis.len;var crossPos;if(point){crossPos=axis.toPixels(point.getNestedProperty(point.series.colorKey));if(crossPos<axisPos){crossPos=axisPos-2}else if(crossPos>axisPos+axisLen){crossPos=axisPos+axisLen+2}point.plotX=crossPos;point.plotY=axis.len-crossPos;_super.prototype.drawCrosshair.call(this,e,point);point.plotX=plotX;point.plotY=plotY;if(axis.cross&&!axis.cross.addedToColorAxis&&legendItem.group){axis.cross.addClass("highcharts-coloraxis-marker").add(legendItem.group);axis.cross.addedToColorAxis=true;if(!axis.chart.styledMode&&typeof axis.crosshair==="object"){axis.cross.attr({fill:axis.crosshair.color})}}}};ColorAxis.prototype.getPlotLinePath=function(options){var axis=this,left=axis.left,pos=options.translatedValue,top=axis.top;return isNumber(pos)?axis.horiz?[["M",pos-4,top-6],["L",pos+4,top-6],["L",pos,top],["Z"]]:[["M",left,pos],["L",left-6,pos+6],["L",left-6,pos-6],["Z"]]:_super.prototype.getPlotLinePath.call(this,options)};ColorAxis.prototype.update=function(newOptions,redraw){var axis=this,chart=axis.chart,legend=chart.legend;this.series.forEach(function(series){series.isDirtyData=true});if(newOptions.dataClasses&&legend.allItems||axis.dataClasses){axis.destroyItems()}_super.prototype.update.call(this,newOptions,redraw);if(axis.legendItem&&axis.legendItem.label){axis.setLegendColor();legend.colorizeItem(this,true)}};ColorAxis.prototype.destroyItems=function(){var axis=this,chart=axis.chart,legendItem=axis.legendItem||{};if(legendItem.label){chart.legend.destroyItem(axis)}else if(legendItem.labels){for(var _i=0,_a=legendItem.labels;_i<_a.length;_i++){var item=_a[_i];chart.legend.destroyItem(item)}}chart.isDirtyLegend=true};ColorAxis.prototype.destroy=function(){this.chart.isDirtyLegend=true;this.destroyItems();_super.prototype.destroy.apply(this,[].slice.call(arguments))};ColorAxis.prototype.remove=function(redraw){this.destroyItems();_super.prototype.remove.call(this,redraw)};ColorAxis.prototype.getDataClassLegendSymbols=function(){var axis=this,chart=axis.chart,legendItems=axis.legendItem&&axis.legendItem.labels||[],legendOptions=chart.options.legend,valueDecimals=ColorAxis_pick(legendOptions.valueDecimals,-1),valueSuffix=ColorAxis_pick(legendOptions.valueSuffix,"");var getPointsInDataClass=function(i){return axis.series.reduce(function(points,s){points.push.apply(points,s.points.filter(function(point){return point.dataClass===i}));return points},[])};var name;if(!legendItems.length){axis.dataClasses.forEach(function(dataClass,i){var from=dataClass.from,to=dataClass.to,numberFormatter=chart.numberFormatter;var vis=true;name="";if(typeof from==="undefined"){name="< "}else if(typeof to==="undefined"){name="> "}if(typeof from!=="undefined"){name+=numberFormatter(from,valueDecimals)+valueSuffix}if(typeof from!=="undefined"&&typeof to!=="undefined"){name+=" - "}if(typeof to!=="undefined"){name+=numberFormatter(to,valueDecimals)+valueSuffix}legendItems.push(ColorAxis_extend({chart:chart,name:name,options:{},drawLegendSymbol:highcharts_LegendSymbol_commonjs_highcharts_LegendSymbol_commonjs2_highcharts_LegendSymbol_root_Highcharts_LegendSymbol_default().rectangle,visible:true,isDataClass:true,setState:function(state){for(var _i=0,_a=getPointsInDataClass(i);_i<_a.length;_i++){var point=_a[_i];point.setState(state)}},setVisible:function(){this.visible=vis=axis.visible=!vis;var affectedSeries=[];for(var _i=0,_a=getPointsInDataClass(i);_i<_a.length;_i++){var point=_a[_i];point.setVisible(vis);point.hiddenInDataClass=!vis;if(affectedSeries.indexOf(point.series)===-1){affectedSeries.push(point.series)}}chart.legend.colorizeItem(this,vis);affectedSeries.forEach(function(series){fireEvent(series,"afterDataClassLegendClick")})}},dataClass))})}return legendItems};ColorAxis.prototype.getSize=function(){var axis=this,chart=axis.chart,horiz=axis.horiz,_a=axis.options,colorAxisHeight=_a.height,colorAxisWidth=_a.width,legendOptions=chart.options.legend,width=ColorAxis_pick(defined(colorAxisWidth)?relativeLength(colorAxisWidth,chart.chartWidth):void 0,legendOptions===null||legendOptions===void 0?void 0:legendOptions.symbolWidth,horiz?ColorAxis.defaultLegendLength:12),height=ColorAxis_pick(defined(colorAxisHeight)?relativeLength(colorAxisHeight,chart.chartHeight):void 0,legendOptions===null||legendOptions===void 0?void 0:legendOptions.symbolHeight,horiz?12:ColorAxis.defaultLegendLength);return{width:width,height:height}};ColorAxis.defaultLegendLength=200;ColorAxis.keepProps=["legendItem"];return ColorAxis}(highcharts_Axis_commonjs_highcharts_Axis_commonjs2_highcharts_Axis_root_Highcharts_Axis_default());ColorAxis_extend(ColorAxis.prototype,Color_ColorAxisLike);Array.prototype.push.apply(highcharts_Axis_commonjs_highcharts_Axis_commonjs2_highcharts_Axis_root_Highcharts_Axis_default().keepProps,ColorAxis.keepProps);var Color_ColorAxis=ColorAxis;"";var G=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();G.ColorAxis=G.ColorAxis||Color_ColorAxis;G.ColorAxis.compose(G.Chart,G.Fx,G.Legend,G.Series);var coloraxis_src=null&&Highcharts;var lang={zoomIn:"Zoom in",zoomOut:"Zoom out"};var mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1};var mapNavigationDefaults={lang:lang,mapNavigation:mapNavigation};var MapNavigationDefaults=mapNavigationDefaults;var MapPointer_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,MapPointer_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapPointer_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,wrap=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().wrap;var MapPointer;(function(MapPointer){var totalWheelDelta=0;var totalWheelDeltaTimer;function compose(PointerClass){var pointerProto=PointerClass.prototype;if(!pointerProto.onContainerDblClick){MapPointer_extend(pointerProto,{onContainerDblClick:onContainerDblClick,onContainerMouseWheel:onContainerMouseWheel});wrap(pointerProto,"normalize",wrapNormalize);wrap(pointerProto,"zoomOption",wrapZoomOption)}}MapPointer.compose=compose;function onContainerDblClick(e){var chart=this.chart;e=this.normalize(e);if(chart.options.mapNavigation.enableDoubleClickZoomTo){if(chart.pointer.inClass(e.target,"highcharts-tracker")&&chart.hoverPoint){chart.hoverPoint.zoomTo()}}else if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){chart.mapZoom(.5,void 0,void 0,e.chartX,e.chartY)}}function onContainerMouseWheel(e){var chart=this.chart;e=this.normalize(e);var delta=MapPointer_defined(e.wheelDelta)&&-e.wheelDelta/120||e.deltaY||e.detail;if(Math.abs(delta)>=1){totalWheelDelta+=Math.abs(delta);if(totalWheelDeltaTimer){clearTimeout(totalWheelDeltaTimer)}totalWheelDeltaTimer=setTimeout(function(){totalWheelDelta=0},50)}if(totalWheelDelta<10&&chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)&&chart.mapView){chart.mapView.zoomBy((chart.options.mapNavigation.mouseWheelSensitivity-1)*-delta,void 0,[e.chartX,e.chartY],Math.abs(delta)<1?false:void 0)}}function wrapNormalize(proceed,e,chartPosition){var chart=this.chart;e=proceed.call(this,e,chartPosition);if(chart&&chart.mapView){var lonLat=chart.mapView.pixelsToLonLat({x:e.chartX-chart.plotLeft,y:e.chartY-chart.plotTop});if(lonLat){MapPointer_extend(e,lonLat)}}return e}function wrapZoomOption(proceed){var mapNavigation=this.chart.options.mapNavigation;if(mapNavigation&&MapPointer_pick(mapNavigation.enableTouchZoom,mapNavigation.enabled)){this.chart.zooming.pinchType="xy"}proceed.apply(this,[].slice.call(arguments,1))}})(MapPointer||(MapPointer={}));var Maps_MapPointer=MapPointer;var symbols;function bottomButton(x,y,w,h,options){if(options){var r=(options===null||options===void 0?void 0:options.r)||0;options.brBoxY=y-r;options.brBoxHeight=h+r}return symbols.roundedRect(x,y,w,h,options)}function compose(SVGRendererClass){symbols=SVGRendererClass.prototype.symbols;symbols.bottombutton=bottomButton;symbols.topbutton=topButton}function topButton(x,y,w,h,options){if(options){var r=(options===null||options===void 0?void 0:options.r)||0;options.brBoxHeight=h+r}return symbols.roundedRect(x,y,w,h,options)}var MapSymbols={compose:compose};var Maps_MapSymbols=MapSymbols;var setOptions=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().setOptions;var composed=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().composed;var MapNavigation_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,MapNavigation_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapNavigation_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,objectEach=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().objectEach,MapNavigation_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,pushUnique=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pushUnique;function stopEvent(e){var _a,_b;if(e){(_a=e.preventDefault)===null||_a===void 0?void 0:_a.call(e);(_b=e.stopPropagation)===null||_b===void 0?void 0:_b.call(e);e.cancelBubble=true}}var MapNavigation=function(){function MapNavigation(chart){this.chart=chart;this.navButtons=[]}MapNavigation.compose=function(MapChartClass,PointerClass,SVGRendererClass){Maps_MapPointer.compose(PointerClass);Maps_MapSymbols.compose(SVGRendererClass);if(pushUnique(composed,"Map.Navigation")){MapNavigation_addEvent(MapChartClass,"beforeRender",function(){this.mapNavigation=new MapNavigation(this);this.mapNavigation.update()});setOptions(MapNavigationDefaults)}};MapNavigation.prototype.update=function(options){var _a;var mapNav=this,chart=mapNav.chart,navButtons=mapNav.navButtons,outerHandler=function(e){this.handler.call(chart,e);stopEvent(e)};var navOptions=chart.options.mapNavigation;if(options){navOptions=chart.options.mapNavigation=MapNavigation_merge(chart.options.mapNavigation,options)}while(navButtons.length){(_a=navButtons.pop())===null||_a===void 0?void 0:_a.destroy()}if(!chart.renderer.forExport&&MapNavigation_pick(navOptions.enableButtons,navOptions.enabled)){if(!mapNav.navButtonsGroup){mapNav.navButtonsGroup=chart.renderer.g().attr({zIndex:7}).add()}objectEach(navOptions.buttons,function(buttonOptions,n){var _a;buttonOptions=MapNavigation_merge(navOptions.buttonOptions,buttonOptions);var attr={padding:buttonOptions.padding};if(!chart.styledMode&&buttonOptions.theme){MapNavigation_extend(attr,buttonOptions.theme);attr.style=MapNavigation_merge(buttonOptions.theme.style,buttonOptions.style)}var text=buttonOptions.text,_b=buttonOptions.width,width=_b===void 0?0:_b,_c=buttonOptions.height,height=_c===void 0?0:_c,_d=buttonOptions.padding,padding=_d===void 0?0:_d;var button=chart.renderer.button(text!=="+"&&text!=="-"&&text||"",0,0,outerHandler,attr,void 0,void 0,void 0,n==="zoomIn"?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[n]).attr({width:width,height:height,title:chart.options.lang[n],zIndex:5}).add(mapNav.navButtonsGroup);if(text==="+"||text==="-"){var w=width+1,d=[["M",padding+3,padding+height/2],["L",padding+w-3,padding+height/2]];if(text==="+"){d.push(["M",padding+w/2,padding+3],["L",padding+w/2,padding+height-3])}chart.renderer.path(d).addClass("highcharts-button-symbol").attr(chart.styledMode?{}:{stroke:(_a=buttonOptions.style)===null||_a===void 0?void 0:_a.color,"stroke-width":3,"stroke-linecap":"round"}).add(button)}button.handler=buttonOptions.onclick;MapNavigation_addEvent(button.element,"dblclick",stopEvent);navButtons.push(button);MapNavigation_extend(buttonOptions,{width:button.width,height:2*(button.height||0)});if(!chart.hasLoaded){var unbind_1=MapNavigation_addEvent(chart,"load",function(){if(button.element){button.align(buttonOptions,false,buttonOptions.alignTo)}unbind_1()})}else{button.align(buttonOptions,false,buttonOptions.alignTo)}});var isIntersectRect_1=function(box1,box2){return!(box2.x>=box1.x+box1.width||box2.x+box2.width<=box1.x||box2.y>=box1.y+box1.height||box2.y+box2.height<=box1.y)};var adjustMapNavBtn=function(){var _a;var expBtnBBox=(_a=chart.exportingGroup)===null||_a===void 0?void 0:_a.getBBox();if(expBtnBBox){var navBtnsBBox=mapNav.navButtonsGroup.getBBox();if(isIntersectRect_1(expBtnBBox,navBtnsBBox)){var aboveExpBtn=-navBtnsBBox.y-navBtnsBBox.height+expBtnBBox.y-5,belowExpBtn=expBtnBBox.y+expBtnBBox.height-navBtnsBBox.y+5,mapNavVerticalAlign=navOptions.buttonOptions&&navOptions.buttonOptions.verticalAlign;mapNav.navButtonsGroup.attr({translateY:mapNavVerticalAlign==="bottom"?aboveExpBtn:belowExpBtn})}}};if(!chart.hasLoaded){MapNavigation_addEvent(chart,"render",adjustMapNavBtn)}}this.updateEvents(navOptions)};MapNavigation.prototype.updateEvents=function(options){var chart=this.chart;if(MapNavigation_pick(options.enableDoubleClickZoom,options.enabled)||options.enableDoubleClickZoomTo){this.unbindDblClick=this.unbindDblClick||MapNavigation_addEvent(chart.container,"dblclick",function(e){chart.pointer.onContainerDblClick(e)})}else if(this.unbindDblClick){this.unbindDblClick=this.unbindDblClick()}if(MapNavigation_pick(options.enableMouseWheelZoom,options.enabled)){this.unbindMouseWheel=this.unbindMouseWheel||MapNavigation_addEvent(chart.container,"wheel",function(e){var _a,_b;if(!chart.pointer.inClass(e.target,"highcharts-no-mousewheel")){var initialZoom=(_a=chart.mapView)===null||_a===void 0?void 0:_a.zoom;chart.pointer.onContainerMouseWheel(e);if(initialZoom!==((_b=chart.mapView)===null||_b===void 0?void 0:_b.zoom)){stopEvent(e)}}return false})}else if(this.unbindMouseWheel){this.unbindMouseWheel=this.unbindMouseWheel()}};return MapNavigation}();var Maps_MapNavigation=MapNavigation;var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_=__webpack_require__(28);var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default=__webpack_require__.n(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_);var columnProto=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.column.prototype;var ColorMapComposition_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,ColorMapComposition_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined;var ColorMapComposition;(function(ColorMapComposition){ColorMapComposition.pointMembers={dataLabelOnNull:true,moveToTopOnHover:true,isValid:pointIsValid};ColorMapComposition.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:seriesColorAttribs,pointAttribs:columnProto.pointAttribs};function compose(SeriesClass){var PointClass=SeriesClass.prototype.pointClass;ColorMapComposition_addEvent(PointClass,"afterSetState",onPointAfterSetState);return SeriesClass}ColorMapComposition.compose=compose;function onPointAfterSetState(e){var point=this,series=point.series,renderer=series.chart.renderer;if(point.moveToTopOnHover&&point.graphic){if(!series.stateMarkerGraphic){series.stateMarkerGraphic=new(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default())(renderer,"use").css({pointerEvents:"none"}).add(point.graphic.parentGroup)}if((e===null||e===void 0?void 0:e.state)==="hover"){point.graphic.attr({id:this.id});series.stateMarkerGraphic.attr({href:""+renderer.url+"#".concat(this.id),visibility:"visible"})}else{series.stateMarkerGraphic.attr({href:""})}}}function pointIsValid(){return this.value!==null&&this.value!==Infinity&&this.value!==-Infinity&&(this.value===void 0||!isNaN(this.value))}function seriesColorAttribs(point){var ret={};if(ColorMapComposition_defined(point.color)&&(!point.state||point.state==="normal")){ret[this.colorProp||"fill"]=point.color}return ret}})(ColorMapComposition||(ColorMapComposition={}));var Series_ColorMapComposition=ColorMapComposition;var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_=__webpack_require__(820);var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default=__webpack_require__.n(highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_);var deg2rad=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad;var CenteredUtilities_fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,CenteredUtilities_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,CenteredUtilities_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,CenteredUtilities_relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;var CenteredUtilities;(function(CenteredUtilities){function getCenter(){var options=this.options,chart=this.chart,slicingRoom=2*(options.slicedOffset||0),plotWidth=chart.plotWidth-2*slicingRoom,plotHeight=chart.plotHeight-2*slicingRoom,centerOption=options.center,smallestSize=Math.min(plotWidth,plotHeight),thickness=options.thickness;var handleSlicingRoom,size=options.size,innerSize=options.innerSize||0,i,value;if(typeof size==="string"){size=parseFloat(size)}if(typeof innerSize==="string"){innerSize=parseFloat(innerSize)}var positions=[CenteredUtilities_pick(centerOption===null||centerOption===void 0?void 0:centerOption[0],"50%"),CenteredUtilities_pick(centerOption===null||centerOption===void 0?void 0:centerOption[1],"50%"),CenteredUtilities_pick(size&&size<0?void 0:options.size,"100%"),CenteredUtilities_pick(innerSize&&innerSize<0?void 0:options.innerSize||0,"0%")];if(chart.angular&&!(this instanceof highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default())){positions[3]=0}for(i=0;i<4;++i){value=positions[i];handleSlicingRoom=i<2||i===2&&/%$/.test(value);positions[i]=CenteredUtilities_relativeLength(value,[plotWidth,plotHeight,smallestSize,positions[2]][i])+(handleSlicingRoom?slicingRoom:0)}if(positions[3]>positions[2]){positions[3]=positions[2]}if(CenteredUtilities_isNumber(thickness)&&thickness*2<positions[2]&&thickness>0){positions[3]=positions[2]-thickness*2}CenteredUtilities_fireEvent(this,"afterGetCenter",{positions:positions});return positions}CenteredUtilities.getCenter=getCenter;function getStartAndEndRadians(start,end){var startAngle=CenteredUtilities_isNumber(start)?start:0,endAngle=CenteredUtilities_isNumber(end)&&end>startAngle&&end-startAngle<360?end:startAngle+360,correction=-90;return{start:deg2rad*(startAngle+correction),end:deg2rad*(endAngle+correction)}}CenteredUtilities.getStartAndEndRadians=getStartAndEndRadians})(CenteredUtilities||(CenteredUtilities={}));var Series_CenteredUtilities=CenteredUtilities;"";var highcharts_Chart_commonjs_highcharts_Chart_commonjs2_highcharts_Chart_root_Highcharts_Chart_=__webpack_require__(960);var highcharts_Chart_commonjs_highcharts_Chart_commonjs2_highcharts_Chart_root_Highcharts_Chart_default=__webpack_require__.n(highcharts_Chart_commonjs_highcharts_Chart_commonjs2_highcharts_Chart_root_Highcharts_Chart_);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_=__webpack_require__(540);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default=__webpack_require__.n(highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_);var MapChart_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __spreadArray=undefined&&undefined.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};var getOptions=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().getOptions;var MapChart_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,MapChart_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,MapChart_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;var MapChart=function(_super){MapChart_extends(MapChart,_super);function MapChart(){return _super!==null&&_super.apply(this,arguments)||this}MapChart.prototype.init=function(userOptions,callback){var defaultCreditsOptions=getOptions().credits;var options=MapChart_merge({chart:{panning:{enabled:true,type:"xy"},type:"map"},credits:{mapText:MapChart_pick(defaultCreditsOptions.mapText,' © <a href="{geojson.copyrightUrl}">'+"{geojson.copyrightShort}</a>"),mapTextFull:MapChart_pick(defaultCreditsOptions.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:false}},userOptions);_super.prototype.init.call(this,options,callback)};MapChart.prototype.mapZoom=function(howMuch,xProjected,yProjected,chartX,chartY){if(this.mapView){if(MapChart_isNumber(howMuch)){howMuch=Math.log(howMuch)/Math.log(.5)}this.mapView.zoomBy(howMuch,MapChart_isNumber(xProjected)&&MapChart_isNumber(yProjected)?this.mapView.projection.inverse([xProjected,yProjected]):void 0,MapChart_isNumber(chartX)&&MapChart_isNumber(chartY)?[chartX,chartY]:void 0)}};MapChart.prototype.update=function(options){var _a;if(options.chart&&"map"in options.chart){(_a=this.mapView)===null||_a===void 0?void 0:_a.recommendMapView(this,__spreadArray([options.chart.map],(this.options.series||[]).map(function(s){return s.mapData}),true),true)}_super.prototype.update.apply(this,arguments)};return MapChart}(highcharts_Chart_commonjs_highcharts_Chart_commonjs2_highcharts_Chart_root_Highcharts_Chart_default());(function(MapChart){MapChart.maps={};function mapChart(a,b,c){return new MapChart(a,b,c)}MapChart.mapChart=mapChart;function splitPath(path){var arr;if(typeof path==="string"){path=path.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"");var split=path.split(/[ ,;]+/);arr=split.map(function(item){if(!/[A-Z]/i.test(item)){return parseFloat(item)}return item})}else{arr=path}return highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default().prototype.pathToSegments(arr)}MapChart.splitPath=splitPath})(MapChart||(MapChart={}));var Chart_MapChart=MapChart;var boundsFromPath=function(path){var x2=-Number.MAX_VALUE,x1=Number.MAX_VALUE,y2=-Number.MAX_VALUE,y1=Number.MAX_VALUE,validBounds;path.forEach(function(seg){var x=seg[seg.length-2],y=seg[seg.length-1];if(typeof x==="number"&&typeof y==="number"){x1=Math.min(x1,x);x2=Math.max(x2,x);y1=Math.min(y1,y);y2=Math.max(y2,y);validBounds=true}});if(validBounds){return{x1:x1,y1:y1,x2:x2,y2:y2}}};var MapUtilities={boundsFromPath:boundsFromPath};var Maps_MapUtilities=MapUtilities;var MapPoint_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=undefined&&undefined.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};var MapPoint_boundsFromPath=Maps_MapUtilities.boundsFromPath;var ScatterPoint=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.scatter.prototype.pointClass;var MapPoint_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapPoint_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,MapPoint_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;var MapPoint=function(_super){MapPoint_extends(MapPoint,_super);function MapPoint(){return _super!==null&&_super.apply(this,arguments)||this}MapPoint.getProjectedPath=function(point,projection){if(!point.projectedPath){if(projection&&point.geometry){projection.hasCoordinates=true;point.projectedPath=projection.path(point.geometry)}else{point.projectedPath=point.path}}return point.projectedPath||[]};MapPoint.prototype.applyOptions=function(options,x){var _a;var series=this.series,point=_super.prototype.applyOptions.call(this,options,x),joinBy=series.joinBy;if(series.mapData&&series.mapMap){var joinKey=joinBy[1],mapKey=_super.prototype.getNestedProperty.call(this,joinKey),mapPoint=typeof mapKey!=="undefined"&&series.mapMap[mapKey];if(mapPoint){MapPoint_extend(point,__assign(__assign({},mapPoint),{name:(_a=point.name)!==null&&_a!==void 0?_a:mapPoint.name}))}else if(series.pointArrayMap.indexOf("value")!==-1){point.value=point.value||null}}return point};MapPoint.prototype.getProjectedBounds=function(projection){var path=MapPoint.getProjectedPath(this,projection),bounds=MapPoint_boundsFromPath(path),properties=this.properties,mapView=this.series.chart.mapView;if(bounds){var propMiddleLon=properties&&properties["hc-middle-lon"],propMiddleLat=properties&&properties["hc-middle-lat"];if(mapView&&MapPoint_isNumber(propMiddleLon)&&MapPoint_isNumber(propMiddleLat)){var projectedPoint=projection.forward([propMiddleLon,propMiddleLat]);bounds.midX=projectedPoint[0];bounds.midY=projectedPoint[1]}else{var propMiddleX=properties&&properties["hc-middle-x"],propMiddleY=properties&&properties["hc-middle-y"];bounds.midX=bounds.x1+(bounds.x2-bounds.x1)*MapPoint_pick(this.middleX,MapPoint_isNumber(propMiddleX)?propMiddleX:.5);var middleYFraction=MapPoint_pick(this.middleY,MapPoint_isNumber(propMiddleY)?propMiddleY:.5);if(!this.geometry){middleYFraction=1-middleYFraction}bounds.midY=bounds.y2-(bounds.y2-bounds.y1)*middleYFraction}return bounds}};MapPoint.prototype.onMouseOver=function(e){highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clearTimeout(this.colorInterval);if(!this.isNull&&this.visible||this.series.options.nullInteraction){_super.prototype.onMouseOver.call(this,e)}else{this.series.onMouseOut()}};MapPoint.prototype.setVisible=function(vis){var method=vis?"show":"hide";this.visible=this.options.visible=!!vis;if(this.dataLabel){this.dataLabel[method]()}if(this.graphic){this.graphic.attr(this.series.pointAttribs(this))}};MapPoint.prototype.zoomTo=function(animOptions){var point=this,chart=point.series.chart,mapView=chart.mapView;var bounds=point.bounds;if(mapView&&bounds){var inset=MapPoint_isNumber(point.insetIndex)&&mapView.insets[point.insetIndex];if(inset){var px1=inset.projectedUnitsToPixels({x:bounds.x1,y:bounds.y1}),px2=inset.projectedUnitsToPixels({x:bounds.x2,y:bounds.y2}),proj1=mapView.pixelsToProjectedUnits({x:px1.x,y:px1.y}),proj2=mapView.pixelsToProjectedUnits({x:px2.x,y:px2.y});bounds={x1:proj1.x,y1:proj1.y,x2:proj2.x,y2:proj2.y}}mapView.fitToBounds(bounds,void 0,false);point.series.isDirty=true;chart.redraw(animOptions)}};return MapPoint}(ScatterPoint);MapPoint_extend(MapPoint.prototype,{dataLabelOnNull:Series_ColorMapComposition.pointMembers.dataLabelOnNull,moveToTopOnHover:Series_ColorMapComposition.pointMembers.moveToTopOnHover,isValid:Series_ColorMapComposition.pointMembers.isValid});var Map_MapPoint=MapPoint;var MapSeriesDefaults_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber;var MapSeriesDefaults={affectsMapView:true,animation:false,dataLabels:{crop:false,formatter:function(){var numberFormatter=this.series.chart.numberFormatter;var value=this.point.value;return MapSeriesDefaults_isNumber(value)?numberFormatter(value,-1):this.point.name||""},inside:true,overflow:false,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:false,tooltip:{followPointer:true,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:true,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:true},select:{color:"#cccccc"}},legendSymbol:"rectangle"};var Map_MapSeriesDefaults=MapSeriesDefaults;var MapViewDefaults={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}};var Maps_MapViewDefaults=MapViewDefaults;var highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_=__webpack_require__(984);var highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_default=__webpack_require__.n(highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_);var win=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().win;var format=highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_default().format;var error=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().error,GeoJSONComposition_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,GeoJSONComposition_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,GeoJSONComposition_wrap=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().wrap;var GeoJSONComposition;(function(GeoJSONComposition){function chartFromLatLonToPoint(lonLat){return this.mapView&&this.mapView.lonLatToProjectedUnits(lonLat)}function chartFromPointToLatLon(point){return this.mapView&&this.mapView.projectedUnitsToLonLat(point)}function chartTransformFromLatLon(latLon,transform){var proj4=this.options.chart.proj4||win.proj4;if(!proj4){error(21,false,this);return}var _a=transform.jsonmarginX,jsonmarginX=_a===void 0?0:_a,_b=transform.jsonmarginY,jsonmarginY=_b===void 0?0:_b,_c=transform.jsonres,jsonres=_c===void 0?1:_c,_d=transform.scale,scale=_d===void 0?1:_d,_e=transform.xoffset,xoffset=_e===void 0?0:_e,_f=transform.xpan,xpan=_f===void 0?0:_f,_g=transform.yoffset,yoffset=_g===void 0?0:_g,_h=transform.ypan,ypan=_h===void 0?0:_h;var projected=proj4(transform.crs,[latLon.lon,latLon.lat]),cosAngle=transform.cosAngle||transform.rotation&&Math.cos(transform.rotation),sinAngle=transform.sinAngle||transform.rotation&&Math.sin(transform.rotation),rotated=transform.rotation?[projected[0]*cosAngle+projected[1]*sinAngle,-projected[0]*sinAngle+projected[1]*cosAngle]:projected;return{x:((rotated[0]-xoffset)*scale+xpan)*jsonres+jsonmarginX,y:-(((yoffset-rotated[1])*scale+ypan)*jsonres-jsonmarginY)}}function chartTransformToLatLon(point,transform){var proj4=this.options.chart.proj4||win.proj4;if(!proj4){error(21,false,this);return}if(point.y===null){return}var _a=transform.jsonmarginX,jsonmarginX=_a===void 0?0:_a,_b=transform.jsonmarginY,jsonmarginY=_b===void 0?0:_b,_c=transform.jsonres,jsonres=_c===void 0?1:_c,_d=transform.scale,scale=_d===void 0?1:_d,_e=transform.xoffset,xoffset=_e===void 0?0:_e,_f=transform.xpan,xpan=_f===void 0?0:_f,_g=transform.yoffset,yoffset=_g===void 0?0:_g,_h=transform.ypan,ypan=_h===void 0?0:_h;var normalized={x:((point.x-jsonmarginX)/jsonres-xpan)/scale+xoffset,y:((point.y-jsonmarginY)/jsonres+ypan)/scale+yoffset},cosAngle=transform.cosAngle||transform.rotation&&Math.cos(transform.rotation),sinAngle=transform.sinAngle||transform.rotation&&Math.sin(transform.rotation),projected=proj4(transform.crs,"WGS84",transform.rotation?{x:normalized.x*cosAngle+normalized.y*-sinAngle,y:normalized.x*sinAngle+normalized.y*cosAngle}:normalized);return{lat:projected.y,lon:projected.x}}function compose(ChartClass){var chartProto=ChartClass.prototype;if(!chartProto.transformFromLatLon){chartProto.fromLatLonToPoint=chartFromLatLonToPoint;chartProto.fromPointToLatLon=chartFromPointToLatLon;chartProto.transformFromLatLon=chartTransformFromLatLon;chartProto.transformToLatLon=chartTransformToLatLon;GeoJSONComposition_wrap(chartProto,"addCredits",wrapChartAddCredit)}}GeoJSONComposition.compose=compose;function geojson(json,hType,series){var _a,_b;if(hType===void 0){hType="map"}var mapData=[];var geojson=json.type==="Topology"?topo2geo(json):json,features=geojson.features;for(var i=0,iEnd=features.length;i<iEnd;++i){var feature=features[i],geometry=feature.geometry||{},type=geometry.type,coordinates=geometry.coordinates,properties=feature.properties;var pointOptions=void 0;if((hType==="map"||hType==="mapbubble")&&(type==="Polygon"||type==="MultiPolygon")){if(coordinates.length){pointOptions={geometry:{coordinates:coordinates,type:type}}}}else if(hType==="mapline"&&(type==="LineString"||type==="MultiLineString")){if(coordinates.length){pointOptions={geometry:{coordinates:coordinates,type:type}}}}else if(hType==="mappoint"&&type==="Point"){if(coordinates.length){pointOptions={geometry:{coordinates:coordinates,type:type}}}}if(pointOptions){var name_1=properties&&(properties.name||properties.NAME),lon=properties&&properties.lon,lat=properties&&properties.lat;mapData.push(GeoJSONComposition_extend(pointOptions,{lat:typeof lat==="number"?lat:void 0,lon:typeof lon==="number"?lon:void 0,name:typeof name_1==="string"?name_1:void 0,properties:properties}))}}if(series&&geojson.copyrightShort){series.chart.mapCredits=format((_a=series.chart.options.credits)===null||_a===void 0?void 0:_a.mapText,{geojson:geojson});series.chart.mapCreditsFull=format((_b=series.chart.options.credits)===null||_b===void 0?void 0:_b.mapTextFull,{geojson:geojson})}return mapData}GeoJSONComposition.geojson=geojson;function topo2geo(topology,objectName){if(!objectName){objectName=Object.keys(topology.objects)[0]}var obj=topology.objects[objectName];if(obj["hc-decoded-geojson"]&&obj["hc-decoded-geojson"].title===topology.title){return obj["hc-decoded-geojson"]}var arcsArray=topology.arcs;if(topology.transform){var arcs=topology.arcs,_a=topology.transform,scale=_a.scale,translate=_a.translate;var positionArray=void 0,x=void 0,y=void 0;arcsArray=[];for(var i=0,iEnd=arcs.length;i<iEnd;++i){var positions=arcs[i];arcsArray.push(positionArray=[]);x=0;y=0;for(var j=0,jEnd=positions.length;j<jEnd;++j){positionArray.push([(x+=positions[j][0])*scale[0]+translate[0],(y+=positions[j][1])*scale[1]+translate[1]])}}}var arcsToCoordinates=function(arcs){if(typeof arcs[0]==="number"){return arcs.reduce(function(coordinates,arcNo,i){var arc=arcNo<0?arcsArray[~arcNo]:arcsArray[arcNo];if(arcNo<0){arc=arc.slice(0,i===0?arc.length:arc.length-1);arc.reverse()}else if(i){arc=arc.slice(1)}return coordinates.concat(arc)},[])}return arcs.map(arcsToCoordinates)};var geometries=obj.geometries,features=[];for(var i=0,iEnd=geometries.length;i<iEnd;++i){features.push({type:"Feature",properties:geometries[i].properties,geometry:{type:geometries[i].type,coordinates:geometries[i].coordinates||arcsToCoordinates(geometries[i].arcs)}})}var geojson={type:"FeatureCollection",copyright:topology.copyright,copyrightShort:topology.copyrightShort,copyrightUrl:topology.copyrightUrl,features:features,"hc-recommended-mapview":obj["hc-recommended-mapview"],bbox:topology.bbox,title:topology.title};obj["hc-decoded-geojson"]=geojson;return geojson}GeoJSONComposition.topo2geo=topo2geo;function wrapChartAddCredit(proceed,credits){credits=GeoJSONComposition_merge(true,this.options.credits,credits);proceed.call(this,credits);if(this.credits&&this.mapCreditsFull){this.credits.attr({title:this.mapCreditsFull})}}})(GeoJSONComposition||(GeoJSONComposition={}));var Maps_GeoJSONComposition=GeoJSONComposition;"";var GeometryUtilities;(function(GeometryUtilities){function getCenterOfPoints(points){var sum=points.reduce(function(sum,point){sum.x+=point.x;sum.y+=point.y;return sum},{x:0,y:0});return{x:sum.x/points.length,y:sum.y/points.length}}GeometryUtilities.getCenterOfPoints=getCenterOfPoints;function getDistanceBetweenPoints(p1,p2){return Math.sqrt(Math.pow(p2.x-p1.x,2)+Math.pow(p2.y-p1.y,2))}GeometryUtilities.getDistanceBetweenPoints=getDistanceBetweenPoints;function getAngleBetweenPoints(p1,p2){return Math.atan2(p2.x-p1.x,p2.y-p1.y)}GeometryUtilities.getAngleBetweenPoints=getAngleBetweenPoints;function pointInPolygon(_a,polygon){var x=_a.x,y=_a.y;var len=polygon.length;var i,j,inside=false;for(i=0,j=len-1;i<len;j=i++){var _b=polygon[i],x1=_b[0],y1=_b[1],_c=polygon[j],x2=_c[0],y2=_c[1];if(y1>y!==y2>y&&x<(x2-x1)*(y-y1)/(y2-y1)+x1){inside=!inside}}return inside}GeometryUtilities.pointInPolygon=pointInPolygon})(GeometryUtilities||(GeometryUtilities={}));var Geometry_GeometryUtilities=GeometryUtilities;function clipLineString(line,boundsPolygon){var ret=[],l=clipPolygon(line,boundsPolygon,false);for(var i=1;i<l.length;i++){if(l[i].isIntersection&&l[i-1].isIntersection){ret.push(l.splice(0,i));i=0}if(i===l.length-1){ret.push(l)}}return ret}function clipPolygon(subjectPolygon,boundsPolygon,closed){if(closed===void 0){closed=true}var clipEdge1=boundsPolygon[boundsPolygon.length-1],clipEdge2,prevPoint,currentPoint,outputList=subjectPolygon;for(var j=0;j<boundsPolygon.length;j++){var inputList=outputList;clipEdge2=boundsPolygon[j];outputList=[];prevPoint=closed?inputList[inputList.length-1]:inputList[0];for(var i=0;i<inputList.length;i++){currentPoint=inputList[i];if(isInside(clipEdge1,clipEdge2,currentPoint)){if(!isInside(clipEdge1,clipEdge2,prevPoint)){outputList.push(intersection(clipEdge1,clipEdge2,prevPoint,currentPoint))}outputList.push(currentPoint)}else if(isInside(clipEdge1,clipEdge2,prevPoint)){outputList.push(intersection(clipEdge1,clipEdge2,prevPoint,currentPoint))}prevPoint=currentPoint}clipEdge1=clipEdge2}return outputList}function isInside(clipEdge1,clipEdge2,p){return(clipEdge2[0]-clipEdge1[0])*(p[1]-clipEdge1[1])>(clipEdge2[1]-clipEdge1[1])*(p[0]-clipEdge1[0])}function intersection(clipEdge1,clipEdge2,prevPoint,currentPoint){var dc=[clipEdge1[0]-clipEdge2[0],clipEdge1[1]-clipEdge2[1]],dp=[prevPoint[0]-currentPoint[0],prevPoint[1]-currentPoint[1]],n1=clipEdge1[0]*clipEdge2[1]-clipEdge1[1]*clipEdge2[0],n2=prevPoint[0]*currentPoint[1]-prevPoint[1]*currentPoint[0],n3=1/(dc[0]*dp[1]-dc[1]*dp[0]),intersection=[(n1*dp[0]-n2*dc[0])*n3,(n1*dp[1]-n2*dc[1])*n3];intersection.isIntersection=true;return intersection}var PolygonClip={clipLineString:clipLineString,clipPolygon:clipPolygon};var Geometry_PolygonClip=PolygonClip;var sign=Math.sign||function(n){return n===0?0:n>0?1:-1},scale=63.78137,LambertConformalConic_deg2rad=Math.PI/180,halfPI=Math.PI/2,eps10=1e-6,tany=function(y){return Math.tan((halfPI+y)/2)};var LambertConformalConic=function(){function LambertConformalConic(options){var _a;var parallels=(options.parallels||[]).map(function(n){return n*LambertConformalConic_deg2rad}),lat1=parallels[0]||0,lat2=(_a=parallels[1])!==null&&_a!==void 0?_a:lat1,cosLat1=Math.cos(lat1);if(typeof options.projectedBounds==="object"){this.projectedBounds=options.projectedBounds}var n=lat1===lat2?Math.sin(lat1):Math.log(cosLat1/Math.cos(lat2))/Math.log(tany(lat2)/tany(lat1));if(Math.abs(n)<1e-10){n=(sign(n)||1)*1e-10}this.n=n;this.c=cosLat1*Math.pow(tany(lat1),n)/n}LambertConformalConic.prototype.forward=function(lonLat){var _a=this,c=_a.c,n=_a.n,projectedBounds=_a.projectedBounds,lon=lonLat[0]*LambertConformalConic_deg2rad;var lat=lonLat[1]*LambertConformalConic_deg2rad;if(c>0){if(lat<-halfPI+eps10){lat=-halfPI+eps10}}else{if(lat>halfPI-eps10){lat=halfPI-eps10}}var r=c/Math.pow(tany(lat),n),x=r*Math.sin(n*lon)*scale,y=(c-r*Math.cos(n*lon))*scale,xy=[x,y];if(projectedBounds&&(x<projectedBounds.x1||x>projectedBounds.x2||y<projectedBounds.y1||y>projectedBounds.y2)){xy.outside=true}return xy};LambertConformalConic.prototype.inverse=function(xy){var _a=this,c=_a.c,n=_a.n,x=xy[0]/scale,y=xy[1]/scale,cy=c-y,rho=sign(n)*Math.sqrt(x*x+cy*cy);var l=Math.atan2(x,Math.abs(cy))*sign(cy);if(cy*n<0){l-=Math.PI*sign(x)*sign(cy)}return[l/n/LambertConformalConic_deg2rad,(2*Math.atan(Math.pow(c/rho,1/n))-halfPI)/LambertConformalConic_deg2rad]};return LambertConformalConic}();var Projections_LambertConformalConic=LambertConformalConic;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2,EqualEarth_scale=74.03120656864502;var EqualEarth=function(){function EqualEarth(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}EqualEarth.prototype.forward=function(lonLat){var d=Math.PI/180,paramLat=Math.asin(M*Math.sin(lonLat[1]*d)),paramLatSq=paramLat*paramLat,paramLatPow6=paramLatSq*paramLatSq*paramLatSq;var x=lonLat[0]*d*Math.cos(paramLat)*EqualEarth_scale/(M*(A1+3*A2*paramLatSq+paramLatPow6*(7*A3+9*A4*paramLatSq))),y=paramLat*EqualEarth_scale*(A1+A2*paramLatSq+paramLatPow6*(A3+A4*paramLatSq));return[x,y]};EqualEarth.prototype.inverse=function(xy){var x=xy[0]/EqualEarth_scale,y=xy[1]/EqualEarth_scale,d=180/Math.PI,epsilon=1e-9;var paramLat=y,paramLatSq,paramLatPow6,fy,fpy,dlat;for(var i=0;i<12;++i){paramLatSq=paramLat*paramLat;paramLatPow6=paramLatSq*paramLatSq*paramLatSq;fy=paramLat*(A1+A2*paramLatSq+paramLatPow6*(A3+A4*paramLatSq))-y;fpy=A1+3*A2*paramLatSq+paramLatPow6*(7*A3+9*A4*paramLatSq);paramLat-=dlat=fy/fpy;if(Math.abs(dlat)<epsilon){break}}paramLatSq=paramLat*paramLat;paramLatPow6=paramLatSq*paramLatSq*paramLatSq;var lon=d*M*x*(A1+3*A2*paramLatSq+paramLatPow6*(7*A3+9*A4*paramLatSq))/Math.cos(paramLat),lat=d*Math.asin(Math.sin(paramLat)/M);if(Math.abs(lon)>180){return[NaN,NaN]}return[lon,lat]};return EqualEarth}();var Projections_EqualEarth=EqualEarth;var quarterPI=Math.PI/4,Miller_deg2rad=Math.PI/180,Miller_scale=63.78137;var Miller=function(){function Miller(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}Miller.prototype.forward=function(lonLat){return[lonLat[0]*Miller_deg2rad*Miller_scale,1.25*Miller_scale*Math.log(Math.tan(quarterPI+.4*lonLat[1]*Miller_deg2rad))]};Miller.prototype.inverse=function(xy){return[xy[0]/Miller_scale/Miller_deg2rad,2.5*(Math.atan(Math.exp(.8*(xy[1]/Miller_scale)))-quarterPI)/Miller_deg2rad]};return Miller}();var Projections_Miller=Miller;var Orthographic_deg2rad=Math.PI/180,Orthographic_scale=63.78460826781007;var Orthographic=function(){function Orthographic(){this.antimeridianCutting=false;this.bounds={x1:-Orthographic_scale,x2:Orthographic_scale,y1:-Orthographic_scale,y2:Orthographic_scale}}Orthographic.prototype.forward=function(lonLat){var lonDeg=lonLat[0],latDeg=lonLat[1],lat=latDeg*Orthographic_deg2rad,xy=[Math.cos(lat)*Math.sin(lonDeg*Orthographic_deg2rad)*Orthographic_scale,Math.sin(lat)*Orthographic_scale];if(lonDeg<-90||lonDeg>90){xy.outside=true}return xy};Orthographic.prototype.inverse=function(xy){var x=xy[0]/Orthographic_scale,y=xy[1]/Orthographic_scale,z=Math.sqrt(x*x+y*y),c=Math.asin(z),cSin=Math.sin(c),cCos=Math.cos(c);return[Math.atan2(x*cSin,z*cCos)/Orthographic_deg2rad,Math.asin(z&&y*cSin/z)/Orthographic_deg2rad]};return Orthographic}();var Projections_Orthographic=Orthographic;var r=63.78137,WebMercator_deg2rad=Math.PI/180;var WebMercator=function(){function WebMercator(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071};this.maxLatitude=85.0511287798}WebMercator.prototype.forward=function(lonLat){var sinLat=Math.sin(lonLat[1]*WebMercator_deg2rad),xy=[r*lonLat[0]*WebMercator_deg2rad,r*Math.log((1+sinLat)/(1-sinLat))/2];if(Math.abs(lonLat[1])>this.maxLatitude){xy.outside=true}return xy};WebMercator.prototype.inverse=function(xy){return[xy[0]/(r*WebMercator_deg2rad),(2*Math.atan(Math.exp(xy[1]/r))-Math.PI/2)/WebMercator_deg2rad]};return WebMercator}();var Projections_WebMercator=WebMercator;var projectionRegistry={EqualEarth:Projections_EqualEarth,LambertConformalConic:Projections_LambertConformalConic,Miller:Projections_Miller,Orthographic:Projections_Orthographic,WebMercator:Projections_WebMercator};var ProjectionRegistry=projectionRegistry;var Projection_spreadArray=undefined&&undefined.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};var Projection_clipLineString=Geometry_PolygonClip.clipLineString,Projection_clipPolygon=Geometry_PolygonClip.clipPolygon;var clamp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clamp,erase=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().erase;var Projection_deg2rad=Math.PI*2/360,floatCorrection=1e-6;var wrapLon=function(lon){if(lon<-180){lon+=360}if(lon>180){lon-=360}return lon};var hav=function(radians){return(1-Math.cos(radians))/2};var havFromCoords=function(point1,point2){var cos=Math.cos,lat1=point1[1]*Projection_deg2rad,lon1=point1[0]*Projection_deg2rad,lat2=point2[1]*Projection_deg2rad,lon2=point2[0]*Projection_deg2rad,deltaLat=lat2-lat1,deltaLon=lon2-lon1,havFromCoords=hav(deltaLat)+cos(lat1)*cos(lat2)*hav(deltaLon);return havFromCoords};var Projection=function(){function Projection(options){if(options===void 0){options={}}this.hasCoordinates=false;this.hasGeoProjection=false;this.maxLatitude=90;this.options=options;var name=options.name,projectedBounds=options.projectedBounds,rotation=options.rotation;this.rotator=rotation?this.getRotator(rotation):void 0;var ProjectionDefinition=name?Projection.registry[name]:void 0;if(ProjectionDefinition){this.def=new ProjectionDefinition(options)}var _a=this,def=_a.def,rotator=_a.rotator;if(def){this.maxLatitude=def.maxLatitude||90;this.hasGeoProjection=true}if(rotator&&def){this.forward=function(lonLat){return def.forward(rotator.forward(lonLat))};this.inverse=function(xy){return rotator.inverse(def.inverse(xy))}}else if(def){this.forward=function(lonLat){return def.forward(lonLat)};this.inverse=function(xy){return def.inverse(xy)}}else if(rotator){this.forward=rotator.forward;this.inverse=rotator.inverse}this.bounds=projectedBounds==="world"?def&&def.bounds:projectedBounds}Projection.add=function(name,definition){Projection.registry[name]=definition};Projection.distance=function(point1,point2){var atan2=Math.atan2,sqrt=Math.sqrt,hav=havFromCoords(point1,point2),angularDistance=2*atan2(sqrt(hav),sqrt(1-hav)),distance=angularDistance*6371e3;return distance};Projection.geodesic=function(point1,point2,inclusive,stepDistance){if(stepDistance===void 0){stepDistance=5e5}var atan2=Math.atan2,cos=Math.cos,sin=Math.sin,sqrt=Math.sqrt,distance=Projection.distance,lat1=point1[1]*Projection_deg2rad,lon1=point1[0]*Projection_deg2rad,lat2=point2[1]*Projection_deg2rad,lon2=point2[0]*Projection_deg2rad,cosLat1CosLon1=cos(lat1)*cos(lon1),cosLat2CosLon2=cos(lat2)*cos(lon2),cosLat1SinLon1=cos(lat1)*sin(lon1),cosLat2SinLon2=cos(lat2)*sin(lon2),sinLat1=sin(lat1),sinLat2=sin(lat2),pointDistance=distance(point1,point2),angDistance=pointDistance/6371e3,sinAng=sin(angDistance),jumps=Math.round(pointDistance/stepDistance),lineString=[];if(inclusive){lineString.push(point1)}if(jumps>1){var step=1/jumps;for(var fraction=step;fraction<.999;fraction+=step){var A=sin((1-fraction)*angDistance)/sinAng,B=sin(fraction*angDistance)/sinAng,x=A*cosLat1CosLon1+B*cosLat2CosLon2,y=A*cosLat1SinLon1+B*cosLat2SinLon2,z=A*sinLat1+B*sinLat2,lat3=atan2(z,sqrt(x*x+y*y)),lon3=atan2(y,x);lineString.push([lon3/Projection_deg2rad,lat3/Projection_deg2rad])}}if(inclusive){lineString.push(point2)}return lineString};Projection.insertGeodesics=function(poly){var i=poly.length-1;while(i--){var roughDistance=Math.max(Math.abs(poly[i][0]-poly[i+1][0]),Math.abs(poly[i][1]-poly[i+1][1]));if(roughDistance>10){var geodesic=Projection.geodesic(poly[i],poly[i+1]);if(geodesic.length){poly.splice.apply(poly,Projection_spreadArray([i+1,0],geodesic,false))}}}};Projection.toString=function(options){var _a=options||{},name=_a.name,rotation=_a.rotation;return[name,rotation&&rotation.join(",")].join(";")};Projection.prototype.lineIntersectsBounds=function(line){var _a=this.bounds||{},x1=_a.x1,x2=_a.x2,y1=_a.y1,y2=_a.y2;var getIntersect=function(line,dim,val){var p1=line[0],p2=line[1],otherDim=dim?0:1;if(typeof val==="number"&&p1[dim]>=val!==p2[dim]>=val){var fraction=(val-p1[dim])/(p2[dim]-p1[dim]),crossingVal=p1[otherDim]+fraction*(p2[otherDim]-p1[otherDim]);return dim?[crossingVal,val]:[val,crossingVal]}};var intersection,ret=line[0];if(intersection=getIntersect(line,0,x1)){ret=intersection;line[1]=intersection}else if(intersection=getIntersect(line,0,x2)){ret=intersection;line[1]=intersection}if(intersection=getIntersect(line,1,y1)){ret=intersection}else if(intersection=getIntersect(line,1,y2)){ret=intersection}return ret};Projection.prototype.getRotator=function(rotation){var deltaLambda=rotation[0]*Projection_deg2rad,deltaPhi=(rotation[1]||0)*Projection_deg2rad,deltaGamma=(rotation[2]||0)*Projection_deg2rad;var cosDeltaPhi=Math.cos(deltaPhi),sinDeltaPhi=Math.sin(deltaPhi),cosDeltaGamma=Math.cos(deltaGamma),sinDeltaGamma=Math.sin(deltaGamma);if(deltaLambda===0&&deltaPhi===0&&deltaGamma===0){return}return{forward:function(lonLat){var lon=lonLat[0]*Projection_deg2rad+deltaLambda;var lat=lonLat[1]*Projection_deg2rad,cosLat=Math.cos(lat),x=Math.cos(lon)*cosLat,y=Math.sin(lon)*cosLat,sinLat=Math.sin(lat),k=sinLat*cosDeltaPhi+x*sinDeltaPhi;return[Math.atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-sinLat*sinDeltaPhi)/Projection_deg2rad,Math.asin(k*cosDeltaGamma+y*sinDeltaGamma)/Projection_deg2rad]},inverse:function(rLonLat){var lon=rLonLat[0]*Projection_deg2rad;var lat=rLonLat[1]*Projection_deg2rad,cosLat=Math.cos(lat),x=Math.cos(lon)*cosLat,y=Math.sin(lon)*cosLat,sinLat=Math.sin(lat),k=sinLat*cosDeltaGamma-y*sinDeltaGamma;return[(Math.atan2(y*cosDeltaGamma+sinLat*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi)-deltaLambda)/Projection_deg2rad,Math.asin(k*cosDeltaPhi-x*sinDeltaPhi)/Projection_deg2rad]}}};Projection.prototype.forward=function(lonLat){return lonLat};Projection.prototype.inverse=function(xy){return xy};Projection.prototype.cutOnAntimeridian=function(poly,isPolygon){var antimeridian=180,intersections=[];var polygons=[poly];for(var i=0,iEnd=poly.length;i<iEnd;++i){var lonLat=poly[i];var previousLonLat=poly[i-1];if(!i){if(!isPolygon){continue}previousLonLat=poly[poly.length-1]}var lon1=previousLonLat[0],lon2=lonLat[0];if((lon1<-90||lon1>90)&&(lon2<-90||lon2>90)&&lon1>0!==lon2>0){var fraction=clamp((antimeridian-(lon1+360)%360)/((lon2+360)%360-(lon1+360)%360),0,1),lat=previousLonLat[1]+fraction*(lonLat[1]-previousLonLat[1]);intersections.push({i:i,lat:lat,direction:lon1<0?1:-1,previousLonLat:previousLonLat,lonLat:lonLat})}}var polarIntersection;if(intersections.length){if(isPolygon){if(intersections.length%2===1){polarIntersection=intersections.slice().sort(function(a,b){return Math.abs(b.lat)-Math.abs(a.lat)})[0];erase(intersections,polarIntersection)}var i=intersections.length-2;while(i>=0){var index=intersections[i].i;var lonPlus=wrapLon(antimeridian+intersections[i].direction*floatCorrection);var lonMinus=wrapLon(antimeridian-intersections[i].direction*floatCorrection);var slice=poly.splice.apply(poly,Projection_spreadArray([index,intersections[i+1].i-index],Projection.geodesic([lonPlus,intersections[i].lat],[lonPlus,intersections[i+1].lat],true),false));slice.push.apply(slice,Projection.geodesic([lonMinus,intersections[i+1].lat],[lonMinus,intersections[i].lat],true));polygons.push(slice);i-=2}if(polarIntersection){for(var i_1=0;i_1<polygons.length;i_1++){var direction=polarIntersection.direction,lat=polarIntersection.lat,poly_1=polygons[i_1],indexOf=poly_1.indexOf(polarIntersection.lonLat);if(indexOf>-1){var polarLatitude=(lat<0?-1:1)*this.maxLatitude;var lon1=wrapLon(antimeridian+direction*floatCorrection);var lon2=wrapLon(antimeridian-direction*floatCorrection);var polarSegment=Projection.geodesic([lon1,lat],[lon1,polarLatitude],true);for(var lon=lon1+120*direction;lon>-180&&lon<180;lon+=120*direction){polarSegment.push([lon,polarLatitude])}polarSegment.push.apply(polarSegment,Projection.geodesic([lon2,polarLatitude],[lon2,polarIntersection.lat],true));poly_1.splice.apply(poly_1,Projection_spreadArray([indexOf,0],polarSegment,false));break}}}}else{var i=intersections.length;while(i--){var index=intersections[i].i;var slice=poly.splice(index,poly.length,[wrapLon(antimeridian+intersections[i].direction*floatCorrection),intersections[i].lat]);slice.unshift([wrapLon(antimeridian-intersections[i].direction*floatCorrection),intersections[i].lat]);polygons.push(slice)}}}return polygons};Projection.prototype.path=function(geometry){var _this=this;var _a=this,bounds=_a.bounds,def=_a.def,rotator=_a.rotator;var antimeridian=180;var path=[];var isPolygon=geometry.type==="Polygon"||geometry.type==="MultiPolygon";var hasGeoProjection=this.hasGeoProjection;var projectingToPlane=!def||def.antimeridianCutting!==false;var preclip=projectingToPlane?rotator:void 0;var postclip=projectingToPlane?def||this:this;var boundsPolygon;if(bounds){boundsPolygon=[[bounds.x1,bounds.y1],[bounds.x2,bounds.y1],[bounds.x2,bounds.y2],[bounds.x1,bounds.y2]]}var addToPath=function(polygon){var poly=polygon.map(function(lonLat){if(projectingToPlane){if(preclip){lonLat=preclip.forward(lonLat)}var lon=lonLat[0];if(Math.abs(lon-antimeridian)<floatCorrection){if(lon<antimeridian){lon=antimeridian-floatCorrection}else{lon=antimeridian+floatCorrection}}lonLat=[lon,lonLat[1]]}return lonLat});var polygons=[poly];if(hasGeoProjection){Projection.insertGeodesics(poly);if(projectingToPlane){polygons=_this.cutOnAntimeridian(poly,isPolygon)}}polygons.forEach(function(poly){if(poly.length<2){return}var movedTo=false;var firstValidLonLat;var lastValidLonLat;var gap=false;var pushToPath=function(point){if(!movedTo){path.push(["M",point[0],point[1]]);movedTo=true}else{path.push(["L",point[0],point[1]])}};var someOutside=false,someInside=false;var points=poly.map(function(lonLat){var xy=postclip.forward(lonLat);if(xy.outside){someOutside=true}else{someInside=true}if(xy[1]===Infinity){xy[1]=1e10}else if(xy[1]===-Infinity){xy[1]=-1e10}return xy});if(projectingToPlane){if(isPolygon){points.push(points[0])}if(someOutside){if(!someInside){return}if(boundsPolygon){if(isPolygon){points=Projection_clipPolygon(points,boundsPolygon)}else if(bounds){Projection_clipLineString(points,boundsPolygon).forEach(function(points){movedTo=false;points.forEach(pushToPath)});return}}}points.forEach(pushToPath)}else{for(var i=0;i<points.length;i++){var lonLat=poly[i],point=points[i];if(!point.outside){if(isPolygon&&!firstValidLonLat){firstValidLonLat=lonLat;poly.push(lonLat);points.push(point)}if(gap&&lastValidLonLat){if(isPolygon&&hasGeoProjection){var geodesic=Projection.geodesic(lastValidLonLat,lonLat);geodesic.forEach(function(lonLat){return pushToPath(postclip.forward(lonLat))})}else{movedTo=false}}pushToPath(point);lastValidLonLat=lonLat;gap=false}else{gap=true}}}})};if(geometry.type==="LineString"){addToPath(geometry.coordinates)}else if(geometry.type==="MultiLineString"){geometry.coordinates.forEach(function(c){return addToPath(c)})}else if(geometry.type==="Polygon"){geometry.coordinates.forEach(function(c){return addToPath(c)});if(path.length){path.push(["Z"])}}else if(geometry.type==="MultiPolygon"){geometry.coordinates.forEach(function(polygons){polygons.forEach(function(c){return addToPath(c)})});if(path.length){path.push(["Z"])}}return path};Projection.registry=ProjectionRegistry;return Projection}();var Maps_Projection=Projection;var MapView_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapView_spreadArray=undefined&&undefined.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};var MapView_composed=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().composed;var pointInPolygon=Geometry_GeometryUtilities.pointInPolygon;var topo2geo=Maps_GeoJSONComposition.topo2geo;var MapView_boundsFromPath=Maps_MapUtilities.boundsFromPath;var MapView_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,MapView_clamp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clamp,crisp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().crisp,MapView_fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,MapView_isArray=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isArray,MapView_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,isObject=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isObject,isString=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isString,MapView_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,MapView_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,MapView_pushUnique=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pushUnique,MapView_relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;var tileSize=256;var worldSize=400.979322;var maps={};function zoomFromBounds(b,playingField){var width=playingField.width,height=playingField.height,scaleToField=Math.max((b.x2-b.x1)/(width/tileSize),(b.y2-b.y1)/(height/tileSize));return Math.log(worldSize/scaleToField)/Math.log(2)}function recommendedMapViewAfterDrill(e){var _a,_b;if(e.seriesOptions.mapData){(_a=this.mapView)===null||_a===void 0?void 0:_a.recommendMapView(this,[this.options.chart.map,e.seriesOptions.mapData],(_b=this.options.drilldown)===null||_b===void 0?void 0:_b.mapZooming)}}var MapView=function(){function MapView(chart,options){var _this=this;var _a;this.allowTransformAnimation=true;this.eventsToUnbind=[];this.insets=[];this.padding=[0,0,0,0];this.recommendedMapView={};if(!(this instanceof MapViewInset)){this.recommendMapView(chart,MapView_spreadArray([chart.options.chart.map],(chart.options.series||[]).map(function(s){return s.mapData}),true))}this.userOptions=options||{};var o=MapView_merge(Maps_MapViewDefaults,this.recommendedMapView,options);var recInsets=(_a=this.recommendedMapView)===null||_a===void 0?void 0:_a.insets,optInsets=options&&options.insets;if(recInsets&&optInsets){o.insets=MapView.mergeInsets(recInsets,optInsets)}this.chart=chart;this.center=o.center;this.options=o;this.projection=new Maps_Projection(o.projection);this.playingField=chart.plotBox;this.zoom=o.zoom||0;this.minZoom=o.minZoom;this.createInsets();this.eventsToUnbind.push(MapView_addEvent(chart,"afterSetChartSize",function(){_this.playingField=_this.getField();if(_this.minZoom===void 0||_this.minZoom===_this.zoom){_this.fitToBounds(void 0,void 0,false);if(!_this.chart.hasRendered&&MapView_isNumber(_this.userOptions.zoom)){_this.zoom=_this.userOptions.zoom}if(_this.userOptions.center){MapView_merge(true,_this.center,_this.userOptions.center)}}}));this.setUpEvents()}MapView.compose=function(MapChartClass){if(MapView_pushUnique(MapView_composed,"MapView")){maps=MapChartClass.maps;MapView_addEvent(MapChartClass,"afterInit",function(){this.mapView=new MapView(this,this.options.mapView)},{order:0});MapView_addEvent(MapChartClass,"addSeriesAsDrilldown",recommendedMapViewAfterDrill);MapView_addEvent(MapChartClass,"afterDrillUp",recommendedMapViewAfterDrill)}};MapView.compositeBounds=function(arrayOfBounds){if(arrayOfBounds.length){return arrayOfBounds.slice(1).reduce(function(acc,cur){acc.x1=Math.min(acc.x1,cur.x1);acc.y1=Math.min(acc.y1,cur.y1);acc.x2=Math.max(acc.x2,cur.x2);acc.y2=Math.max(acc.y2,cur.y2);return acc},MapView_merge(arrayOfBounds[0]))}return};MapView.mergeInsets=function(a,b){var toObject=function(insets){var ob={};insets.forEach(function(inset,i){ob[inset&&inset.id||"i".concat(i)]=inset});return ob};var insetsObj=MapView_merge(toObject(a),toObject(b)),insets=Object.keys(insetsObj).map(function(key){return insetsObj[key]});return insets};MapView.prototype.createInsets=function(){var _this=this;var options=this.options,insets=options.insets;if(insets){insets.forEach(function(item){var inset=new MapViewInset(_this,MapView_merge(options.insetOptions,item));_this.insets.push(inset)})}};MapView.prototype.fitToBounds=function(bounds,padding,redraw,animation){if(redraw===void 0){redraw=true}var b=bounds||this.getProjectedBounds();if(b){var pad=MapView_pick(padding,bounds?0:this.options.padding),fullField=this.getField(false),padArr=MapView_isArray(pad)?pad:[pad,pad,pad,pad];this.padding=[MapView_relativeLength(padArr[0],fullField.height),MapView_relativeLength(padArr[1],fullField.width),MapView_relativeLength(padArr[2],fullField.height),MapView_relativeLength(padArr[3],fullField.width)];this.playingField=this.getField();var zoom=zoomFromBounds(b,this.playingField);if(!bounds){this.minZoom=zoom}var center=this.projection.inverse([(b.x2+b.x1)/2,(b.y2+b.y1)/2]);this.setView(center,zoom,redraw,animation)}};MapView.prototype.getField=function(padded){if(padded===void 0){padded=true}var padding=padded?this.padding:[0,0,0,0];return{x:padding[3],y:padding[0],width:this.chart.plotWidth-padding[1]-padding[3],height:this.chart.plotHeight-padding[0]-padding[2]}};MapView.prototype.getGeoMap=function(map){if(isString(map)){if(maps[map]&&maps[map].type==="Topology"){return topo2geo(maps[map])}return maps[map]}if(isObject(map,true)){if(map.type==="FeatureCollection"){return map}if(map.type==="Topology"){return topo2geo(map)}}};MapView.prototype.getMapBBox=function(){var bounds=this.getProjectedBounds(),scale=this.getScale();if(bounds){var padding=this.padding,p1=this.projectedUnitsToPixels({x:bounds.x1,y:bounds.y2}),width=(bounds.x2-bounds.x1)*scale+padding[1]+padding[3],height=(bounds.y2-bounds.y1)*scale+padding[0]+padding[2];return{width:width,height:height,x:p1.x-padding[3],y:p1.y-padding[0]}}};MapView.prototype.getProjectedBounds=function(){var projection=this.projection;var allBounds=this.chart.series.reduce(function(acc,s){var bounds=s.getProjectedBounds&&s.getProjectedBounds();if(bounds&&s.options.affectsMapView!==false){acc.push(bounds)}return acc},[]);var fitToGeometry=this.options.fitToGeometry;if(fitToGeometry){if(!this.fitToGeometryCache){if(fitToGeometry.type==="MultiPoint"){var positions=fitToGeometry.coordinates.map(function(lonLat){return projection.forward(lonLat)}),xs=positions.map(function(pos){return pos[0]}),ys=positions.map(function(pos){return pos[1]});this.fitToGeometryCache={x1:Math.min.apply(0,xs),x2:Math.max.apply(0,xs),y1:Math.min.apply(0,ys),y2:Math.max.apply(0,ys)}}else{this.fitToGeometryCache=MapView_boundsFromPath(projection.path(fitToGeometry))}}return this.fitToGeometryCache}return this.projection.bounds||MapView.compositeBounds(allBounds)};MapView.prototype.getScale=function(){return tileSize/worldSize*Math.pow(2,this.zoom)};MapView.prototype.getSVGTransform=function(){var _a=this.playingField,x=_a.x,y=_a.y,width=_a.width,height=_a.height,projectedCenter=this.projection.forward(this.center),flipFactor=this.projection.hasCoordinates?-1:1,scaleX=this.getScale(),scaleY=scaleX*flipFactor,translateX=x+width/2-projectedCenter[0]*scaleX,translateY=y+height/2-projectedCenter[1]*scaleY;return{scaleX:scaleX,scaleY:scaleY,translateX:translateX,translateY:translateY}};MapView.prototype.lonLatToPixels=function(lonLat){var pos=this.lonLatToProjectedUnits(lonLat);if(pos){return this.projectedUnitsToPixels(pos)}};MapView.prototype.lonLatToProjectedUnits=function(lonLat){var chart=this.chart,mapTransforms=chart.mapTransforms;if(mapTransforms){for(var transform in mapTransforms){if(Object.hasOwnProperty.call(mapTransforms,transform)&&mapTransforms[transform].hitZone){var coords=chart.transformFromLatLon(lonLat,mapTransforms[transform]);if(coords&&pointInPolygon(coords,mapTransforms[transform].hitZone.coordinates[0])){return coords}}}return chart.transformFromLatLon(lonLat,mapTransforms["default"])}for(var _i=0,_a=this.insets;_i<_a.length;_i++){var inset=_a[_i];if(inset.options.geoBounds&&pointInPolygon({x:lonLat.lon,y:lonLat.lat},inset.options.geoBounds.coordinates[0])){var insetProjectedPoint=inset.projection.forward([lonLat.lon,lonLat.lat]),pxPoint=inset.projectedUnitsToPixels({x:insetProjectedPoint[0],y:insetProjectedPoint[1]});return this.pixelsToProjectedUnits(pxPoint)}}var point=this.projection.forward([lonLat.lon,lonLat.lat]);if(!point.outside){return{x:point[0],y:point[1]}}};MapView.prototype.projectedUnitsToLonLat=function(point){var chart=this.chart,mapTransforms=chart.mapTransforms;if(mapTransforms){for(var transform in mapTransforms){if(Object.hasOwnProperty.call(mapTransforms,transform)&&mapTransforms[transform].hitZone&&pointInPolygon(point,mapTransforms[transform].hitZone.coordinates[0])){return chart.transformToLatLon(point,mapTransforms[transform])}}return chart.transformToLatLon(point,mapTransforms["default"])}var pxPoint=this.projectedUnitsToPixels(point);for(var _i=0,_a=this.insets;_i<_a.length;_i++){var inset=_a[_i];if(inset.hitZone&&pointInPolygon(pxPoint,inset.hitZone.coordinates[0])){var insetProjectedPoint=inset.pixelsToProjectedUnits(pxPoint),coordinates_1=inset.projection.inverse([insetProjectedPoint.x,insetProjectedPoint.y]);return{lon:coordinates_1[0],lat:coordinates_1[1]}}}var coordinates=this.projection.inverse([point.x,point.y]);return{lon:coordinates[0],lat:coordinates[1]}};MapView.prototype.recommendMapView=function(chart,mapDataArray,update){var _this=this;var _a;if(update===void 0){update=false}this.recommendedMapView={};var geoMaps=mapDataArray.map(function(mapData){return _this.getGeoMap(mapData)});var allGeoBounds=[];geoMaps.forEach(function(geoMap){if(geoMap){if(!Object.keys(_this.recommendedMapView).length){_this.recommendedMapView=geoMap["hc-recommended-mapview"]||{}}if(geoMap.bbox){var _a=geoMap.bbox,x1=_a[0],y1=_a[1],x2=_a[2],y2=_a[3];allGeoBounds.push({x1:x1,y1:y1,x2:x2,y2:y2})}}});var geoBounds=allGeoBounds.length&&MapView.compositeBounds(allGeoBounds);MapView_fireEvent(this,"onRecommendMapView",{geoBounds:geoBounds,chart:chart},function(){if(geoBounds&&this.recommendedMapView){if(!this.recommendedMapView.projection){var x1=geoBounds.x1,y1=geoBounds.y1,x2=geoBounds.x2,y2=geoBounds.y2;this.recommendedMapView.projection=x2-x1>180&&y2-y1>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[y1,y2],rotation:[-(x1+x2)/2]}}if(!this.recommendedMapView.insets){this.recommendedMapView.insets=void 0}}});this.geoMap=geoMaps[0];if(update&&chart.hasRendered&&!((_a=chart.userOptions.mapView)===null||_a===void 0?void 0:_a.projection)&&this.recommendedMapView){this.update(this.recommendedMapView)}};MapView.prototype.redraw=function(animation){this.chart.series.forEach(function(s){if(s.useMapGeometry){s.isDirty=true}});this.chart.redraw(animation)};MapView.prototype.setView=function(center,zoom,redraw,animation){if(redraw===void 0){redraw=true}if(center){this.center=center}if(typeof zoom==="number"){if(typeof this.minZoom==="number"){zoom=Math.max(zoom,this.minZoom)}if(typeof this.options.maxZoom==="number"){zoom=Math.min(zoom,this.options.maxZoom)}if(MapView_isNumber(zoom)){this.zoom=zoom}}var bounds=this.getProjectedBounds();if(bounds){var projectedCenter=this.projection.forward(this.center),_a=this.playingField,x=_a.x,y=_a.y,width=_a.width,height=_a.height,scale=this.getScale(),bottomLeft=this.projectedUnitsToPixels({x:bounds.x1,y:bounds.y1}),topRight=this.projectedUnitsToPixels({x:bounds.x2,y:bounds.y2}),boundsCenterProjected=[(bounds.x1+bounds.x2)/2,(bounds.y1+bounds.y2)/2],isDrilling=this.chart.series.some(function(series){return series.isDrilling});if(!isDrilling){var x1=bottomLeft.x,y1=topRight.y,x2=topRight.x,y2=bottomLeft.y;if(x2-x1<width){projectedCenter[0]=boundsCenterProjected[0]}else if(x1<x&&x2<x+width){projectedCenter[0]+=Math.max(x1-x,x2-width-x)/scale}else if(x2>x+width&&x1>x){projectedCenter[0]+=Math.min(x2-width-x,x1-x)/scale}if(y2-y1<height){projectedCenter[1]=boundsCenterProjected[1]}else if(y1<y&&y2<y+height){projectedCenter[1]-=Math.max(y1-y,y2-height-y)/scale}else if(y2>y+height&&y1>y){projectedCenter[1]-=Math.min(y2-height-y,y1-y)/scale}this.center=this.projection.inverse(projectedCenter)}this.insets.forEach(function(inset){if(inset.options.field){inset.hitZone=inset.getHitZone();inset.playingField=inset.getField()}});this.render()}MapView_fireEvent(this,"afterSetView");if(redraw){this.redraw(animation)}};MapView.prototype.projectedUnitsToPixels=function(pos){var scale=this.getScale(),projectedCenter=this.projection.forward(this.center),field=this.playingField,centerPxX=field.x+field.width/2,centerPxY=field.y+field.height/2;var x=centerPxX-scale*(projectedCenter[0]-pos.x);var y=centerPxY+scale*(projectedCenter[1]-pos.y);return{x:x,y:y}};MapView.prototype.pixelsToLonLat=function(pos){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(pos))};MapView.prototype.pixelsToProjectedUnits=function(pos){var x=pos.x,y=pos.y,scale=this.getScale(),projectedCenter=this.projection.forward(this.center),field=this.playingField,centerPxX=field.x+field.width/2,centerPxY=field.y+field.height/2;var projectedX=projectedCenter[0]+(x-centerPxX)/scale;var projectedY=projectedCenter[1]-(y-centerPxY)/scale;return{x:projectedX,y:projectedY}};MapView.prototype.setUpEvents=function(){var _this=this;var chart=this.chart;var mouseDownCenterProjected,mouseDownKey,mouseDownRotation;var onPan=function(e){var _a=chart.pointer,lastTouches=_a.lastTouches,pinchDown=_a.pinchDown,projection=_this.projection,touches=e.touches;var mouseDownX=chart.mouseDownX,mouseDownY=chart.mouseDownY,howMuch=0;if((pinchDown===null||pinchDown===void 0?void 0:pinchDown.length)===1){mouseDownX=pinchDown[0].chartX;mouseDownY=pinchDown[0].chartY}else if((pinchDown===null||pinchDown===void 0?void 0:pinchDown.length)===2){mouseDownX=(pinchDown[0].chartX+pinchDown[1].chartX)/2;mouseDownY=(pinchDown[0].chartY+pinchDown[1].chartY)/2}if((touches===null||touches===void 0?void 0:touches.length)===2&&lastTouches){var startDistance=Math.sqrt(Math.pow(lastTouches[0].chartX-lastTouches[1].chartX,2)+Math.pow(lastTouches[0].chartY-lastTouches[1].chartY,2)),endDistance=Math.sqrt(Math.pow(touches[0].chartX-touches[1].chartX,2)+Math.pow(touches[0].chartY-touches[1].chartY,2));howMuch=Math.log(startDistance/endDistance)/Math.log(.5)}if(MapView_isNumber(mouseDownX)&&MapView_isNumber(mouseDownY)){var key=""+mouseDownX+",".concat(mouseDownY);var _b=e.originalEvent,chartX=_b.chartX,chartY=_b.chartY;if((touches===null||touches===void 0?void 0:touches.length)===2){chartX=(touches[0].chartX+touches[1].chartX)/2;chartY=(touches[0].chartY+touches[1].chartY)/2}if(key!==mouseDownKey){mouseDownKey=key;mouseDownCenterProjected=_this.projection.forward(_this.center);mouseDownRotation=(_this.projection.options.rotation||[0,0]).slice()}var worldBounds=projection.def&&projection.def.bounds,worldZoom=worldBounds&&zoomFromBounds(worldBounds,_this.playingField)||-Infinity;if(projection.options.name==="Orthographic"&&((touches===null||touches===void 0?void 0:touches.length)||0)<2&&(_this.minZoom||Infinity)<worldZoom*1.3){var ratio=440/(_this.getScale()*Math.min(chart.plotWidth,chart.plotHeight));if(mouseDownRotation){var lon=(mouseDownX-chartX)*ratio-mouseDownRotation[0],lat=MapView_clamp(-mouseDownRotation[1]-(mouseDownY-chartY)*ratio,-80,80),zoom=_this.zoom;_this.update({projection:{rotation:[-lon,-lat]}},false);_this.fitToBounds(void 0,void 0,false);_this.zoom=zoom;chart.redraw(false)}}else if(MapView_isNumber(chartX)&&MapView_isNumber(chartY)){var scale=_this.getScale(),flipFactor=_this.projection.hasCoordinates?1:-1;var newCenter=_this.projection.inverse([mouseDownCenterProjected[0]+(mouseDownX-chartX)/scale,mouseDownCenterProjected[1]-(mouseDownY-chartY)/scale*flipFactor]);if(!isNaN(newCenter[0]+newCenter[1])){_this.zoomBy(howMuch,newCenter,void 0,false)}}e.preventDefault()}};MapView_addEvent(chart,"pan",onPan);MapView_addEvent(chart,"touchpan",onPan);MapView_addEvent(chart,"selection",function(evt){if(!evt.resetSelection){var x=evt.x-chart.plotLeft;var y=evt.y-chart.plotTop;var _a=_this.pixelsToProjectedUnits({x:x,y:y}),y1=_a.y,x1=_a.x;var _b=_this.pixelsToProjectedUnits({x:x+evt.width,y:y+evt.height}),y2=_b.y,x2=_b.x;_this.fitToBounds({x1:x1,y1:y1,x2:x2,y2:y2},void 0,true,evt.originalEvent.touches?false:void 0);if(!/^touch/.test(evt.originalEvent.type)){chart.showResetZoom()}evt.preventDefault()}else{_this.zoomBy()}})};MapView.prototype.render=function(){if(!this.group){this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add()}};MapView.prototype.update=function(options,redraw,animation){if(redraw===void 0){redraw=true}var newProjection=options.projection,isDirtyProjection=newProjection&&Maps_Projection.toString(newProjection)!==Maps_Projection.toString(this.options.projection);var isDirtyInsets=false;MapView_merge(true,this.userOptions,options);MapView_merge(true,this.options,options);if("insets"in options){this.insets.forEach(function(inset){return inset.destroy()});this.insets.length=0;isDirtyInsets=true}if(isDirtyProjection||"fitToGeometry"in options){delete this.fitToGeometryCache}if(isDirtyProjection||isDirtyInsets){this.chart.series.forEach(function(series){var groups=series.transformGroups;if(series.clearBounds){series.clearBounds()}series.isDirty=true;series.isDirtyData=true;if(isDirtyInsets&&groups){while(groups.length>1){var group=groups.pop();if(group){group.destroy()}}}});if(isDirtyProjection){this.projection=new Maps_Projection(this.options.projection)}if(isDirtyInsets){this.createInsets()}if(!options.center&&Object.hasOwnProperty.call(options,"zoom")&&!MapView_isNumber(options.zoom)){this.fitToBounds(void 0,void 0,false)}}if(options.center||MapView_isNumber(options.zoom)){this.setView(this.options.center,options.zoom,false)}else if("fitToGeometry"in options){this.fitToBounds(void 0,void 0,false)}if(redraw){this.chart.redraw(animation)}};MapView.prototype.zoomBy=function(howMuch,coords,chartCoords,animation){var chart=this.chart,projectedCenter=this.projection.forward(this.center);if(typeof howMuch==="number"){var zoom=this.zoom+howMuch;var center=void 0,x=void 0,y=void 0;if(chartCoords){var chartX=chartCoords[0],chartY=chartCoords[1];var scale=this.getScale();var offsetX=chartX-chart.plotLeft-chart.plotWidth/2;var offsetY=chartY-chart.plotTop-chart.plotHeight/2;x=projectedCenter[0]+offsetX/scale;y=projectedCenter[1]+offsetY/scale}if(typeof x==="number"&&typeof y==="number"){var scale=1-Math.pow(2,this.zoom)/Math.pow(2,zoom);var offsetX=projectedCenter[0]-x;var offsetY=projectedCenter[1]-y;projectedCenter[0]-=offsetX*scale;projectedCenter[1]+=offsetY*scale;center=this.projection.inverse(projectedCenter)}this.setView(coords||center,zoom,void 0,animation)}else{this.fitToBounds(void 0,void 0,void 0,animation)}};return MapView}();var MapViewInset=function(_super){MapView_extends(MapViewInset,_super);function MapViewInset(mapView,options){var _this=_super.call(this,mapView.chart,options)||this;_this.id=options.id;_this.mapView=mapView;_this.options=MapView_merge({center:[0,0]},mapView.options.insetOptions,options);_this.allBounds=[];if(_this.options.geoBounds){var path=mapView.projection.path(_this.options.geoBounds);_this.geoBoundsProjectedBox=MapView_boundsFromPath(path);_this.geoBoundsProjectedPolygon=path.map(function(segment){return[segment[1]||0,segment[2]||0]})}return _this}MapViewInset.prototype.getField=function(padded){if(padded===void 0){padded=true}var hitZone=this.hitZone;if(hitZone){var padding=padded?this.padding:[0,0,0,0],polygon=hitZone.coordinates[0],xs=polygon.map(function(xy){return xy[0]}),ys=polygon.map(function(xy){return xy[1]}),x=Math.min.apply(0,xs)+padding[3],x2=Math.max.apply(0,xs)-padding[1],y=Math.min.apply(0,ys)+padding[0],y2=Math.max.apply(0,ys)-padding[2];if(MapView_isNumber(x)&&MapView_isNumber(y)){return{x:x,y:y,width:x2-x,height:y2-y}}}return _super.prototype.getField.call(this,padded)};MapViewInset.prototype.getHitZone=function(){var _a=this,chart=_a.chart,mapView=_a.mapView,options=_a.options,coordinates=(options.field||{}).coordinates;if(coordinates){var polygon=coordinates[0];if(options.units==="percent"){var relativeTo_1=options.relativeTo==="mapBoundingBox"&&mapView.getMapBBox()||MapView_merge(chart.plotBox,{x:0,y:0});polygon=polygon.map(function(xy){return[MapView_relativeLength(""+xy[0]+"%",relativeTo_1.width,relativeTo_1.x),MapView_relativeLength(""+xy[1]+"%",relativeTo_1.height,relativeTo_1.y)]})}return{type:"Polygon",coordinates:[polygon]}}};MapViewInset.prototype.getProjectedBounds=function(){return MapView.compositeBounds(this.allBounds)};MapViewInset.prototype.isInside=function(point){var _a=this,geoBoundsProjectedBox=_a.geoBoundsProjectedBox,geoBoundsProjectedPolygon=_a.geoBoundsProjectedPolygon;return Boolean(geoBoundsProjectedBox&&point.x>=geoBoundsProjectedBox.x1&&point.x<=geoBoundsProjectedBox.x2&&point.y>=geoBoundsProjectedBox.y1&&point.y<=geoBoundsProjectedBox.y2&&geoBoundsProjectedPolygon&&pointInPolygon(point,geoBoundsProjectedPolygon))};MapViewInset.prototype.render=function(){var _a=this,chart=_a.chart,mapView=_a.mapView,options=_a.options,borderPath=options.borderPath||options.field;if(borderPath&&mapView.group){var animate=true;if(!this.border){this.border=chart.renderer.path().addClass("highcharts-mapview-inset-border").add(mapView.group);animate=false}if(!chart.styledMode){this.border.attr({stroke:options.borderColor,"stroke-width":options.borderWidth})}var strokeWidth_1=this.border.strokeWidth(),field_1=options.relativeTo==="mapBoundingBox"&&mapView.getMapBBox()||mapView.playingField;var d=(borderPath.coordinates||[]).reduce(function(d,lineString){return lineString.reduce(function(d,point,i){var x=point[0],y=point[1];if(options.units==="percent"){x=chart.plotLeft+MapView_relativeLength(""+x+"%",field_1.width,field_1.x);y=chart.plotTop+MapView_relativeLength(""+y+"%",field_1.height,field_1.y)}x=crisp(x,strokeWidth_1);y=crisp(y,strokeWidth_1);d.push(i===0?["M",x,y]:["L",x,y]);return d},d)},[]);this.border[animate?"animate":"attr"]({d:d})}};MapViewInset.prototype.destroy=function(){if(this.border){this.border=this.border.destroy()}this.eventsToUnbind.forEach(function(f){return f()})};MapViewInset.prototype.setUpEvents=function(){};return MapViewInset}(MapView);var Maps_MapView=MapView;var MapSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapSeries_spreadArray=undefined&&undefined.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};var animObject=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().animObject,stop=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().stop;var noop=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().noop;var splitPath=Chart_MapChart.splitPath;var _a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,ColumnSeries=_a.column,ScatterSeries=_a.scatter;var MapSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,find=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().find,MapSeries_fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,getNestedProperty=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().getNestedProperty,MapSeries_isArray=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isArray,MapSeries_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,MapSeries_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,MapSeries_isObject=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isObject,MapSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,MapSeries_objectEach=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().objectEach,MapSeries_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,MapSeries_splat=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().splat;var MapSeries=function(_super){MapSeries_extends(MapSeries,_super);function MapSeries(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.processedData=[];return _this}MapSeries.prototype.animate=function(init){var _a=this,chart=_a.chart,group=_a.group,animation=animObject(this.options.animation);if(init){group.attr({translateX:chart.plotLeft+chart.plotWidth/2,translateY:chart.plotTop+chart.plotHeight/2,scaleX:.001,scaleY:.001})}else{group.animate({translateX:chart.plotLeft,translateY:chart.plotTop,scaleX:1,scaleY:1},animation)}};MapSeries.prototype.clearBounds=function(){this.points.forEach(function(point){delete point.bounds;delete point.insetIndex;delete point.projectedPath});delete this.bounds};MapSeries.prototype.doFullTranslate=function(){return Boolean(this.isDirtyData||this.chart.isResizing||!this.hasRendered)};MapSeries.prototype.drawMapDataLabels=function(){_super.prototype.drawDataLabels.call(this);if(this.dataLabelsGroup){this.dataLabelsGroup.clip(this.chart.clipRect)}};MapSeries.prototype.drawPoints=function(){var _this=this;var series=this,_a=this,chart=_a.chart,group=_a.group,_b=_a.transformGroups,transformGroups=_b===void 0?[]:_b,mapView=chart.mapView,renderer=chart.renderer;if(!mapView){return}this.transformGroups=transformGroups;if(!transformGroups[0]){transformGroups[0]=renderer.g().add(group)}for(var i=0,iEnd=mapView.insets.length;i<iEnd;++i){if(!transformGroups[i+1]){transformGroups.push(renderer.g().add(group))}}if(this.doFullTranslate()){this.points.forEach(function(point){var graphic=point.graphic;point.group=transformGroups[typeof point.insetIndex==="number"?point.insetIndex+1:0];if(graphic&&graphic.parentGroup!==point.group){graphic.add(point.group)}});ColumnSeries.prototype.drawPoints.apply(this);this.points.forEach(function(point){var graphic=point.graphic;if(graphic){var animate_1=graphic.animate;var className="";if(point.name){className+="highcharts-name-"+point.name.replace(/ /g,"-").toLowerCase()}if(point.properties&&point.properties["hc-key"]){className+=" highcharts-key-"+point.properties["hc-key"].toString().toLowerCase()}if(className){graphic.addClass(className)}if(chart.styledMode){graphic.css(_this.pointAttribs(point,point.selected&&"select"||void 0))}graphic.attr({visibility:point.visible||!point.visible&&!point.isNull?"inherit":"hidden"});graphic.animate=function(params,options,complete){var animateIn=MapSeries_isNumber(params["stroke-width"])&&!MapSeries_isNumber(graphic["stroke-width"]),animateOut=MapSeries_isNumber(graphic["stroke-width"])&&!MapSeries_isNumber(params["stroke-width"]);if(animateIn||animateOut){var strokeWidth=MapSeries_pick(series.getStrokeWidth(series.options),1),inheritedStrokeWidth=strokeWidth/(chart.mapView&&chart.mapView.getScale()||1);if(animateIn){graphic["stroke-width"]=inheritedStrokeWidth}if(animateOut){params["stroke-width"]=inheritedStrokeWidth}}var ret=animate_1.call(graphic,params,options,animateOut?function(){graphic.element.removeAttribute("stroke-width");delete graphic["stroke-width"];if(complete){complete.apply(this,arguments)}}:complete);return ret}}})}transformGroups.forEach(function(transformGroup,i){var view=i===0?mapView:mapView.insets[i-1],svgTransform=view.getSVGTransform(),strokeWidth=MapSeries_pick(_this.getStrokeWidth(_this.options),1);var scale=svgTransform.scaleX,flipFactor=svgTransform.scaleY>0?1:-1;var animatePoints=function(scale){(series.points||[]).forEach(function(point){var graphic=point.graphic;var strokeWidth;if(graphic&&graphic["stroke-width"]&&(strokeWidth=_this.getStrokeWidth(point.options))){graphic.attr({"stroke-width":strokeWidth/scale})}})};if(renderer.globalAnimation&&chart.hasRendered&&mapView.allowTransformAnimation){var startTranslateX_1=Number(transformGroup.attr("translateX"));var startTranslateY_1=Number(transformGroup.attr("translateY"));var startScale_1=Number(transformGroup.attr("scaleX"));var step_1=function(now,fx){var scaleStep=startScale_1+(scale-startScale_1)*fx.pos;transformGroup.attr({translateX:startTranslateX_1+(svgTransform.translateX-startTranslateX_1)*fx.pos,translateY:startTranslateY_1+(svgTransform.translateY-startTranslateY_1)*fx.pos,scaleX:scaleStep,scaleY:scaleStep*flipFactor,"stroke-width":strokeWidth/scaleStep});animatePoints(scaleStep)};var animOptions=MapSeries_merge(animObject(renderer.globalAnimation)),userStep_1=animOptions.step;animOptions.step=function(){if(userStep_1){userStep_1.apply(this,arguments)}step_1.apply(this,arguments)};transformGroup.attr({animator:0}).animate({animator:1},animOptions,function(){if(typeof renderer.globalAnimation!=="boolean"&&renderer.globalAnimation.complete){renderer.globalAnimation.complete({applyDrilldown:true})}MapSeries_fireEvent(this,"mapZoomComplete")}.bind(_this))}else{stop(transformGroup);transformGroup.attr(MapSeries_merge(svgTransform,{"stroke-width":strokeWidth/scale}));animatePoints(scale)}});if(!this.isDrilling){this.drawMapDataLabels()}};MapSeries.prototype.getProjectedBounds=function(){var _this=this;if(!this.bounds&&this.chart.mapView){var _a=this.chart.mapView,insets_1=_a.insets,projection_1=_a.projection,allBounds_1=[];(this.points||[]).forEach(function(point){if(point.path||point.geometry){if(typeof point.path==="string"){point.path=splitPath(point.path)}else if(MapSeries_isArray(point.path)&&point.path[0]==="M"){point.path=_this.chart.renderer.pathToSegments(point.path)}if(!point.bounds){var bounds=point.getProjectedBounds(projection_1);if(bounds){point.labelrank=MapSeries_pick(point.labelrank,(bounds.x2-bounds.x1)*(bounds.y2-bounds.y1));var midX_1=bounds.midX,midY_1=bounds.midY;if(insets_1&&MapSeries_isNumber(midX_1)&&MapSeries_isNumber(midY_1)){var inset=find(insets_1,function(inset){return inset.isInside({x:midX_1,y:midY_1})});if(inset){delete point.projectedPath;bounds=point.getProjectedBounds(inset.projection);if(bounds){inset.allBounds.push(bounds)}point.insetIndex=insets_1.indexOf(inset)}}point.bounds=bounds}}if(point.bounds&&point.insetIndex===void 0){allBounds_1.push(point.bounds)}}});this.bounds=Maps_MapView.compositeBounds(allBounds_1)}return this.bounds};MapSeries.prototype.getStrokeWidth=function(options){var pointAttrToOptions=this.pointAttrToOptions;return options[pointAttrToOptions&&pointAttrToOptions["stroke-width"]||"borderWidth"]};MapSeries.prototype.hasData=function(){return!!this.dataTable.rowCount};MapSeries.prototype.pointAttribs=function(point,state){var _a;var _b=point.series.chart,mapView=_b.mapView,styledMode=_b.styledMode;var attr=styledMode?this.colorAttribs(point):ColumnSeries.prototype.pointAttribs.call(this,point,state);var pointStrokeWidth=this.getStrokeWidth(point.options);if(state){var stateOptions=MapSeries_merge(this.options.states&&this.options.states[state],point.options.states&&point.options.states[state]||{}),stateStrokeWidth=this.getStrokeWidth(stateOptions);if(MapSeries_defined(stateStrokeWidth)){pointStrokeWidth=stateStrokeWidth}attr.stroke=(_a=stateOptions.borderColor)!==null&&_a!==void 0?_a:point.color}if(pointStrokeWidth&&mapView){pointStrokeWidth/=mapView.getScale()}var seriesStrokeWidth=this.getStrokeWidth(this.options);if(attr.dashstyle&&mapView&&MapSeries_isNumber(seriesStrokeWidth)){pointStrokeWidth=seriesStrokeWidth/mapView.getScale()}if(!point.visible){attr.fill=this.options.nullColor}if(MapSeries_defined(pointStrokeWidth)){attr["stroke-width"]=pointStrokeWidth}else{delete attr["stroke-width"]}attr["stroke-linecap"]=attr["stroke-linejoin"]=this.options.linecap;return attr};MapSeries.prototype.updateData=function(){if(this.processedData){return false}return _super.prototype.updateData.apply(this,arguments)};MapSeries.prototype.setData=function(data,redraw,animation,updatePoints){if(redraw===void 0){redraw=true}delete this.bounds;_super.prototype.setData.call(this,data,false,void 0,updatePoints);this.processData();this.generatePoints();if(redraw){this.chart.redraw(animation)}};MapSeries.prototype.dataColumnKeys=function(){return this.pointArrayMap};MapSeries.prototype.processData=function(){var options=this.options,data=options.data,chart=this.chart,chartOptions=chart.options.chart,joinBy=this.joinBy,pointArrayMap=options.keys||this.pointArrayMap,dataUsed=[],mapMap={},mapView=this.chart.mapView,mapDataObject=mapView&&(MapSeries_isObject(options.mapData,true)?mapView.getGeoMap(options.mapData):mapView.geoMap),mapTransforms=chart.mapTransforms=chartOptions.mapTransforms||mapDataObject&&mapDataObject["hc-transform"]||chart.mapTransforms;var mapPoint,props;if(mapTransforms){MapSeries_objectEach(mapTransforms,function(transform){if(transform.rotation){transform.cosAngle=Math.cos(transform.rotation);transform.sinAngle=Math.sin(transform.rotation)}})}var mapData;if(MapSeries_isArray(options.mapData)){mapData=options.mapData}else if(mapDataObject&&mapDataObject.type==="FeatureCollection"){this.mapTitle=mapDataObject.title;mapData=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().geojson(mapDataObject,this.type,this)}this.processedData=[];var processedData=this.processedData;if(data){var val=void 0;for(var i=0,iEnd=data.length;i<iEnd;++i){val=data[i];if(MapSeries_isNumber(val)){processedData[i]={value:val}}else if(MapSeries_isArray(val)){var ix=0;processedData[i]={};if(!options.keys&&val.length>pointArrayMap.length&&typeof val[0]==="string"){processedData[i]["hc-key"]=val[0];++ix}for(var j=0;j<pointArrayMap.length;++j,++ix){if(pointArrayMap[j]&&typeof val[ix]!=="undefined"){if(pointArrayMap[j].indexOf(".")>0){Map_MapPoint.prototype.setNestedProperty(processedData[i],val[ix],pointArrayMap[j])}else{processedData[i][pointArrayMap[j]]=val[ix]}}}}else{processedData[i]=data[i]}if(joinBy&&joinBy[0]==="_i"){processedData[i]._i=i}}}if(mapData){this.mapData=mapData;this.mapMap={};for(var i=0;i<mapData.length;i++){mapPoint=mapData[i];props=mapPoint.properties;mapPoint._i=i;if(joinBy[0]&&props&&props[joinBy[0]]){mapPoint[joinBy[0]]=props[joinBy[0]]}mapMap[mapPoint[joinBy[0]]]=mapPoint}this.mapMap=mapMap;if(joinBy[1]){var joinKey_1=joinBy[1];processedData.forEach(function(pointOptions){var mapKey=getNestedProperty(joinKey_1,pointOptions);if(mapMap[mapKey]){dataUsed.push(mapMap[mapKey])}})}if(options.allAreas){if(joinBy[1]){var joinKey_2=joinBy[1];processedData.forEach(function(pointOptions){dataUsed.push(getNestedProperty(joinKey_2,pointOptions))})}var dataUsedString_1="|"+dataUsed.map(function(point){return point&&point[joinBy[0]]}).join("|")+"|";mapData.forEach(function(mapPoint){if(!joinBy[0]||dataUsedString_1.indexOf("|"+mapPoint[joinBy[0]]+"|")===-1){processedData.push(MapSeries_merge(mapPoint,{value:null}))}})}}this.dataTable.rowCount=processedData.length;return void 0};MapSeries.prototype.setOptions=function(itemOptions){var options=_super.prototype.setOptions.call(this,itemOptions);var joinBy=options.joinBy;if(options.joinBy===null){joinBy="_i"}if(joinBy){this.joinBy=MapSeries_splat(joinBy);if(!this.joinBy[1]){this.joinBy[1]=this.joinBy[0]}}return options};MapSeries.prototype.translate=function(){var series=this,doFullTranslate=series.doFullTranslate(),mapView=this.chart.mapView,projection=mapView&&mapView.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)){this.processData();this.generatePoints();delete this.bounds;if(mapView&&!mapView.userOptions.center&&!MapSeries_isNumber(mapView.userOptions.zoom)&&mapView.zoom===mapView.minZoom){mapView.fitToBounds(void 0,void 0,false)}else{this.getProjectedBounds()}}if(mapView){var mainSvgTransform_1=mapView.getSVGTransform();series.points.forEach(function(point){var svgTransform=MapSeries_isNumber(point.insetIndex)&&mapView.insets[point.insetIndex].getSVGTransform()||mainSvgTransform_1;if(svgTransform&&point.bounds&&MapSeries_isNumber(point.bounds.midX)&&MapSeries_isNumber(point.bounds.midY)){point.plotX=point.bounds.midX*svgTransform.scaleX+svgTransform.translateX;point.plotY=point.bounds.midY*svgTransform.scaleY+svgTransform.translateY}if(doFullTranslate){point.shapeType="path";point.shapeArgs={d:Map_MapPoint.getProjectedPath(point,projection)}}if(!point.hiddenInDataClass){if(point.projectedPath&&!point.projectedPath.length){point.setVisible(false)}else if(!point.visible){point.setVisible(true)}}})}MapSeries_fireEvent(series,"afterTranslate")};MapSeries.prototype.update=function(options){var _this=this;var _a;if(options.mapData){(_a=this.chart.mapView)===null||_a===void 0?void 0:_a.recommendMapView(this.chart,MapSeries_spreadArray([this.chart.options.chart.map],(this.chart.options.series||[]).map(function(s,i){if(i===_this._i){return options.mapData}return s.mapData}),true),true)}_super.prototype.update.apply(this,arguments)};MapSeries.defaultOptions=MapSeries_merge(ScatterSeries.defaultOptions,Map_MapSeriesDefaults);return MapSeries}(ScatterSeries);MapSeries_extend(MapSeries.prototype,{type:"map",axisTypes:Series_ColorMapComposition.seriesMembers.axisTypes,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,colorKey:Series_ColorMapComposition.seriesMembers.colorKey,directTouch:true,drawDataLabels:noop,drawGraph:noop,forceDL:true,getCenter:Series_CenteredUtilities.getCenter,getExtremesFromAll:true,getSymbol:noop,isCartesian:false,parallelArrays:Series_ColorMapComposition.seriesMembers.parallelArrays,pointArrayMap:Series_ColorMapComposition.seriesMembers.pointArrayMap,pointClass:Map_MapPoint,preserveAspectRatio:true,searchPoint:noop,trackerGroups:Series_ColorMapComposition.seriesMembers.trackerGroups,useMapGeometry:true});Series_ColorMapComposition.compose(MapSeries);highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("map",MapSeries);var Map_MapSeries=MapSeries;var MapLineSeriesDefaults={lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"};var MapLine_MapLineSeriesDefaults=MapLineSeriesDefaults;"";var MapLineSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapLineSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapLineSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge;var MapLineSeries=function(_super){MapLineSeries_extends(MapLineSeries,_super);function MapLineSeries(){return _super!==null&&_super.apply(this,arguments)||this}MapLineSeries.prototype.pointAttribs=function(point,state){var attr=_super.prototype.pointAttribs.call(this,point,state);attr.fill=this.options.fillColor;return attr};MapLineSeries.defaultOptions=MapLineSeries_merge(Map_MapSeries.defaultOptions,MapLine_MapLineSeriesDefaults);return MapLineSeries}(Map_MapSeries);MapLineSeries_extend(MapLineSeries.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}});highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("mapline",MapLineSeries);var MapLine_MapLineSeries=null&&MapLineSeries;var MapPointPoint_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapPointPoint_ScatterSeries=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.scatter;var MapPointPoint_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber;var MapPointPoint=function(_super){MapPointPoint_extends(MapPointPoint,_super);function MapPointPoint(){return _super!==null&&_super.apply(this,arguments)||this}MapPointPoint.prototype.isValid=function(){return Boolean(this.options.geometry||MapPointPoint_isNumber(this.x)&&MapPointPoint_isNumber(this.y)||MapPointPoint_isNumber(this.options.lon)&&MapPointPoint_isNumber(this.options.lat))};return MapPointPoint}(MapPointPoint_ScatterSeries.prototype.pointClass);var MapPoint_MapPointPoint=MapPointPoint;var MapPointSeriesDefaults={dataLabels:{crop:false,defer:false,enabled:true,formatter:function(){return this.point.name},overflow:false,style:{color:"#000000"}},legendSymbol:"lineMarker"};var MapPoint_MapPointSeriesDefaults=MapPointSeriesDefaults;"";var highcharts_Series_types_scatter_commonjs_highcharts_Series_types_scatter_commonjs2_highcharts_Series_types_scatter_root_Highcharts_Series_types_scatter_=__webpack_require__(632);var MapPointSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapPointSeries_noop=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().noop;var MapPointSeries_a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,MapPointSeries_MapSeries=MapPointSeries_a.map,MapPointSeries_ScatterSeries=MapPointSeries_a.scatter;var MapPointSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapPointSeries_fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,MapPointSeries_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,MapPointSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge;var MapPointSeries=function(_super){MapPointSeries_extends(MapPointSeries,_super);function MapPointSeries(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.clearBounds=MapPointSeries_MapSeries.prototype.clearBounds;return _this}MapPointSeries.prototype.drawDataLabels=function(){_super.prototype.drawDataLabels.call(this);if(this.dataLabelsGroup){this.dataLabelsGroup.clip(this.chart.clipRect)}};MapPointSeries.prototype.projectPoint=function(pointOptions){var mapView=this.chart.mapView;if(mapView){var geometry=pointOptions.geometry,lon=pointOptions.lon,lat=pointOptions.lat;var coordinates=geometry&&geometry.type==="Point"&&geometry.coordinates;if(MapPointSeries_isNumber(lon)&&MapPointSeries_isNumber(lat)){coordinates=[lon,lat]}if(coordinates){return mapView.lonLatToProjectedUnits({lon:coordinates[0],lat:coordinates[1]})}}};MapPointSeries.prototype.translate=function(){var _this=this;var mapView=this.chart.mapView;this.generatePoints();if(this.getProjectedBounds&&this.isDirtyData){delete this.bounds;this.getProjectedBounds()}if(mapView){var mainSvgTransform_1=mapView.getSVGTransform(),hasCoordinates_1=mapView.projection.hasCoordinates;this.points.forEach(function(p){var _a=p.x,x=_a===void 0?void 0:_a,_b=p.y,y=_b===void 0?void 0:_b;var svgTransform=MapPointSeries_isNumber(p.insetIndex)&&mapView.insets[p.insetIndex].getSVGTransform()||mainSvgTransform_1;var xy=_this.projectPoint(p.options)||p.properties&&_this.projectPoint(p.properties);var didBounds;if(xy){x=xy.x;y=xy.y}else if(p.bounds){x=p.bounds.midX;y=p.bounds.midY;if(svgTransform&&MapPointSeries_isNumber(x)&&MapPointSeries_isNumber(y)){p.plotX=x*svgTransform.scaleX+svgTransform.translateX;p.plotY=y*svgTransform.scaleY+svgTransform.translateY;didBounds=true}}if(MapPointSeries_isNumber(x)&&MapPointSeries_isNumber(y)){if(!didBounds){var plotCoords=mapView.projectedUnitsToPixels({x:x,y:y});p.plotX=plotCoords.x;p.plotY=hasCoordinates_1?plotCoords.y:_this.chart.plotHeight-plotCoords.y}}else{p.y=p.plotX=p.plotY=void 0}p.isInside=_this.isPointInside(p);p.zone=_this.zones.length?p.getZone():void 0})}MapPointSeries_fireEvent(this,"afterTranslate")};MapPointSeries.defaultOptions=MapPointSeries_merge(MapPointSeries_ScatterSeries.defaultOptions,MapPoint_MapPointSeriesDefaults);return MapPointSeries}(MapPointSeries_ScatterSeries);var mapmarker=function(x,y,w,h,options){var isLegendSymbol=options&&options.context==="legend";var anchorX,anchorY;if(isLegendSymbol){anchorX=x+w/2;anchorY=y+h}else if(options&&typeof options.anchorX==="number"&&typeof options.anchorY==="number"){anchorX=options.anchorX;anchorY=options.anchorY}else{anchorX=x+w/2;anchorY=y+h/2;y-=h}var r=isLegendSymbol?h/3:h/2;return[["M",anchorX,anchorY],["C",anchorX,anchorY,anchorX-r,y+r*1.5,anchorX-r,y+r],["A",r,r,1,1,1,anchorX+r,y+r],["C",anchorX+r,y+r*1.5,anchorX,anchorY,anchorX,anchorY],["Z"]]};highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default().prototype.symbols.mapmarker=mapmarker;MapPointSeries_extend(MapPointSeries.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:true,isCartesian:false,pointClass:MapPoint_MapPointPoint,searchPoint:MapPointSeries_noop,useMapGeometry:true});highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("mappoint",MapPointSeries);var MapPoint_MapPointSeries=null&&MapPointSeries;"";var BubbleLegendDefaults={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:false,labels:{className:void 0,allowOverlap:false,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:false,zIndex:1,zThreshold:0};var Bubble_BubbleLegendDefaults=BubbleLegendDefaults;var BubbleLegendItem_color=highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default().parse;var BubbleLegendItem_noop=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().noop;var arrayMax=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().arrayMax,arrayMin=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().arrayMin,BubbleLegendItem_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,BubbleLegendItem_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,BubbleLegendItem_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,stableSort=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().stableSort;var BubbleLegendItem=function(){function BubbleLegendItem(options,legend){this.setState=BubbleLegendItem_noop;this.init(options,legend)}BubbleLegendItem.prototype.init=function(options,legend){this.options=options;this.visible=true;this.chart=legend.chart;this.legend=legend};BubbleLegendItem.prototype.addToLegend=function(items){items.splice(this.options.legendIndex,0,this)};BubbleLegendItem.prototype.drawLegendSymbol=function(legend){var itemDistance=BubbleLegendItem_pick(legend.options.itemDistance,20),legendItem=this.legendItem||{},options=this.options,ranges=options.ranges,connectorDistance=options.connectorDistance;var connectorSpace;if(!ranges||!ranges.length||!BubbleLegendItem_isNumber(ranges[0].value)){legend.options.bubbleLegend.autoRanges=true;return}stableSort(ranges,function(a,b){return b.value-a.value});this.ranges=ranges;this.setOptions();this.render();var maxLabel=this.getMaxLabelSize(),radius=this.ranges[0].radius,size=radius*2;connectorSpace=connectorDistance-radius+maxLabel.width;connectorSpace=connectorSpace>0?connectorSpace:0;this.maxLabel=maxLabel;this.movementX=options.labels.align==="left"?connectorSpace:0;legendItem.labelWidth=size+connectorSpace+itemDistance;legendItem.labelHeight=size+maxLabel.height/2};BubbleLegendItem.prototype.setOptions=function(){var ranges=this.ranges,options=this.options,series=this.chart.series[options.seriesIndex],baseline=this.legend.baseline,bubbleAttribs={zIndex:options.zIndex,"stroke-width":options.borderWidth},connectorAttribs={zIndex:options.zIndex,"stroke-width":options.connectorWidth},labelAttribs={align:this.legend.options.rtl||options.labels.align==="left"?"right":"left",zIndex:options.zIndex},fillOpacity=series.options.marker.fillOpacity,styledMode=this.chart.styledMode;ranges.forEach(function(range,i){if(!styledMode){bubbleAttribs.stroke=BubbleLegendItem_pick(range.borderColor,options.borderColor,series.color);bubbleAttribs.fill=BubbleLegendItem_pick(range.color,options.color,fillOpacity!==1?BubbleLegendItem_color(series.color).setOpacity(fillOpacity).get("rgba"):series.color);connectorAttribs.stroke=BubbleLegendItem_pick(range.connectorColor,options.connectorColor,series.color)}ranges[i].radius=this.getRangeRadius(range.value);ranges[i]=BubbleLegendItem_merge(ranges[i],{center:ranges[0].radius-ranges[i].radius+baseline});if(!styledMode){BubbleLegendItem_merge(true,ranges[i],{bubbleAttribs:BubbleLegendItem_merge(bubbleAttribs),connectorAttribs:BubbleLegendItem_merge(connectorAttribs),labelAttribs:labelAttribs})}},this)};BubbleLegendItem.prototype.getRangeRadius=function(value){var options=this.options,seriesIndex=this.options.seriesIndex,bubbleSeries=this.chart.series[seriesIndex],zMax=options.ranges[0].value,zMin=options.ranges[options.ranges.length-1].value,minSize=options.minSize,maxSize=options.maxSize;return bubbleSeries.getRadius.call(this,zMin,zMax,minSize,maxSize,value)};BubbleLegendItem.prototype.render=function(){var legendItem=this.legendItem||{},renderer=this.chart.renderer,zThreshold=this.options.zThreshold;if(!this.symbols){this.symbols={connectors:[],bubbleItems:[],labels:[]}}legendItem.symbol=renderer.g("bubble-legend");legendItem.label=renderer.g("bubble-legend-item").css(this.legend.itemStyle||{});legendItem.symbol.translateX=0;legendItem.symbol.translateY=0;legendItem.symbol.add(legendItem.label);legendItem.label.add(legendItem.group);for(var _i=0,_a=this.ranges;_i<_a.length;_i++){var range=_a[_i];if(range.value>=zThreshold){this.renderRange(range)}}this.hideOverlappingLabels()};BubbleLegendItem.prototype.renderRange=function(range){var mainRange=this.ranges[0],legend=this.legend,options=this.options,labelsOptions=options.labels,chart=this.chart,bubbleSeries=chart.series[options.seriesIndex],renderer=chart.renderer,symbols=this.symbols,labels=symbols.labels,elementCenter=range.center,absoluteRadius=Math.abs(range.radius),connectorDistance=options.connectorDistance||0,labelsAlign=labelsOptions.align,rtl=legend.options.rtl,borderWidth=options.borderWidth,connectorWidth=options.connectorWidth,posX=mainRange.radius||0,posY=elementCenter-absoluteRadius-borderWidth/2+connectorWidth/2,crispMovement=(posY%1?1:.5)-(connectorWidth%2?0:.5),styledMode=renderer.styledMode;var connectorLength=rtl||labelsAlign==="left"?-connectorDistance:connectorDistance;if(labelsAlign==="center"){connectorLength=0;options.connectorDistance=0;range.labelAttribs.align="center"}symbols.bubbleItems.push(renderer.circle(posX,elementCenter+crispMovement,absoluteRadius).attr(styledMode?{}:range.bubbleAttribs).addClass((styledMode?"highcharts-color-"+bubbleSeries.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(options.className||"")).add(this.legendItem.symbol));symbols.connectors.push(renderer.path(renderer.crispLine([["M",posX,posY],["L",posX+connectorLength,posY]],options.connectorWidth)).attr(styledMode?{}:range.connectorAttribs).addClass((styledMode?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(options.connectorClassName||"")).add(this.legendItem.symbol));var label=renderer.text(this.formatLabel(range)).attr(styledMode?{}:range.labelAttribs).css(styledMode?{}:labelsOptions.style).addClass("highcharts-bubble-legend-labels "+(options.labels.className||"")).add(this.legendItem.symbol);var position={x:posX+connectorLength+options.labels.x,y:posY+options.labels.y+label.getBBox().height*.4};label.attr(position);labels.push(label);label.placed=true;label.alignAttr=position};BubbleLegendItem.prototype.getMaxLabelSize=function(){var labels=this.symbols.labels;var maxLabel,labelSize;labels.forEach(function(label){labelSize=label.getBBox(true);if(maxLabel){maxLabel=labelSize.width>maxLabel.width?labelSize:maxLabel}else{maxLabel=labelSize}});return maxLabel||{}};BubbleLegendItem.prototype.formatLabel=function(range){var options=this.options,formatter=options.labels.formatter,format=options.labels.format;var numberFormatter=this.chart.numberFormatter;return format?highcharts_Templating_commonjs_highcharts_Templating_commonjs2_highcharts_Templating_root_Highcharts_Templating_default().format(format,range,this.chart):formatter?formatter.call(range):numberFormatter(range.value,1)};BubbleLegendItem.prototype.hideOverlappingLabels=function(){var chart=this.chart,allowOverlap=this.options.labels.allowOverlap,symbols=this.symbols;if(!allowOverlap&&symbols){chart.hideOverlappingLabels(symbols.labels);symbols.labels.forEach(function(label,index){if(!label.newOpacity){symbols.connectors[index].hide()}else if(label.newOpacity!==label.oldOpacity){symbols.connectors[index].show()}})}};BubbleLegendItem.prototype.getRanges=function(){var bubbleLegend=this.legend.bubbleLegend,series=bubbleLegend.chart.series,rangesOptions=bubbleLegend.options.ranges;var ranges,zData,minZ=Number.MAX_VALUE,maxZ=-Number.MAX_VALUE;series.forEach(function(s){if(s.isBubble&&!s.ignoreSeries){zData=s.getColumn("z").filter(BubbleLegendItem_isNumber);if(zData.length){minZ=BubbleLegendItem_pick(s.options.zMin,Math.min(minZ,Math.max(arrayMin(zData),s.options.displayNegative===false?s.options.zThreshold:-Number.MAX_VALUE)));maxZ=BubbleLegendItem_pick(s.options.zMax,Math.max(maxZ,arrayMax(zData)))}}});if(minZ===maxZ){ranges=[{value:maxZ}]}else{ranges=[{value:minZ},{value:(minZ+maxZ)/2},{value:maxZ,autoRanges:true}]}if(rangesOptions.length&&rangesOptions[0].radius){ranges.reverse()}ranges.forEach(function(range,i){if(rangesOptions&&rangesOptions[i]){ranges[i]=BubbleLegendItem_merge(rangesOptions[i],range)}});return ranges};BubbleLegendItem.prototype.predictBubbleSizes=function(){var chart=this.chart,legendOptions=chart.legend.options,floating=legendOptions.floating,horizontal=legendOptions.layout==="horizontal",lastLineHeight=horizontal?chart.legend.lastLineHeight:0,plotSizeX=chart.plotSizeX,plotSizeY=chart.plotSizeY,bubbleSeries=chart.series[this.options.seriesIndex],pxSizes=bubbleSeries.getPxExtremes(),minSize=Math.ceil(pxSizes.minPxSize),maxPxSize=Math.ceil(pxSizes.maxPxSize),plotSize=Math.min(plotSizeY,plotSizeX);var calculatedSize,maxSize=bubbleSeries.options.maxSize;if(floating||!/%$/.test(maxSize)){calculatedSize=maxPxSize}else{maxSize=parseFloat(maxSize);calculatedSize=(plotSize+lastLineHeight)*maxSize/100/(maxSize/100+1);if(horizontal&&plotSizeY-calculatedSize>=plotSizeX||!horizontal&&plotSizeX-calculatedSize>=plotSizeY){calculatedSize=maxPxSize}}return[minSize,Math.ceil(calculatedSize)]};BubbleLegendItem.prototype.updateRanges=function(min,max){var bubbleLegendOptions=this.legend.options.bubbleLegend;bubbleLegendOptions.minSize=min;bubbleLegendOptions.maxSize=max;bubbleLegendOptions.ranges=this.getRanges()};BubbleLegendItem.prototype.correctSizes=function(){var legend=this.legend,chart=this.chart,bubbleSeries=chart.series[this.options.seriesIndex],pxSizes=bubbleSeries.getPxExtremes(),bubbleSeriesSize=pxSizes.maxPxSize,bubbleLegendSize=this.options.maxSize;if(Math.abs(Math.ceil(bubbleSeriesSize)-bubbleLegendSize)>1){this.updateRanges(this.options.minSize,pxSizes.maxPxSize);legend.render()}};return BubbleLegendItem}();var Bubble_BubbleLegendItem=BubbleLegendItem;"";var BubbleLegendComposition_setOptions=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().setOptions;var BubbleLegendComposition_composed=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().composed;var BubbleLegendComposition_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,BubbleLegendComposition_objectEach=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().objectEach,BubbleLegendComposition_pushUnique=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pushUnique,BubbleLegendComposition_wrap=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().wrap;function chartDrawChartBox(proceed,options,callback){var chart=this,legend=chart.legend,bubbleSeries=getVisibleBubbleSeriesIndex(chart)>=0;var bubbleLegendOptions,bubbleSizes,legendItem;if(legend&&legend.options.enabled&&legend.bubbleLegend&&legend.options.bubbleLegend.autoRanges&&bubbleSeries){bubbleLegendOptions=legend.bubbleLegend.options;bubbleSizes=legend.bubbleLegend.predictBubbleSizes();legend.bubbleLegend.updateRanges(bubbleSizes[0],bubbleSizes[1]);if(!bubbleLegendOptions.placed){legend.group.placed=false;legend.allItems.forEach(function(item){legendItem=item.legendItem||{};if(legendItem.group){legendItem.group.translateY=void 0}})}legend.render();if(!bubbleLegendOptions.placed){chart.getMargins();chart.axes.forEach(function(axis){axis.setScale();axis.updateNames();BubbleLegendComposition_objectEach(axis.ticks,function(tick){tick.isNew=true;tick.isNewLabel=true})});chart.getMargins()}bubbleLegendOptions.placed=true;proceed.call(chart,options,callback);legend.bubbleLegend.correctSizes();retranslateItems(legend,getLinesHeights(legend))}else{proceed.call(chart,options,callback);if(legend&&legend.options.enabled&&legend.bubbleLegend){legend.render();retranslateItems(legend,getLinesHeights(legend))}}}function BubbleLegendComposition_compose(ChartClass,LegendClass){if(BubbleLegendComposition_pushUnique(BubbleLegendComposition_composed,"Series.BubbleLegend")){BubbleLegendComposition_setOptions({legend:{bubbleLegend:Bubble_BubbleLegendDefaults}});BubbleLegendComposition_wrap(ChartClass.prototype,"drawChartBox",chartDrawChartBox);BubbleLegendComposition_addEvent(LegendClass,"afterGetAllItems",onLegendAfterGetAllItems);BubbleLegendComposition_addEvent(LegendClass,"itemClick",onLegendItemClick)}}function getVisibleBubbleSeriesIndex(chart){var series=chart.series;var i=0;while(i<series.length){if(series[i]&&series[i].isBubble&&series[i].visible&&series[i].dataTable.rowCount){return i}i++}return-1}function getLinesHeights(legend){var items=legend.allItems,lines=[],length=items.length;var lastLine,legendItem,legendItem2,i=0,j=0;for(i=0;i<length;i++){legendItem=items[i].legendItem||{};legendItem2=(items[i+1]||{}).legendItem||{};if(legendItem.labelHeight){items[i].itemHeight=legendItem.labelHeight}if(items[i]===items[length-1]||legendItem.y!==legendItem2.y){lines.push({height:0});lastLine=lines[lines.length-1];for(j;j<=i;j++){if(items[j].itemHeight>lastLine.height){lastLine.height=items[j].itemHeight}}lastLine.step=i}}return lines}function onLegendAfterGetAllItems(e){var legend=this,bubbleLegend=legend.bubbleLegend,legendOptions=legend.options,options=legendOptions.bubbleLegend,bubbleSeriesIndex=getVisibleBubbleSeriesIndex(legend.chart);if(bubbleLegend&&bubbleLegend.ranges&&bubbleLegend.ranges.length){if(options.ranges.length){options.autoRanges=!!options.ranges[0].autoRanges}legend.destroyItem(bubbleLegend)}if(bubbleSeriesIndex>=0&&legendOptions.enabled&&options.enabled){options.seriesIndex=bubbleSeriesIndex;legend.bubbleLegend=new Bubble_BubbleLegendItem(options,legend);legend.bubbleLegend.addToLegend(e.allItems)}}function onLegendItemClick(e){if(e.defaultPrevented){return false}var legend=this,series=e.legendItem,chart=legend.chart,visible=series.visible;var status;if(legend&&legend.bubbleLegend){series.visible=!visible;series.ignoreSeries=visible;status=getVisibleBubbleSeriesIndex(chart)>=0;if(legend.bubbleLegend.visible!==status){legend.update({bubbleLegend:{enabled:status}});legend.bubbleLegend.visible=status}series.visible=visible}}function retranslateItems(legend,lines){var items=legend.allItems,rtl=legend.options.rtl;var orgTranslateX,orgTranslateY,movementX,legendItem,actualLine=0;items.forEach(function(item,index){legendItem=item.legendItem||{};if(!legendItem.group){return}orgTranslateX=legendItem.group.translateX||0;orgTranslateY=legendItem.y||0;movementX=item.movementX;if(movementX||rtl&&item.ranges){movementX=rtl?orgTranslateX-item.options.maxSize/2:orgTranslateX+movementX;legendItem.group.attr({translateX:movementX})}if(index>lines[actualLine].step){actualLine++}legendItem.group.attr({translateY:Math.round(orgTranslateY+lines[actualLine].height/2)});legendItem.y=orgTranslateY+lines[actualLine].height/2})}var BubbleLegendComposition={compose:BubbleLegendComposition_compose};var Bubble_BubbleLegendComposition=BubbleLegendComposition;var highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_=__webpack_require__(260);var highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_default=__webpack_require__.n(highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_);var BubblePoint_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var BubblePoint_ScatterPoint=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.scatter.prototype.pointClass;var BubblePoint_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend;var BubblePoint=function(_super){BubblePoint_extends(BubblePoint,_super);function BubblePoint(){return _super!==null&&_super.apply(this,arguments)||this}BubblePoint.prototype.haloPath=function(size){var computedSize=(size&&this.marker?this.marker.radius||0:0)+size;if(this.series.chart.inverted){var pos=this.pos()||[0,0],_a=this.series,xAxis=_a.xAxis,yAxis=_a.yAxis,chart=_a.chart;return chart.renderer.symbols.circle(xAxis.len-pos[1]-computedSize,yAxis.len-pos[0]-computedSize,computedSize*2,computedSize*2)}return highcharts_Point_commonjs_highcharts_Point_commonjs2_highcharts_Point_root_Highcharts_Point_default().prototype.haloPath.call(this,computedSize)};return BubblePoint}(BubblePoint_ScatterPoint);BubblePoint_extend(BubblePoint.prototype,{ttBelow:false});var Bubble_BubblePoint=BubblePoint;var BubbleSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var BubbleSeries_color=highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default().parse;var BubbleSeries_composed=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().composed,BubbleSeries_noop=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().noop;var BubbleSeries_Series=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().series,BubbleSeries_a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,BubbleSeries_columnProto=BubbleSeries_a.column.prototype,BubbleSeries_ScatterSeries=BubbleSeries_a.scatter;var BubbleSeries_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,BubbleSeries_arrayMax=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().arrayMax,BubbleSeries_arrayMin=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().arrayMin,BubbleSeries_clamp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clamp,BubbleSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,BubbleSeries_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,BubbleSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,BubbleSeries_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,BubbleSeries_pushUnique=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pushUnique;function onAxisFoundExtremes(){var _this=this;var axisLength=this.len,_a=this,coll=_a.coll,isXAxis=_a.isXAxis,min=_a.min,range=(this.max||0)-(min||0);var pxMin=0,pxMax=axisLength,transA=axisLength/range,hasActiveSeries;if(coll!=="xAxis"&&coll!=="yAxis"){return}this.series.forEach(function(series){if(series.bubblePadding&&series.reserveSpace()){_this.allowZoomOutside=true;hasActiveSeries=true;var data=series.getColumn(isXAxis?"x":"y");if(isXAxis){(series.onPoint||series).getRadii(0,0,series);if(series.onPoint){series.radii=series.onPoint.radii}}if(range>0){var i=data.length;while(i--){if(BubbleSeries_isNumber(data[i])&&_this.dataMin<=data[i]&&data[i]<=_this.max){var radius=series.radii&&series.radii[i]||0;pxMin=Math.min((data[i]-min)*transA-radius,pxMin);pxMax=Math.max((data[i]-min)*transA+radius,pxMax)}}}}});if(hasActiveSeries&&range>0&&!this.logarithmic){pxMax-=axisLength;transA*=(axisLength+Math.max(0,pxMin)-Math.min(pxMax,axisLength))/axisLength;[["min","userMin",pxMin],["max","userMax",pxMax]].forEach(function(keys){if(typeof BubbleSeries_pick(_this.options[keys[0]],_this[keys[1]])==="undefined"){_this[keys[0]]+=keys[2]/transA}})}}function onAxisAfterRender(){var _a;var _b=this,ticks=_b.ticks,tickPositions=_b.tickPositions,_c=_b.dataMin,dataMin=_c===void 0?0:_c,_d=_b.dataMax,dataMax=_d===void 0?0:_d,categories=_b.categories,type=this.options.type;if(((categories===null||categories===void 0?void 0:categories.length)||type==="category")&&this.series.find(function(s){return s.bubblePadding})){var tickCount=tickPositions.length;while(tickCount--){var tick=ticks[tickPositions[tickCount]],pos=tick.pos||0;if(pos>dataMax||pos<dataMin){(_a=tick.label)===null||_a===void 0?void 0:_a.hide()}}}}var BubbleSeries=function(_super){BubbleSeries_extends(BubbleSeries,_super);function BubbleSeries(){return _super!==null&&_super.apply(this,arguments)||this}BubbleSeries.compose=function(AxisClass,ChartClass,LegendClass){Bubble_BubbleLegendComposition.compose(ChartClass,LegendClass);if(BubbleSeries_pushUnique(BubbleSeries_composed,"Series.Bubble")){BubbleSeries_addEvent(AxisClass,"foundExtremes",onAxisFoundExtremes);BubbleSeries_addEvent(AxisClass,"afterRender",onAxisAfterRender)}};BubbleSeries.prototype.animate=function(init){if(!init&&this.points.length<this.options.animationLimit){this.points.forEach(function(point){var graphic=point.graphic,_a=point.plotX,plotX=_a===void 0?0:_a,_b=point.plotY,plotY=_b===void 0?0:_b;if(graphic&&graphic.width){if(!this.hasRendered){graphic.attr({x:plotX,y:plotY,width:1,height:1})}graphic.animate(this.markerAttribs(point),this.options.animation)}},this)}};BubbleSeries.prototype.getRadii=function(){var zData=this.getColumn("z"),yData=this.getColumn("y"),radii=[];var len,i,value,zExtremes=this.chart.bubbleZExtremes;var _a=this.getPxExtremes(),minPxSize=_a.minPxSize,maxPxSize=_a.maxPxSize;if(!zExtremes){var zMin_1=Number.MAX_VALUE;var zMax_1=-Number.MAX_VALUE;var valid_1;this.chart.series.forEach(function(otherSeries){if(otherSeries.bubblePadding&&otherSeries.reserveSpace()){var zExtremes_1=(otherSeries.onPoint||otherSeries).getZExtremes();if(zExtremes_1){zMin_1=Math.min(BubbleSeries_pick(zMin_1,zExtremes_1.zMin),zExtremes_1.zMin);zMax_1=Math.max(BubbleSeries_pick(zMax_1,zExtremes_1.zMax),zExtremes_1.zMax);valid_1=true}}});if(valid_1){zExtremes={zMin:zMin_1,zMax:zMax_1};this.chart.bubbleZExtremes=zExtremes}else{zExtremes={zMin:0,zMax:0}}}for(i=0,len=zData.length;i<len;i++){value=zData[i];radii.push(this.getRadius(zExtremes.zMin,zExtremes.zMax,minPxSize,maxPxSize,value,yData&&yData[i]))}this.radii=radii};BubbleSeries.prototype.getRadius=function(zMin,zMax,minSize,maxSize,value,yValue){var options=this.options,sizeByArea=options.sizeBy!=="width",zThreshold=options.zThreshold;var zRange=zMax-zMin,pos=.5;if(yValue===null||value===null){return null}if(BubbleSeries_isNumber(value)){if(options.sizeByAbsoluteValue){value=Math.abs(value-zThreshold);zMax=zRange=Math.max(zMax-zThreshold,Math.abs(zMin-zThreshold));zMin=0}if(value<zMin){return minSize/2-1}if(zRange>0){pos=(value-zMin)/zRange}}if(sizeByArea&&pos>=0){pos=Math.sqrt(pos)}return Math.ceil(minSize+pos*(maxSize-minSize))/2};BubbleSeries.prototype.hasData=function(){return!!this.dataTable.rowCount};BubbleSeries.prototype.markerAttribs=function(point,state){var attr=_super.prototype.markerAttribs.call(this,point,state),_a=attr.height,height=_a===void 0?0:_a,_b=attr.width,width=_b===void 0?0:_b;return this.chart.inverted?BubbleSeries_extend(attr,{x:(point.plotX||0)-width/2,y:(point.plotY||0)-height/2}):attr};BubbleSeries.prototype.pointAttribs=function(point,state){var markerOptions=this.options.marker,fillOpacity=markerOptions.fillOpacity,attr=BubbleSeries_Series.prototype.pointAttribs.call(this,point,state);if(fillOpacity!==1){attr.fill=BubbleSeries_color(attr.fill).setOpacity(fillOpacity).get("rgba")}return attr};BubbleSeries.prototype.translate=function(){_super.prototype.translate.call(this);this.getRadii();this.translateBubble()};BubbleSeries.prototype.translateBubble=function(){var _a=this,data=_a.data,options=_a.options,radii=_a.radii,minPxSize=this.getPxExtremes().minPxSize;var i=data.length;while(i--){var point=data[i],radius=radii?radii[i]:0;if(this.zoneAxis==="z"){point.negative=(point.z||0)<(options.zThreshold||0)}if(BubbleSeries_isNumber(radius)&&radius>=minPxSize/2){point.marker=BubbleSeries_extend(point.marker,{radius:radius,width:2*radius,height:2*radius});point.dlBox={x:point.plotX-radius,y:point.plotY-radius,width:2*radius,height:2*radius}}else{point.shapeArgs=point.plotY=point.dlBox=void 0;point.isInside=false}}};BubbleSeries.prototype.getPxExtremes=function(){var smallestSize=Math.min(this.chart.plotWidth,this.chart.plotHeight);var getPxSize=function(length){var isPercent;if(typeof length==="string"){isPercent=/%$/.test(length);length=parseInt(length,10)}return isPercent?smallestSize*length/100:length};var minPxSize=getPxSize(BubbleSeries_pick(this.options.minSize,8));var maxPxSize=Math.max(getPxSize(BubbleSeries_pick(this.options.maxSize,"20%")),minPxSize);return{minPxSize:minPxSize,maxPxSize:maxPxSize}};BubbleSeries.prototype.getZExtremes=function(){var options=this.options,zData=this.getColumn("z").filter(BubbleSeries_isNumber);if(zData.length){var zMin=BubbleSeries_pick(options.zMin,BubbleSeries_clamp(BubbleSeries_arrayMin(zData),options.displayNegative===false?options.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE));var zMax=BubbleSeries_pick(options.zMax,BubbleSeries_arrayMax(zData));if(BubbleSeries_isNumber(zMin)&&BubbleSeries_isNumber(zMax)){return{zMin:zMin,zMax:zMax}}}};BubbleSeries.defaultOptions=BubbleSeries_merge(BubbleSeries_ScatterSeries.defaultOptions,{dataLabels:{formatter:function(){var numberFormatter=this.series.chart.numberFormatter;var z=this.point.z;return BubbleSeries_isNumber(z)?numberFormatter(z,-1):""},inside:true,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:false,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"});return BubbleSeries}(BubbleSeries_ScatterSeries);BubbleSeries_extend(BubbleSeries.prototype,{alignDataLabel:BubbleSeries_columnProto.alignDataLabel,applyZones:BubbleSeries_noop,bubblePadding:true,isBubble:true,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:Bubble_BubblePoint,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"});BubbleSeries_addEvent(BubbleSeries,"updatedData",function(e){delete e.target.chart.bubbleZExtremes});BubbleSeries_addEvent(BubbleSeries,"remove",function(e){delete e.target.chart.bubbleZExtremes});highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("bubble",BubbleSeries);var Bubble_BubbleSeries=BubbleSeries;"";"";var MapBubblePoint_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var mapPointProto=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.map.prototype.pointClass.prototype;var MapBubblePoint_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend;var MapBubblePoint=function(_super){MapBubblePoint_extends(MapBubblePoint,_super);function MapBubblePoint(){return _super!==null&&_super.apply(this,arguments)||this}MapBubblePoint.prototype.isValid=function(){return typeof this.z==="number"};return MapBubblePoint}(Bubble_BubblePoint);MapBubblePoint_extend(MapBubblePoint.prototype,{applyOptions:mapPointProto.applyOptions,getProjectedBounds:mapPointProto.getProjectedBounds});var MapBubble_MapBubblePoint=MapBubblePoint;var MapBubbleSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MapBubbleSeries_a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,mapProto=MapBubbleSeries_a.map.prototype,MapBubbleSeries_mapPointProto=MapBubbleSeries_a.mappoint.prototype;var MapBubbleSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,MapBubbleSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge;var MapBubbleSeries=function(_super){MapBubbleSeries_extends(MapBubbleSeries,_super);function MapBubbleSeries(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.clearBounds=mapProto.clearBounds;return _this}MapBubbleSeries.prototype.searchPoint=function(e,compareX){return this.searchKDTree({plotX:e.chartX-this.chart.plotLeft,plotY:e.chartY-this.chart.plotTop},compareX,e)};MapBubbleSeries.prototype.translate=function(){MapBubbleSeries_mapPointProto.translate.call(this);this.getRadii();this.translateBubble()};MapBubbleSeries.defaultOptions=MapBubbleSeries_merge(Bubble_BubbleSeries.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}});return MapBubbleSeries}(Bubble_BubbleSeries);MapBubbleSeries_extend(MapBubbleSeries.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:mapProto.getProjectedBounds,isCartesian:false,pointArrayMap:["z"],pointClass:MapBubble_MapBubblePoint,processData:mapProto.processData,projectPoint:MapBubbleSeries_mapPointProto.projectPoint,kdAxisArray:["plotX","plotY"],setData:mapProto.setData,setOptions:mapProto.setOptions,updateData:mapProto.updateData,useMapGeometry:true,xyFromShape:true});highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("mapbubble",MapBubbleSeries);var MapBubble_MapBubbleSeries=MapBubbleSeries;"";var HeatmapPoint_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var HeatmapPoint_ScatterPoint=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.scatter.prototype.pointClass;var HeatmapPoint_clamp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().clamp,HeatmapPoint_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,HeatmapPoint_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,HeatmapPoint_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;var HeatmapPoint=function(_super){HeatmapPoint_extends(HeatmapPoint,_super);function HeatmapPoint(){return _super!==null&&_super.apply(this,arguments)||this}HeatmapPoint.prototype.applyOptions=function(options,x){if(this.isNull||this.value===null){delete this.color}_super.prototype.applyOptions.call(this,options,x);this.formatPrefix=this.isNull||this.value===null?"null":"point";return this};HeatmapPoint.prototype.getCellAttributes=function(){var point=this,series=point.series,seriesOptions=series.options,xPad=(seriesOptions.colsize||1)/2,yPad=(seriesOptions.rowsize||1)/2,xAxis=series.xAxis,yAxis=series.yAxis,markerOptions=point.options.marker||series.options.marker,pointPlacement=series.pointPlacementToXValue(),pointPadding=HeatmapPoint_pick(point.pointPadding,seriesOptions.pointPadding,0),cellAttr={x1:HeatmapPoint_clamp(Math.round(xAxis.len-xAxis.translate(point.x-xPad,false,true,false,true,-pointPlacement)),-xAxis.len,2*xAxis.len),x2:HeatmapPoint_clamp(Math.round(xAxis.len-xAxis.translate(point.x+xPad,false,true,false,true,-pointPlacement)),-xAxis.len,2*xAxis.len),y1:HeatmapPoint_clamp(Math.round(yAxis.translate(point.y-yPad,false,true,false,true)),-yAxis.len,2*yAxis.len),y2:HeatmapPoint_clamp(Math.round(yAxis.translate(point.y+yPad,false,true,false,true)),-yAxis.len,2*yAxis.len)};var dimensions=[["width","x"],["height","y"]];for(var _i=0,dimensions_1=dimensions;_i<dimensions_1.length;_i++){var dimension=dimensions_1[_i];var prop=dimension[0],direction=dimension[1];var start=direction+"1",end=direction+"2";var side=Math.abs(cellAttr[start]-cellAttr[end]),borderWidth=markerOptions&&markerOptions.lineWidth||0,plotPos=Math.abs(cellAttr[start]+cellAttr[end])/2,widthOrHeight=markerOptions&&markerOptions[prop];if(HeatmapPoint_defined(widthOrHeight)&&widthOrHeight<side){var halfCellSize=widthOrHeight/2+borderWidth/2;cellAttr[start]=plotPos-halfCellSize;cellAttr[end]=plotPos+halfCellSize}if(pointPadding){if(direction==="x"&&xAxis.reversed||direction==="y"&&!yAxis.reversed){start=end;end=direction+"1"}cellAttr[start]+=pointPadding;cellAttr[end]-=pointPadding}}return cellAttr};HeatmapPoint.prototype.haloPath=function(size){if(!size){return[]}var _a=this.shapeArgs||{},_b=_a.x,x=_b===void 0?0:_b,_c=_a.y,y=_c===void 0?0:_c,_d=_a.width,width=_d===void 0?0:_d,_e=_a.height,height=_e===void 0?0:_e;return[["M",x-size,y-size],["L",x-size,y+height+size],["L",x+width+size,y+height+size],["L",x+width+size,y-size],["Z"]]};HeatmapPoint.prototype.isValid=function(){return this.value!==Infinity&&this.value!==-Infinity};return HeatmapPoint}(HeatmapPoint_ScatterPoint);HeatmapPoint_extend(HeatmapPoint.prototype,{dataLabelOnNull:true,moveToTopOnHover:true,ttBelow:false});var Heatmap_HeatmapPoint=HeatmapPoint;var HeatmapSeriesDefaults_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber;var HeatmapSeriesDefaults={animation:false,borderRadius:0,borderWidth:0,interpolation:false,nullColor:"#f7f7f7",dataLabels:{formatter:function(){var numberFormatter=this.series.chart.numberFormatter;var value=this.point.value;return HeatmapSeriesDefaults_isNumber(value)?numberFormatter(value,-1):""},inside:true,verticalAlign:"middle",crop:false,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:true,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:false,brightness:.2}},legendSymbol:"rectangle"};"";var Heatmap_HeatmapSeriesDefaults=HeatmapSeriesDefaults;var doc=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().doc;var InterpolationUtilities_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,InterpolationUtilities_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;function colorFromPoint(value,point){var colorAxis=point.series.colorAxis;if(colorAxis){var rgba=colorAxis.toColor(value||0,point).split(")")[0].split("(")[1].split(",").map(function(s){return InterpolationUtilities_pick(parseFloat(s),parseInt(s,10))});rgba[3]=InterpolationUtilities_pick(rgba[3],1)*255;if(!InterpolationUtilities_defined(value)||!point.visible){rgba[3]=0}return rgba}return[0,0,0,0]}function getContext(series){var canvas=series.canvas,context=series.context;if(canvas&&context){context.clearRect(0,0,canvas.width,canvas.height)}else{series.canvas=doc.createElement("canvas");series.context=series.canvas.getContext("2d",{willReadFrequently:true})||void 0;return series.context}return context}var InterpolationUtilities={colorFromPoint:colorFromPoint,getContext:getContext};var Series_InterpolationUtilities=InterpolationUtilities;var HeatmapSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var HeatmapSeries_assign=undefined&&undefined.__assign||function(){HeatmapSeries_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return HeatmapSeries_assign.apply(this,arguments)};var HeatmapSeries_Series=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().series,HeatmapSeries_a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,HeatmapSeries_ColumnSeries=HeatmapSeries_a.column,HeatmapSeries_ScatterSeries=HeatmapSeries_a.scatter;var HeatmapSeries_symbols=highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default().prototype.symbols;var HeatmapSeries_addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,HeatmapSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,HeatmapSeries_fireEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().fireEvent,HeatmapSeries_isNumber=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().isNumber,HeatmapSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,HeatmapSeries_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;var HeatmapSeries_colorFromPoint=Series_InterpolationUtilities.colorFromPoint,HeatmapSeries_getContext=Series_InterpolationUtilities.getContext;var HeatmapSeries=function(_super){HeatmapSeries_extends(HeatmapSeries,_super);function HeatmapSeries(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.valueMax=NaN;_this.valueMin=NaN;_this.isDirtyCanvas=true;return _this}HeatmapSeries.prototype.drawPoints=function(){var series=this,seriesOptions=series.options,interpolation=seriesOptions.interpolation,seriesMarkerOptions=seriesOptions.marker||{};if(interpolation){var image=series.image,chart=series.chart,xAxis=series.xAxis,yAxis=series.yAxis,_a=xAxis.reversed,xRev=_a===void 0?false:_a,width=xAxis.len,_b=yAxis.reversed,yRev=_b===void 0?false:_b,height=yAxis.len,dimensions={width:width,height:height};if(!image||series.isDirtyData||series.isDirtyCanvas){var ctx=HeatmapSeries_getContext(series),canvas=series.canvas,_c=series.options,_d=_c.colsize,colsize=_d===void 0?1:_d,_e=_c.rowsize,rowsize=_e===void 0?1:_e,points=series.points,length_1=series.points.length,pointsLen=length_1-1,colorAxis=chart.colorAxis&&chart.colorAxis[0];if(canvas&&ctx&&colorAxis){var _f=xAxis.getExtremes(),xMin_1=_f.min,xMax=_f.max,_g=yAxis.getExtremes(),yMin_1=_g.min,yMax=_g.max,xDelta=xMax-xMin_1,yDelta=yMax-yMin_1,imgMultiple=8,lastX=Math.round(imgMultiple*(xDelta/colsize/imgMultiple)),lastY=Math.round(imgMultiple*(yDelta/rowsize/imgMultiple)),_h=[[lastX,lastX/xDelta,xRev,"ceil"],[lastY,lastY/yDelta,!yRev,"floor"]].map(function(_a){var last=_a[0],scale=_a[1],rev=_a[2],rounding=_a[3];return rev?function(v){return Math[rounding](last-scale*v)}:function(v){return Math[rounding](scale*v)}}),transformX_1=_h[0],transformY_1=_h[1],canvasWidth_1=canvas.width=lastX+1,canvasHeight=canvas.height=lastY+1,canvasArea=canvasWidth_1*canvasHeight,pixelToPointScale=pointsLen/canvasArea,pixelData=new Uint8ClampedArray(canvasArea*4),pointInPixels=function(x,y){return Math.ceil(canvasWidth_1*transformY_1(y-yMin_1)+transformX_1(x-xMin_1))*4};series.buildKDTree();for(var i=0;i<canvasArea;i++){var point=points[Math.ceil(pixelToPointScale*i)],x=point.x,y=point.y;pixelData.set(HeatmapSeries_colorFromPoint(point.value,point),pointInPixels(x,y))}ctx.putImageData(new ImageData(pixelData,canvasWidth_1),0,0);if(image){image.attr(HeatmapSeries_assign(HeatmapSeries_assign({},dimensions),{href:canvas.toDataURL("image/png",1)}))}else{series.directTouch=false;series.image=chart.renderer.image(canvas.toDataURL("image/png",1)).attr(dimensions).add(series.group)}}series.isDirtyCanvas=false}else if(image.width!==width||image.height!==height){image.attr(dimensions)}}else if(seriesMarkerOptions.enabled||series._hasPointMarkers){HeatmapSeries_Series.prototype.drawPoints.call(series);series.points.forEach(function(point){if(point.graphic){point.graphic[series.chart.styledMode?"css":"animate"](series.colorAttribs(point));if(point.value===null){point.graphic.addClass("highcharts-null-point")}}})}};HeatmapSeries.prototype.getExtremes=function(){var _a=HeatmapSeries_Series.prototype.getExtremes.call(this,this.getColumn("value")),dataMin=_a.dataMin,dataMax=_a.dataMax;if(HeatmapSeries_isNumber(dataMin)){this.valueMin=dataMin}if(HeatmapSeries_isNumber(dataMax)){this.valueMax=dataMax}return HeatmapSeries_Series.prototype.getExtremes.call(this)};HeatmapSeries.prototype.getValidPoints=function(points,insideOnly){return HeatmapSeries_Series.prototype.getValidPoints.call(this,points,insideOnly,true)};HeatmapSeries.prototype.hasData=function(){return!!this.dataTable.rowCount};HeatmapSeries.prototype.init=function(){_super.prototype.init.apply(this,arguments);var options=this.options;options.pointRange=HeatmapSeries_pick(options.pointRange,options.colsize||1);this.yAxis.axisPointRange=options.rowsize||1;HeatmapSeries_symbols.ellipse=HeatmapSeries_symbols.circle;if(options.marker&&HeatmapSeries_isNumber(options.borderRadius)){options.marker.r=options.borderRadius}};HeatmapSeries.prototype.markerAttribs=function(point,state){var shapeArgs=point.shapeArgs||{};if(point.hasImage){return{x:point.plotX,y:point.plotY}}if(state&&state!=="normal"){var pointMarkerOptions=point.options.marker||{},seriesMarkerOptions=this.options.marker||{},seriesStateOptions=seriesMarkerOptions.states&&seriesMarkerOptions.states[state]||{},pointStateOptions=pointMarkerOptions.states&&pointMarkerOptions.states[state]||{};var width=(pointStateOptions.width||seriesStateOptions.width||shapeArgs.width||0)+(pointStateOptions.widthPlus||seriesStateOptions.widthPlus||0);var height=(pointStateOptions.height||seriesStateOptions.height||shapeArgs.height||0)+(pointStateOptions.heightPlus||seriesStateOptions.heightPlus||0);var x=(shapeArgs.x||0)+((shapeArgs.width||0)-width)/2,y=(shapeArgs.y||0)+((shapeArgs.height||0)-height)/2;return{x:x,y:y,width:width,height:height}}return shapeArgs};HeatmapSeries.prototype.pointAttribs=function(point,state){var series=this,attr=HeatmapSeries_Series.prototype.pointAttribs.call(series,point,state),seriesOptions=series.options||{},plotOptions=series.chart.options.plotOptions||{},seriesPlotOptions=plotOptions.series||{},heatmapPlotOptions=plotOptions.heatmap||{},borderColor=point&&point.options.borderColor||seriesOptions.borderColor||heatmapPlotOptions.borderColor||seriesPlotOptions.borderColor,borderWidth=point&&point.options.borderWidth||seriesOptions.borderWidth||heatmapPlotOptions.borderWidth||seriesPlotOptions.borderWidth||attr["stroke-width"];attr.stroke=point&&point.marker&&point.marker.lineColor||seriesOptions.marker&&seriesOptions.marker.lineColor||borderColor||this.color;attr["stroke-width"]=borderWidth;if(state&&state!=="normal"){var stateOptions=HeatmapSeries_merge(seriesOptions.states&&seriesOptions.states[state],seriesOptions.marker&&seriesOptions.marker.states&&seriesOptions.marker.states[state],point&&point.options.states&&point.options.states[state]||{});attr.fill=stateOptions.color||highcharts_Color_commonjs_highcharts_Color_commonjs2_highcharts_Color_root_Highcharts_Color_default().parse(attr.fill).brighten(stateOptions.brightness||0).get();attr.stroke=stateOptions.lineColor||attr.stroke}return attr};HeatmapSeries.prototype.translate=function(){var series=this,options=series.options,borderRadius=options.borderRadius,marker=options.marker,symbol=marker&&marker.symbol||"rect",shape=HeatmapSeries_symbols[symbol]?symbol:"rect",hasRegularShape=["circle","square"].indexOf(shape)!==-1;series.generatePoints();for(var _i=0,_a=series.points;_i<_a.length;_i++){var point=_a[_i];var cellAttr=point.getCellAttributes();var x=Math.min(cellAttr.x1,cellAttr.x2),y=Math.min(cellAttr.y1,cellAttr.y2),width=Math.max(Math.abs(cellAttr.x2-cellAttr.x1),0),height=Math.max(Math.abs(cellAttr.y2-cellAttr.y1),0);point.hasImage=(point.marker&&point.marker.symbol||symbol||"").indexOf("url")===0;if(hasRegularShape){var sizeDiff=Math.abs(width-height);x=Math.min(cellAttr.x1,cellAttr.x2)+(width<height?0:sizeDiff/2);y=Math.min(cellAttr.y1,cellAttr.y2)+(width<height?sizeDiff/2:0);width=height=Math.min(width,height)}if(point.hasImage){point.marker={width:width,height:height}}point.plotX=point.clientX=(cellAttr.x1+cellAttr.x2)/2;point.plotY=(cellAttr.y1+cellAttr.y2)/2;point.shapeType="path";point.shapeArgs=HeatmapSeries_merge(true,{x:x,y:y,width:width,height:height},{d:HeatmapSeries_symbols[shape](x,y,width,height,{r:HeatmapSeries_isNumber(borderRadius)?borderRadius:0})})}HeatmapSeries_fireEvent(series,"afterTranslate")};HeatmapSeries.defaultOptions=HeatmapSeries_merge(HeatmapSeries_ScatterSeries.defaultOptions,Heatmap_HeatmapSeriesDefaults);return HeatmapSeries}(HeatmapSeries_ScatterSeries);HeatmapSeries_addEvent(HeatmapSeries,"afterDataClassLegendClick",function(){this.isDirtyCanvas=true;this.drawPoints()});HeatmapSeries_extend(HeatmapSeries.prototype,{axisTypes:Series_ColorMapComposition.seriesMembers.axisTypes,colorKey:Series_ColorMapComposition.seriesMembers.colorKey,directTouch:true,getExtremesFromAll:true,keysAffectYAxis:["y"],parallelArrays:Series_ColorMapComposition.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:Heatmap_HeatmapPoint,specialGroup:"group",trackerGroups:Series_ColorMapComposition.seriesMembers.trackerGroups,alignDataLabel:HeatmapSeries_ColumnSeries.prototype.alignDataLabel,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,getSymbol:HeatmapSeries_Series.prototype.getSymbol});Series_ColorMapComposition.compose(HeatmapSeries);highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("heatmap",HeatmapSeries);var Heatmap_HeatmapSeries=null&&HeatmapSeries;"";var map_src_G=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();map_src_G.ColorMapComposition=Series_ColorMapComposition;map_src_G.MapChart=map_src_G.MapChart||Chart_MapChart;map_src_G.MapNavigation=map_src_G.MapNavigation||Maps_MapNavigation;map_src_G.MapView=map_src_G.MapView||Maps_MapView;map_src_G.Projection=map_src_G.Projection||Maps_Projection;map_src_G.mapChart=map_src_G.Map=map_src_G.MapChart.mapChart;map_src_G.maps=map_src_G.MapChart.maps;map_src_G.geojson=Maps_GeoJSONComposition.geojson;map_src_G.topo2geo=Maps_GeoJSONComposition.topo2geo;Maps_GeoJSONComposition.compose(map_src_G.Chart);MapBubble_MapBubbleSeries.compose(map_src_G.Axis,map_src_G.Chart,map_src_G.Legend);Maps_MapNavigation.compose(Chart_MapChart,map_src_G.Pointer,map_src_G.SVGRenderer);Maps_MapView.compose(Chart_MapChart);var map_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__}()});