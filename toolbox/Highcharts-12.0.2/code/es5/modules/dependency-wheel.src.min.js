(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("highcharts"),require("highcharts")["SeriesRegistry"],require("highcharts")["SVGElement"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/dependency-wheel",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"],["highcharts/highcharts","SVGElement"]],factory);else if(typeof exports==="object")exports["highcharts/modules/dependency-wheel"]=factory(require("highcharts"),require("highcharts")["SeriesRegistry"],require("highcharts")["SVGElement"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["SeriesRegistry"],root["Highcharts"]["SVGElement"])})(this,function(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__512__,__WEBPACK_EXTERNAL_MODULE__28__){return function(){"use strict";var __webpack_modules__={28:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__28__},512:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}!function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};__webpack_require__.d(getter,{a:getter});return getter}}();!function(){__webpack_require__.d=function(exports,definition){for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}}();!function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return dependency_wheel_src}});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SankeyPoint=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.sankey.prototype.pointClass;var pInt=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pInt,wrap=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().wrap;var DependencyWheelPoint=function(_super){__extends(DependencyWheelPoint,_super);function DependencyWheelPoint(){return _super!==null&&_super.apply(this,arguments)||this}DependencyWheelPoint.prototype.getDataLabelPath=function(label){var _a;var point=this,renderer=point.series.chart.renderer,shapeArgs=point.shapeArgs,upperHalf=point.angle<0||point.angle>Math.PI,start=shapeArgs.start||0,end=shapeArgs.end||0;if(!point.dataLabelPath){wrap(label,"destroy",function(proceed){if(point.dataLabelPath){point.dataLabelPath=point.dataLabelPath.destroy()}return proceed.call(this)})}else{point.dataLabelPath=point.dataLabelPath.destroy();delete point.dataLabelPath}point.dataLabelPath=renderer.arc({open:true,longArc:Math.abs(Math.abs(start)-Math.abs(end))<Math.PI?0:1}).attr({x:shapeArgs.x,y:shapeArgs.y,r:(shapeArgs.r||0)+pInt(((_a=label.options)===null||_a===void 0?void 0:_a.distance)||0),start:upperHalf?start:end,end:upperHalf?end:start,clockwise:+upperHalf}).add(renderer.defs);return point.dataLabelPath};DependencyWheelPoint.prototype.isValid=function(){return true};return DependencyWheelPoint}(SankeyPoint);var DependencyWheel_DependencyWheelPoint=DependencyWheelPoint;var DependencyWheelSeriesDefaults={center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:false,attributes:{dy:5}}}};"";var DependencyWheel_DependencyWheelSeriesDefaults=DependencyWheelSeriesDefaults;var defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,getAlignFactor=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().getAlignFactor,relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;var SankeyColumnComposition;(function(SankeyColumnComposition){function compose(points,series){var sankeyColumnArray=points;sankeyColumnArray.sankeyColumn=new SankeyColumnAdditions(sankeyColumnArray,series);return sankeyColumnArray}SankeyColumnComposition.compose=compose;var SankeyColumnAdditions=function(){function SankeyColumnAdditions(points,series){this.points=points;this.series=series}SankeyColumnAdditions.prototype.getTranslationFactor=function(series){var column=this.points,nodes=column.slice(),chart=series.chart,minLinkWidth=series.options.minLinkWidth||0;var skipPoint,factor=0,i,remainingHeight=(chart.plotSizeY||0)-(series.options.borderWidth||0)-(column.length-1)*series.nodePadding;while(column.length){factor=remainingHeight/column.sankeyColumn.sum();skipPoint=false;i=column.length;while(i--){if(column[i].getSum()*factor<minLinkWidth){column.splice(i,1);remainingHeight=Math.max(0,remainingHeight-minLinkWidth);skipPoint=true}}if(!skipPoint){break}}column.length=0;for(var _i=0,nodes_1=nodes;_i<nodes_1.length;_i++){var node=nodes_1[_i];column.push(node)}return factor};SankeyColumnAdditions.prototype.top=function(factor){var series=this.series,nodePadding=series.nodePadding,height=this.points.reduce(function(height,node){if(height>0){height+=nodePadding}var nodeHeight=Math.max(node.getSum()*factor,series.options.minLinkWidth||0);height+=nodeHeight;return height},0);return getAlignFactor(series.options.nodeAlignment||"center")*((series.chart.plotSizeY||0)-height)};SankeyColumnAdditions.prototype.left=function(factor){var series=this.series,chart=series.chart,equalNodes=series.options.equalNodes,maxNodesLength=chart.inverted?chart.plotHeight:chart.plotWidth,nodePadding=series.nodePadding,width=this.points.reduce(function(width,node){if(width>0){width+=nodePadding}var nodeWidth=equalNodes?maxNodesLength/node.series.nodes.length-nodePadding:Math.max(node.getSum()*factor,series.options.minLinkWidth||0);width+=nodeWidth;return width},0);return((chart.plotSizeX||0)-Math.round(width))/2};SankeyColumnAdditions.prototype.sum=function(){return this.points.reduce(function(sum,node){return sum+node.getSum()},0)};SankeyColumnAdditions.prototype.offset=function(node,factor){var column=this.points,series=this.series,nodePadding=series.nodePadding;var offset=0,totalNodeOffset;if(series.is("organization")&&node.hangsFrom){return{absoluteTop:node.hangsFrom.nodeY}}for(var i=0;i<column.length;i++){var sum=column[i].getSum();var height=Math.max(sum*factor,series.options.minLinkWidth||0);var directionOffset=node.options[series.chart.inverted?"offsetHorizontal":"offsetVertical"],optionOffset=node.options.offset||0;if(sum){totalNodeOffset=height+nodePadding}else{totalNodeOffset=0}if(column[i]===node){return{relativeTop:offset+(defined(directionOffset)?relativeLength(directionOffset,height):relativeLength(optionOffset,totalNodeOffset))}}offset+=totalNodeOffset}};return SankeyColumnAdditions}();SankeyColumnComposition.SankeyColumnAdditions=SankeyColumnAdditions})(SankeyColumnComposition||(SankeyColumnComposition={}));var Sankey_SankeyColumnComposition=SankeyColumnComposition;var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_=__webpack_require__(28);var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default=__webpack_require__.n(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_);var deg2rad=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad;var addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,uniqueKey=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().uniqueKey,TextPath_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend;function setTextPath(path,textPathOptions){var _this=this;textPathOptions=merge(true,{enabled:true,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},textPathOptions);var url=this.renderer.url,textWrapper=this.text||this,textPath=textWrapper.textPath,attributes=textPathOptions.attributes,enabled=textPathOptions.enabled;path=path||textPath&&textPath.path;if(textPath){textPath.undo()}if(path&&enabled){var undo=addEvent(textWrapper,"afterModifyTree",function(e){if(path&&enabled){var textPathId=path.attr("id");if(!textPathId){path.attr("id",textPathId=uniqueKey())}var textAttribs={x:0,y:0};if(TextPath_defined(attributes.dx)){textAttribs.dx=attributes.dx;delete attributes.dx}if(TextPath_defined(attributes.dy)){textAttribs.dy=attributes.dy;delete attributes.dy}textWrapper.attr(textAttribs);_this.attr({transform:""});if(_this.box){_this.box=_this.box.destroy()}var children=e.nodes.slice(0);e.nodes.length=0;e.nodes[0]={tagName:"textPath",attributes:extend(attributes,{"text-anchor":attributes.textAnchor,href:""+url+"#".concat(textPathId)}),children:children}}});textWrapper.textPath={path:path,undo:undo}}else{textWrapper.attr({dx:0,dy:0});delete textWrapper.textPath}if(this.added){textWrapper.textCache="";this.renderer.buildText(textWrapper)}return this}function setPolygon(event){var _a;var bBox=event.bBox,tp=(_a=this.element)===null||_a===void 0?void 0:_a.querySelector("textPath");if(tp){var polygon=[],_b=this.renderer.fontMetrics(this.element),b_1=_b.b,h=_b.h,descender_1=h-b_1,lineCleanerRegex=new RegExp("(<tspan>|"+'<tspan(?!\\sclass="highcharts-br")[^>]*>|'+"<\\/tspan>)","g"),lines=tp.innerHTML.replace(lineCleanerRegex,"").split(/<tspan class="highcharts-br"[^>]*>/),numOfLines=lines.length;var appendTopAndBottom=function(charIndex,positionOfChar){var x=positionOfChar.x,y=positionOfChar.y,rotation=(tp.getRotationOfChar(charIndex)-90)*deg2rad,cosRot=Math.cos(rotation),sinRot=Math.sin(rotation);return[[x-descender_1*cosRot,y-descender_1*sinRot],[x+b_1*cosRot,y+b_1*sinRot]]};for(var i=0,lineIndex=0;lineIndex<numOfLines;lineIndex++){var line=lines[lineIndex],lineLen=line.length;for(var lineCharIndex=0;lineCharIndex<lineLen;lineCharIndex+=5){try{var srcCharIndex=i+lineCharIndex+lineIndex,_c=appendTopAndBottom(srcCharIndex,tp.getStartPositionOfChar(srcCharIndex)),lower=_c[0],upper=_c[1];if(lineCharIndex===0){polygon.push(upper);polygon.push(lower)}else{if(lineIndex===0){polygon.unshift(upper)}if(lineIndex===numOfLines-1){polygon.push(lower)}}}catch(e){break}}i+=lineLen-1;try{var srcCharIndex=i+lineIndex,charPos=tp.getEndPositionOfChar(srcCharIndex),_d=appendTopAndBottom(srcCharIndex,charPos),lower=_d[0],upper=_d[1];polygon.unshift(upper);polygon.unshift(lower)}catch(e){break}}if(polygon.length){polygon.push(polygon[0].slice())}bBox.polygon=polygon}return bBox}function drawTextPath(event){var _a;var labelOptions=event.labelOptions,point=event.point,textPathOptions=labelOptions[point.formatPrefix+"TextPath"]||labelOptions.textPath;if(textPathOptions&&!labelOptions.useHTML){this.setTextPath(((_a=point.getDataLabelPath)===null||_a===void 0?void 0:_a.call(point,this))||point.graphic,textPathOptions);if(point.dataLabelPath&&!textPathOptions.enabled){point.dataLabelPath=point.dataLabelPath.destroy()}}}function compose(SVGElementClass){addEvent(SVGElementClass,"afterGetBBox",setPolygon);addEvent(SVGElementClass,"beforeAddingDataLabel",drawTextPath);var svgElementProto=SVGElementClass.prototype;if(!svgElementProto.setTextPath){svgElementProto.setTextPath=setTextPath}}var TextPath={compose:compose};var Extensions_TextPath=TextPath;var DependencyWheelSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var animObject=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().animObject;var DependencyWheelSeries_deg2rad=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad;var _a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,PieSeries=_a.pie,SankeySeries=_a.sankey;var DependencyWheelSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,DependencyWheelSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,DependencyWheelSeries_relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;Extensions_TextPath.compose(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default());var DependencyWheelSeries=function(_super){DependencyWheelSeries_extends(DependencyWheelSeries,_super);function DependencyWheelSeries(){return _super!==null&&_super.apply(this,arguments)||this}DependencyWheelSeries.prototype.animate=function(init){var series=this;if(!init){var duration=animObject(series.options.animation).duration,step_1=duration/2/series.nodes.length;var i=0;var _loop_1=function(point){var graphic=point.graphic;if(graphic){graphic.attr({opacity:0});setTimeout(function(){if(point.graphic){point.graphic.animate({opacity:1},{duration:step_1})}},step_1*i++)}};for(var _i=0,_a=series.nodes;_i<_a.length;_i++){var point=_a[_i];_loop_1(point)}for(var _b=0,_c=series.points;_b<_c.length;_b++){var point=_c[_b];var graphic=point.graphic;if(!point.isNode&&graphic){graphic.attr({opacity:0}).animate({opacity:1},series.options.animation)}}}};DependencyWheelSeries.prototype.createNode=function(id){var node=_super.prototype.createNode.call(this,id);node.getSum=function(){return node.linksFrom.concat(node.linksTo).reduce(function(acc,link){return acc+link.weight},0)};node.offset=function(point){var otherNode=function(link){return link.fromNode===node?link.toNode:link.fromNode};var offset=0,links=node.linksFrom.concat(node.linksTo),sliced;links.sort(function(a,b){return otherNode(a).index-otherNode(b).index});for(var i=0;i<links.length;i++){if(otherNode(links[i]).index>node.index){links=links.slice(0,i).reverse().concat(links.slice(i).reverse());sliced=true;break}}if(!sliced){links.reverse()}for(var i=0;i<links.length;i++){if(links[i]===point){return offset}offset+=links[i].weight}};return node};DependencyWheelSeries.prototype.createNodeColumns=function(){var series=this,columns=[Sankey_SankeyColumnComposition.compose([],series)];for(var _i=0,_a=series.nodes;_i<_a.length;_i++){var node=_a[_i];node.column=0;columns[0].push(node)}return columns};DependencyWheelSeries.prototype.getNodePadding=function(){return this.options.nodePadding/Math.PI};DependencyWheelSeries.prototype.translate=function(){var series=this,options=series.options,factor=2*Math.PI/(series.chart.plotHeight+series.getNodePadding()),center=series.getCenter(),startAngle=(options.startAngle-90)*DependencyWheelSeries_deg2rad,brOption=options.borderRadius,borderRadius=typeof brOption==="object"?brOption.radius:brOption;_super.prototype.translate.call(this);var _loop_2=function(node){if(node.sum){var shapeArgs=node.shapeArgs,centerX_1=center[0],centerY_1=center[1],r=center[2]/2,nodeWidth=options.nodeWidth==="auto"?20:options.nodeWidth,innerR_1=r-DependencyWheelSeries_relativeLength(nodeWidth||0,r),start=startAngle+factor*(shapeArgs.y||0),end=startAngle+factor*((shapeArgs.y||0)+(shapeArgs.height||0));node.angle=start+(end-start)/2;node.shapeType="arc";node.shapeArgs={x:centerX_1,y:centerY_1,r:r,innerR:innerR_1,start:start,end:end,borderRadius:borderRadius};node.dlBox={x:centerX_1+Math.cos((start+end)/2)*(r+innerR_1)/2,y:centerY_1+Math.sin((start+end)/2)*(r+innerR_1)/2,width:1,height:1};var _loop_3=function(point){if(point.linkBase){var curveFactor_1,distance_1;var corners=point.linkBase.map(function(top,i){var angle=factor*top,x=Math.cos(startAngle+angle)*(innerR_1+1),y=Math.sin(startAngle+angle)*(innerR_1+1);curveFactor_1=options.curveFactor||0;distance_1=Math.abs(point.linkBase[3-i]*factor-angle);if(distance_1>Math.PI){distance_1=2*Math.PI-distance_1}distance_1=distance_1*innerR_1;if(distance_1<innerR_1){curveFactor_1*=distance_1/innerR_1}return{x:centerX_1+x,y:centerY_1+y,cpX:centerX_1+(1-curveFactor_1)*x,cpY:centerY_1+(1-curveFactor_1)*y}});point.shapeArgs={d:[["M",corners[0].x,corners[0].y],["A",innerR_1,innerR_1,0,0,1,corners[1].x,corners[1].y],["C",corners[1].cpX,corners[1].cpY,corners[2].cpX,corners[2].cpY,corners[2].x,corners[2].y],["A",innerR_1,innerR_1,0,0,1,corners[3].x,corners[3].y],["C",corners[3].cpX,corners[3].cpY,corners[0].cpX,corners[0].cpY,corners[0].x,corners[0].y]]}}};for(var _b=0,_c=node.linksFrom;_b<_c.length;_b++){var point=_c[_b];_loop_3(point)}}};for(var _i=0,_a=this.nodeColumns[0];_i<_a.length;_i++){var node=_a[_i];_loop_2(node)}};DependencyWheelSeries.defaultOptions=DependencyWheelSeries_merge(SankeySeries.defaultOptions,DependencyWheel_DependencyWheelSeriesDefaults);return DependencyWheelSeries}(SankeySeries);DependencyWheelSeries_extend(DependencyWheelSeries.prototype,{orderNodes:false,getCenter:PieSeries.prototype.getCenter});DependencyWheelSeries.prototype.pointClass=DependencyWheel_DependencyWheelPoint;highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("dependencywheel",DependencyWheelSeries);var DependencyWheel_DependencyWheelSeries=null&&DependencyWheelSeries;var dependency_wheel_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__}()});