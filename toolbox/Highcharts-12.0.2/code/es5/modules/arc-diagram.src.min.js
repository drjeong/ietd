(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("highcharts"),require("highcharts")["SeriesRegistry"],require("highcharts")["Series"],require("highcharts")["SVGRenderer"],require("highcharts")["SVGElement"]);else if(typeof define==="function"&&define.amd)define("highcharts/modules/arc-diagram",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"],["highcharts/highcharts","Series"],["highcharts/highcharts","SVGRenderer"],["highcharts/highcharts","SVGElement"]],factory);else if(typeof exports==="object")exports["highcharts/modules/arc-diagram"]=factory(require("highcharts"),require("highcharts")["SeriesRegistry"],require("highcharts")["Series"],require("highcharts")["SVGRenderer"],require("highcharts")["SVGElement"]);else root["Highcharts"]=factory(root["Highcharts"],root["Highcharts"]["SeriesRegistry"],root["Highcharts"]["Series"],root["Highcharts"]["SVGRenderer"],root["Highcharts"]["SVGElement"])})(this,function(__WEBPACK_EXTERNAL_MODULE__944__,__WEBPACK_EXTERNAL_MODULE__512__,__WEBPACK_EXTERNAL_MODULE__820__,__WEBPACK_EXTERNAL_MODULE__540__,__WEBPACK_EXTERNAL_MODULE__28__){return function(){"use strict";var __webpack_modules__={28:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__28__},540:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__540__},820:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__820__},512:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__512__},944:function(module){module.exports=__WEBPACK_EXTERNAL_MODULE__944__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}!function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};__webpack_require__.d(getter,{a:getter});return getter}}();!function(){__webpack_require__.d=function(exports,definition){for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}}();!function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}();var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return arc_diagram_src}});var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_=__webpack_require__(944);var highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default=__webpack_require__.n(highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_=__webpack_require__(512);var highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default=__webpack_require__.n(highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_);var _a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().series,seriesProto=_a.prototype,pointProto=_a.prototype.pointClass.prototype;var defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,find=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().find,merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick;var NodesComposition;(function(NodesComposition){function compose(PointClass,SeriesClass){var pointProto=PointClass.prototype,seriesProto=SeriesClass.prototype;pointProto.setNodeState=setNodeState;pointProto.setState=setNodeState;pointProto.update=updateNode;seriesProto.destroy=destroy;seriesProto.setData=setData;return SeriesClass}NodesComposition.compose=compose;function createNode(id){var PointClass=this.pointClass,findById=function(nodes,id){return find(nodes,function(node){return node.id===id})};var node=findById(this.nodes,id),options;if(!node){options=this.options.nodes&&findById(this.options.nodes,id);var newNode_1=new PointClass(this,extend({className:"highcharts-node",isNode:true,id:id,y:1},options));newNode_1.linksTo=[];newNode_1.linksFrom=[];newNode_1.getSum=function(){var sumTo=0,sumFrom=0;newNode_1.linksTo.forEach(function(link){sumTo+=link.weight||0});newNode_1.linksFrom.forEach(function(link){sumFrom+=link.weight||0});return Math.max(sumTo,sumFrom)};newNode_1.offset=function(point,coll){var offset=0;for(var i=0;i<newNode_1[coll].length;i++){if(newNode_1[coll][i]===point){return offset}offset+=newNode_1[coll][i].weight}};newNode_1.hasShape=function(){var outgoing=0;newNode_1.linksTo.forEach(function(link){if(link.outgoing){outgoing++}});return!newNode_1.linksTo.length||outgoing!==newNode_1.linksTo.length};newNode_1.index=this.nodes.push(newNode_1)-1;node=newNode_1}node.formatPrefix="node";node.name=node.name||node.options.id||"";node.mass=pick(node.options.mass,node.options.marker&&node.options.marker.radius,this.options.marker&&this.options.marker.radius,4);return node}NodesComposition.createNode=createNode;function destroy(){this.data=[].concat(this.points||[],this.nodes);return seriesProto.destroy.apply(this,arguments)}NodesComposition.destroy=destroy;function generatePoints(){var _this=this;var chart=this.chart,nodeLookup={};seriesProto.generatePoints.call(this);if(!this.nodes){this.nodes=[]}this.colorCounter=0;this.nodes.forEach(function(node){node.linksFrom.length=0;node.linksTo.length=0;node.level=node.options.level});this.points.forEach(function(point){if(defined(point.from)){if(!nodeLookup[point.from]){nodeLookup[point.from]=_this.createNode(point.from)}nodeLookup[point.from].linksFrom.push(point);point.fromNode=nodeLookup[point.from];if(chart.styledMode){point.colorIndex=pick(point.options.colorIndex,nodeLookup[point.from].colorIndex)}else{point.color=point.options.color||nodeLookup[point.from].color}}if(defined(point.to)){if(!nodeLookup[point.to]){nodeLookup[point.to]=_this.createNode(point.to)}nodeLookup[point.to].linksTo.push(point);point.toNode=nodeLookup[point.to]}point.name=point.name||point.id},this);this.nodeLookup=nodeLookup}NodesComposition.generatePoints=generatePoints;function setData(){if(this.nodes){this.nodes.forEach(function(node){node.destroy()});this.nodes.length=0}seriesProto.setData.apply(this,arguments)}function setNodeState(state){var args=arguments,others=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];if(state!=="select"){others.forEach(function(linkOrNode){if(linkOrNode&&linkOrNode.series){pointProto.setState.apply(linkOrNode,args);if(!linkOrNode.isNode){if(linkOrNode.fromNode.graphic){pointProto.setState.apply(linkOrNode.fromNode,args)}if(linkOrNode.toNode&&linkOrNode.toNode.graphic){pointProto.setState.apply(linkOrNode.toNode,args)}}}})}pointProto.setState.apply(this,args)}NodesComposition.setNodeState=setNodeState;function updateNode(options,redraw,animation,runEvent){var _this=this;var nodes=this.series.options.nodes,data=this.series.options.data,dataLength=(data===null||data===void 0?void 0:data.length)||0,linkConfig=data===null||data===void 0?void 0:data[this.index];pointProto.update.call(this,options,this.isNode?false:redraw,animation,runEvent);if(this.isNode){var nodeIndex=(nodes||[]).reduce(function(prevIndex,n,index){return _this.id===n.id?index:prevIndex},-1),nodeConfig=merge(nodes&&nodes[nodeIndex]||{},(data===null||data===void 0?void 0:data[this.index])||{});if(data){if(linkConfig){data[this.index]=linkConfig}else{data.length=dataLength}}if(nodes){if(nodeIndex>=0){nodes[nodeIndex]=nodeConfig}else{nodes.push(nodeConfig)}}else{this.series.options.nodes=[nodeConfig]}if(pick(redraw,true)){this.series.chart.redraw(animation)}}}NodesComposition.updateNode=updateNode})(NodesComposition||(NodesComposition={}));var Series_NodesComposition=NodesComposition;var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SankeyPoint=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes.sankey.prototype.pointClass;var ArcDiagramPoint_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend;var ArcDiagramPoint=function(_super){__extends(ArcDiagramPoint,_super);function ArcDiagramPoint(){return _super!==null&&_super.apply(this,arguments)||this}ArcDiagramPoint.prototype.isValid=function(){return true};return ArcDiagramPoint}(SankeyPoint);ArcDiagramPoint_extend(ArcDiagramPoint.prototype,{setState:Series_NodesComposition.setNodeState});var ArcDiagram_ArcDiagramPoint=ArcDiagramPoint;var ArcDiagramSeriesDefaults={centeredLinks:false,equalNodes:false,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{fillOpacity:1,lineWidth:0,states:{},symbol:"circle"},offset:"100%",reversed:false};"";var ArcDiagram_ArcDiagramSeriesDefaults=ArcDiagramSeriesDefaults;var SankeyColumnComposition_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,getAlignFactor=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().getAlignFactor,relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;var SankeyColumnComposition;(function(SankeyColumnComposition){function compose(points,series){var sankeyColumnArray=points;sankeyColumnArray.sankeyColumn=new SankeyColumnAdditions(sankeyColumnArray,series);return sankeyColumnArray}SankeyColumnComposition.compose=compose;var SankeyColumnAdditions=function(){function SankeyColumnAdditions(points,series){this.points=points;this.series=series}SankeyColumnAdditions.prototype.getTranslationFactor=function(series){var column=this.points,nodes=column.slice(),chart=series.chart,minLinkWidth=series.options.minLinkWidth||0;var skipPoint,factor=0,i,remainingHeight=(chart.plotSizeY||0)-(series.options.borderWidth||0)-(column.length-1)*series.nodePadding;while(column.length){factor=remainingHeight/column.sankeyColumn.sum();skipPoint=false;i=column.length;while(i--){if(column[i].getSum()*factor<minLinkWidth){column.splice(i,1);remainingHeight=Math.max(0,remainingHeight-minLinkWidth);skipPoint=true}}if(!skipPoint){break}}column.length=0;for(var _i=0,nodes_1=nodes;_i<nodes_1.length;_i++){var node=nodes_1[_i];column.push(node)}return factor};SankeyColumnAdditions.prototype.top=function(factor){var series=this.series,nodePadding=series.nodePadding,height=this.points.reduce(function(height,node){if(height>0){height+=nodePadding}var nodeHeight=Math.max(node.getSum()*factor,series.options.minLinkWidth||0);height+=nodeHeight;return height},0);return getAlignFactor(series.options.nodeAlignment||"center")*((series.chart.plotSizeY||0)-height)};SankeyColumnAdditions.prototype.left=function(factor){var series=this.series,chart=series.chart,equalNodes=series.options.equalNodes,maxNodesLength=chart.inverted?chart.plotHeight:chart.plotWidth,nodePadding=series.nodePadding,width=this.points.reduce(function(width,node){if(width>0){width+=nodePadding}var nodeWidth=equalNodes?maxNodesLength/node.series.nodes.length-nodePadding:Math.max(node.getSum()*factor,series.options.minLinkWidth||0);width+=nodeWidth;return width},0);return((chart.plotSizeX||0)-Math.round(width))/2};SankeyColumnAdditions.prototype.sum=function(){return this.points.reduce(function(sum,node){return sum+node.getSum()},0)};SankeyColumnAdditions.prototype.offset=function(node,factor){var column=this.points,series=this.series,nodePadding=series.nodePadding;var offset=0,totalNodeOffset;if(series.is("organization")&&node.hangsFrom){return{absoluteTop:node.hangsFrom.nodeY}}for(var i=0;i<column.length;i++){var sum=column[i].getSum();var height=Math.max(sum*factor,series.options.minLinkWidth||0);var directionOffset=node.options[series.chart.inverted?"offsetHorizontal":"offsetVertical"],optionOffset=node.options.offset||0;if(sum){totalNodeOffset=height+nodePadding}else{totalNodeOffset=0}if(column[i]===node){return{relativeTop:offset+(SankeyColumnComposition_defined(directionOffset)?relativeLength(directionOffset,height):relativeLength(optionOffset,totalNodeOffset))}}offset+=totalNodeOffset}};return SankeyColumnAdditions}();SankeyColumnComposition.SankeyColumnAdditions=SankeyColumnAdditions})(SankeyColumnComposition||(SankeyColumnComposition={}));var Sankey_SankeyColumnComposition=SankeyColumnComposition;var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_=__webpack_require__(820);var highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default=__webpack_require__.n(highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_=__webpack_require__(540);var highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default=__webpack_require__.n(highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_);var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_=__webpack_require__(28);var highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default=__webpack_require__.n(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_);var deg2rad=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().deg2rad;var addEvent=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().addEvent,TextPath_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,uniqueKey=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().uniqueKey,TextPath_defined=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().defined,TextPath_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend;function setTextPath(path,textPathOptions){var _this=this;textPathOptions=TextPath_merge(true,{enabled:true,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},textPathOptions);var url=this.renderer.url,textWrapper=this.text||this,textPath=textWrapper.textPath,attributes=textPathOptions.attributes,enabled=textPathOptions.enabled;path=path||textPath&&textPath.path;if(textPath){textPath.undo()}if(path&&enabled){var undo=addEvent(textWrapper,"afterModifyTree",function(e){if(path&&enabled){var textPathId=path.attr("id");if(!textPathId){path.attr("id",textPathId=uniqueKey())}var textAttribs={x:0,y:0};if(TextPath_defined(attributes.dx)){textAttribs.dx=attributes.dx;delete attributes.dx}if(TextPath_defined(attributes.dy)){textAttribs.dy=attributes.dy;delete attributes.dy}textWrapper.attr(textAttribs);_this.attr({transform:""});if(_this.box){_this.box=_this.box.destroy()}var children=e.nodes.slice(0);e.nodes.length=0;e.nodes[0]={tagName:"textPath",attributes:TextPath_extend(attributes,{"text-anchor":attributes.textAnchor,href:""+url+"#".concat(textPathId)}),children:children}}});textWrapper.textPath={path:path,undo:undo}}else{textWrapper.attr({dx:0,dy:0});delete textWrapper.textPath}if(this.added){textWrapper.textCache="";this.renderer.buildText(textWrapper)}return this}function setPolygon(event){var _a;var bBox=event.bBox,tp=(_a=this.element)===null||_a===void 0?void 0:_a.querySelector("textPath");if(tp){var polygon=[],_b=this.renderer.fontMetrics(this.element),b_1=_b.b,h=_b.h,descender_1=h-b_1,lineCleanerRegex=new RegExp("(<tspan>|"+'<tspan(?!\\sclass="highcharts-br")[^>]*>|'+"<\\/tspan>)","g"),lines=tp.innerHTML.replace(lineCleanerRegex,"").split(/<tspan class="highcharts-br"[^>]*>/),numOfLines=lines.length;var appendTopAndBottom=function(charIndex,positionOfChar){var x=positionOfChar.x,y=positionOfChar.y,rotation=(tp.getRotationOfChar(charIndex)-90)*deg2rad,cosRot=Math.cos(rotation),sinRot=Math.sin(rotation);return[[x-descender_1*cosRot,y-descender_1*sinRot],[x+b_1*cosRot,y+b_1*sinRot]]};for(var i=0,lineIndex=0;lineIndex<numOfLines;lineIndex++){var line=lines[lineIndex],lineLen=line.length;for(var lineCharIndex=0;lineCharIndex<lineLen;lineCharIndex+=5){try{var srcCharIndex=i+lineCharIndex+lineIndex,_c=appendTopAndBottom(srcCharIndex,tp.getStartPositionOfChar(srcCharIndex)),lower=_c[0],upper=_c[1];if(lineCharIndex===0){polygon.push(upper);polygon.push(lower)}else{if(lineIndex===0){polygon.unshift(upper)}if(lineIndex===numOfLines-1){polygon.push(lower)}}}catch(e){break}}i+=lineLen-1;try{var srcCharIndex=i+lineIndex,charPos=tp.getEndPositionOfChar(srcCharIndex),_d=appendTopAndBottom(srcCharIndex,charPos),lower=_d[0],upper=_d[1];polygon.unshift(upper);polygon.unshift(lower)}catch(e){break}}if(polygon.length){polygon.push(polygon[0].slice())}bBox.polygon=polygon}return bBox}function drawTextPath(event){var _a;var labelOptions=event.labelOptions,point=event.point,textPathOptions=labelOptions[point.formatPrefix+"TextPath"]||labelOptions.textPath;if(textPathOptions&&!labelOptions.useHTML){this.setTextPath(((_a=point.getDataLabelPath)===null||_a===void 0?void 0:_a.call(point,this))||point.graphic,textPathOptions);if(point.dataLabelPath&&!textPathOptions.enabled){point.dataLabelPath=point.dataLabelPath.destroy()}}}function compose(SVGElementClass){addEvent(SVGElementClass,"afterGetBBox",setPolygon);addEvent(SVGElementClass,"beforeAddingDataLabel",drawTextPath);var svgElementProto=SVGElementClass.prototype;if(!svgElementProto.setTextPath){svgElementProto.setTextPath=setTextPath}}var TextPath={compose:compose};var Extensions_TextPath=TextPath;var ArcDiagramSeries_extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __rest=undefined&&undefined.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t};Extensions_TextPath.compose(highcharts_SVGElement_commonjs_highcharts_SVGElement_commonjs2_highcharts_SVGElement_root_Highcharts_SVGElement_default());var symbols=highcharts_SVGRenderer_commonjs_highcharts_SVGRenderer_commonjs2_highcharts_SVGRenderer_root_Highcharts_SVGRenderer_default().prototype.symbols;var ArcDiagramSeries_a=highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().seriesTypes,ColumnSeries=ArcDiagramSeries_a.column,SankeySeries=ArcDiagramSeries_a.sankey;var crisp=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().crisp,ArcDiagramSeries_extend=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().extend,ArcDiagramSeries_merge=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().merge,ArcDiagramSeries_pick=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().pick,ArcDiagramSeries_relativeLength=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default().relativeLength;var ArcDiagramSeries=function(_super){ArcDiagramSeries_extends(ArcDiagramSeries,_super);function ArcDiagramSeries(){return _super!==null&&_super.apply(this,arguments)||this}ArcDiagramSeries.prototype.createNodeColumns=function(){var _this=this;var series=this,chart=series.chart,column=Sankey_SankeyColumnComposition.compose([],series);column.sankeyColumn.maxLength=chart.inverted?chart.plotHeight:chart.plotWidth;column.sankeyColumn.getTranslationFactor=function(series){var nodes=column.slice(),minLinkWidth=_this.options.minLinkWidth||0;var skipPoint,factor=0,i,radius,maxRadius=0,scale=1,additionalSpace=0,remainingWidth=(chart.plotSizeX||0)-(series.options.marker&&series.options.marker.lineWidth||0)-(column.length-1)*series.nodePadding;while(column.length){factor=remainingWidth/column.sankeyColumn.sum();skipPoint=false;i=column.length;while(i--){radius=column[i].getSum()*factor*scale;var plotArea=Math.min(chart.plotHeight,chart.plotWidth);if(radius>plotArea){scale=Math.min(plotArea/radius,scale)}else if(radius<minLinkWidth){column.splice(i,1);remainingWidth-=minLinkWidth;radius=minLinkWidth;skipPoint=true}additionalSpace+=radius*(1-scale)/2;maxRadius=Math.max(maxRadius,radius)}if(!skipPoint){break}}column.length=0;nodes.forEach(function(node){node.scale=scale;column.push(node)});column.sankeyColumn.maxRadius=maxRadius;column.sankeyColumn.scale=scale;column.sankeyColumn.additionalSpace=additionalSpace;return factor};column.sankeyColumn.offset=function(node,factor){var equalNodes=node.series.options.equalNodes,nodePadding=series.nodePadding,maxRadius=Math.min(chart.plotWidth,chart.plotHeight,(column.sankeyColumn.maxLength||0)/series.nodes.length-nodePadding);var offset=column.sankeyColumn.additionalSpace||0,totalNodeOffset;for(var i=0;i<column.length;i++){var sum=column[i].getSum()*(column.sankeyColumn.scale||0);var width=equalNodes?maxRadius:Math.max(sum*factor,series.options.minLinkWidth||0);if(sum){totalNodeOffset=width+nodePadding}else{totalNodeOffset=0}if(column[i]===node){return{relativeLeft:offset+ArcDiagramSeries_relativeLength(node.options.offset||0,totalNodeOffset)}}offset+=totalNodeOffset}};series.nodes.forEach(function(node){node.column=0;column.push(node)});return[column]};ArcDiagramSeries.prototype.translateLink=function(point){var _a,_b;var series=this,fromNode=point.fromNode,toNode=point.toNode,chart=this.chart,translationFactor=series.translationFactor,pointOptions=point.options,seriesOptions=series.options,linkWeight=ArcDiagramSeries_pick(pointOptions.linkWeight,seriesOptions.linkWeight,Math.max((point.weight||0)*translationFactor*fromNode.scale,series.options.minLinkWidth||0)),centeredLinks=point.series.options.centeredLinks,nodeTop=fromNode.nodeY;var getX=function(node,fromOrTo){var linkLeft=(node.offset(point,fromOrTo)||0)*translationFactor;var x=Math.min(node.nodeX+linkLeft,node.nodeX+(node.shapeArgs&&node.shapeArgs.height||0)-linkWeight);return x};var fromX=centeredLinks?fromNode.nodeX+((fromNode.shapeArgs.height||0)-linkWeight)/2:getX(fromNode,"linksFrom"),toX=centeredLinks?toNode.nodeX+((toNode.shapeArgs.height||0)-linkWeight)/2:getX(toNode,"linksTo"),bottom=nodeTop;if(fromX>toX){_a=[toX,fromX],fromX=_a[0],toX=_a[1]}if(seriesOptions.reversed){_b=[toX,fromX],fromX=_b[0],toX=_b[1];bottom=(chart.plotSizeY||0)-bottom}point.shapeType="path";point.linkBase=[fromX,fromX+linkWeight,toX,toX+linkWeight];var linkRadius=(toX+linkWeight-fromX)/Math.abs(toX+linkWeight-fromX)*ArcDiagramSeries_pick(seriesOptions.linkRadius,Math.min(Math.abs(toX+linkWeight-fromX)/2,fromNode.nodeY-Math.abs(linkWeight)));point.shapeArgs={d:[["M",fromX,bottom],["A",(toX+linkWeight-fromX)/2,linkRadius,0,0,1,toX+linkWeight,bottom],["L",toX,bottom],["A",(toX-fromX-linkWeight)/2,linkRadius-linkWeight,0,0,0,fromX+linkWeight,bottom],["Z"]]};point.dlBox={x:fromX+(toX-fromX)/2,y:bottom-linkRadius,height:linkWeight,width:0};point.tooltipPos=chart.inverted?[(chart.plotSizeY||0)-point.dlBox.y-linkWeight/2,(chart.plotSizeX||0)-point.dlBox.x]:[point.dlBox.x,point.dlBox.y+linkWeight/2];point.y=point.plotY=1;point.x=point.plotX=1;if(!point.color){point.color=fromNode.color}};ArcDiagramSeries.prototype.translateNode=function(node,column){var _a;var series=this,translationFactor=series.translationFactor,chart=series.chart,maxNodesLength=chart.inverted?chart.plotWidth:chart.plotHeight,options=series.options,maxRadius=Math.min(chart.plotWidth,chart.plotHeight,maxNodesLength/node.series.nodes.length-this.nodePadding),sum=node.getSum()*(column.sankeyColumn.scale||0),equalNodes=options.equalNodes,nodeHeight=equalNodes?maxRadius:Math.max(sum*translationFactor,this.options.minLinkWidth||0),lineWidth=((_a=options.marker)===null||_a===void 0?void 0:_a.lineWidth)||0,nodeOffset=column.sankeyColumn.offset(node,translationFactor),fromNodeLeft=crisp(ArcDiagramSeries_pick(nodeOffset&&nodeOffset.absoluteLeft,(column.sankeyColumn.left(translationFactor)||0)+(nodeOffset&&nodeOffset.relativeLeft||0)),lineWidth),markerOptions=ArcDiagramSeries_merge(options.marker,node.options.marker),symbol=markerOptions.symbol,markerRadius=markerOptions.radius,top=parseInt(options.offset,10)*((chart.inverted?chart.plotWidth:chart.plotHeight)-(crisp(this.colDistance*(node.column||0)+(markerOptions.lineWidth||0)/2,lineWidth)+(column.sankeyColumn.scale||0)*(column.sankeyColumn.maxRadius||0)/2))/100;node.sum=sum;if(sum){node.nodeX=fromNodeLeft;node.nodeY=top;var x=fromNodeLeft,width=node.options.width||options.width||nodeHeight,height=node.options.height||options.height||nodeHeight;var y=top;if(options.reversed){y=(chart.plotSizeY||0)-top;if(chart.inverted){y=(chart.plotSizeY||0)-top}}if(this.mapOptionsToLevel){node.dlOptions=SankeySeries.getDLOptions({level:this.mapOptionsToLevel[node.level],optionsPoint:node.options})}node.plotX=1;node.plotY=1;node.tooltipPos=chart.inverted?[(chart.plotSizeY||0)-y-height/2,(chart.plotSizeX||0)-x-width/2]:[x+width/2,y+height/2];node.shapeType="path";node.shapeArgs={d:symbols[symbol||"circle"](x,y-(markerRadius||height)/2,markerRadius||width,markerRadius||height),width:markerRadius||width,height:markerRadius||height};node.dlBox={x:x+width/2,y:y,height:0,width:0}}else{node.dlOptions={enabled:false}}};ArcDiagramSeries.prototype.drawDataLabels=function(){if(this.options.dataLabels){var textPath=this.options.dataLabels.textPath;ColumnSeries.prototype.drawDataLabels.call(this,this.nodes);this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath;ColumnSeries.prototype.drawDataLabels.call(this,this.data);this.options.dataLabels.textPath=textPath}};ArcDiagramSeries.prototype.pointAttribs=function(point,state){if(point&&point.isNode){var attrs=__rest(highcharts_Series_commonjs_highcharts_Series_commonjs2_highcharts_Series_root_Highcharts_Series_default().prototype.pointAttribs.apply(this,arguments),[]);return attrs}return _super.prototype.pointAttribs.apply(this,arguments)};ArcDiagramSeries.prototype.markerAttribs=function(point){if(point.isNode){return _super.prototype.markerAttribs.apply(this,arguments)}return{}};ArcDiagramSeries.defaultOptions=ArcDiagramSeries_merge(SankeySeries.defaultOptions,ArcDiagram_ArcDiagramSeriesDefaults);return ArcDiagramSeries}(SankeySeries);ArcDiagramSeries_extend(ArcDiagramSeries.prototype,{orderNodes:false});ArcDiagramSeries.prototype.pointClass=ArcDiagram_ArcDiagramPoint;highcharts_SeriesRegistry_commonjs_highcharts_SeriesRegistry_commonjs2_highcharts_SeriesRegistry_root_Highcharts_SeriesRegistry_default().registerSeriesType("arcdiagram",ArcDiagramSeries);var ArcDiagram_ArcDiagramSeries=null&&ArcDiagramSeries;var arc_diagram_src=highcharts_commonjs_highcharts_commonjs2_highcharts_root_Highcharts_default();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__}()});